(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,r){var n=r("b622"),i=n("toStringTag"),s={};s[i]="z",e.exports="[object z]"===String(s)},"0191":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producer=void 0;const n=r("ee1f"),i=r("1b28"),s=r("9c0b"),o=new n.Logger("Producer");class a extends i.EnhancedEventEmitter{constructor({id:e,localId:t,rtpSender:r,track:n,rtpParameters:s,stopTracks:a,disableTrackOnPause:c,zeroRtpOnPause:d,appData:u}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=r,this._track=n,this._kind=n.kind,this._rtpParameters=s,this._paused=!!c&&!n.enabled,this._maxSpatialLayer=void 0,this._stopTracks=a,this._disableTrackOnPause=c,this._zeroRtpOnPause=d,this._appData=u,this._onTrackEnded=this._onTrackEnded.bind(this),this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return this.safeEmitAsPromise("@getstats")}pause(){o.debug("pause()"),this._closed?o.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",null).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",this._track).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:e}){if(o.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(t){}throw new s.InvalidStateError("closed")}if(e&&"ended"===e.readyState)throw new s.InvalidStateError("track ended");e!==this._track?(this._zeroRtpOnPause&&this._paused||await this.safeEmitAsPromise("@replacetrack",e),this._destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack()):o.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(e){if(this._closed)throw new s.InvalidStateError("closed");if("video"!==this._kind)throw new s.UnsupportedError("not a video Producer");if("number"!==typeof e)throw new TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await this.safeEmitAsPromise("@setmaxspatiallayer",e),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new s.InvalidStateError("closed");if("object"!==typeof e)throw new TypeError("invalid params");await this.safeEmitAsPromise("@setrtpencodingparameters",e)}_onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}_handleTrack(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}}t.Producer=a},"032e":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r("363f"),t),i(r("525a"),t),i(r("0191"),t),i(r("b19e"),t),i(r("5258"),t),i(r("8544"),t),i(r("cb9c"),t),i(r("51f9"),t),i(r("d73d"),t),i(r("9c0b"),t)},"0366":function(e,t,r){var n=r("59ed");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"057f":function(e,t,r){var n=r("fc6a"),i=r("241c").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?a(e):i(n(e))}},"06cf":function(e,t,r){var n=r("83ab"),i=r("d1e7"),s=r("5c6c"),o=r("fc6a"),a=r("a04b"),c=r("1a2d"),d=r("0cfb"),u=Object.getOwnPropertyDescriptor;t.f=n?u:function(e,t){if(e=o(e),t=a(t),d)try{return u(e,t)}catch(r){}if(c(e,t))return s(!i.f.call(e,t),e[t])}},"07fa":function(e,t,r){var n=r("50c4");e.exports=function(e){return n(e.length)}},"0b42":function(e,t,r){var n=r("e8b5"),i=r("68ee"),s=r("861d"),o=r("b622"),a=o("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,i(t)&&(t===Array||n(t.prototype))?t=void 0:s(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},"0cfb":function(e,t,r){var n=r("83ab"),i=r("d039"),s=r("cc12");e.exports=!n&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"0d3b":function(e,t,r){var n=r("d039"),i=r("b622"),s=r("c430"),o=i("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),r+=n+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},"0d51":function(e,t){e.exports=function(e){try{return String(e)}catch(t){return"Object"}}},"107c":function(e,t,r){var n=r("d039"),i=r("da84"),s=i.RegExp;e.exports=n((function(){var e=s("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"10be":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome67=void 0;const o=s(r("93be")),a=r("ee1f"),c=s(r("f31c")),d=s(r("feba")),u=s(r("6303")),p=s(r("b124")),l=r("d73d"),f=r("19f7"),h=new a.Logger("Chrome67"),m={OS:1024,MIS:1024};class g extends l.HandlerInterface{constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new g}get name(){return"Chrome67"}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=o.parse(r.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:u}){h.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",u),video:d.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",u),video:d.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){h.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let i,s=await this._pc.createOffer(),a=o.parse(s.sdp);const l=c.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=d.reduceCodecs(l.codecs);const f=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(f.codecs=d.reduceCodecs(f.codecs),this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:a}),"video"===e.kind&&t&&t.length>1&&(h.debug("send() | enabling simulcast"),a=o.parse(s.sdp),i=a.media.find(e=>"video"===e.type),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(a)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=o.parse(this._pc.localDescription.sdp),i=a.media.find(t=>t.type===e.kind),l.rtcp.cname=u.getCname({offerMediaObject:i}),l.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let o=0;o<l.encodings.length;++o)t[o]&&Object.assign(l.encodings[o],t[o]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase())for(const o of l.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:l,answerRtpParameters:f,codecOptions:r});const m={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m);const g=String(this._nextSendLocalId);this._nextSendLocalId++;const y=this._pc.getSenders().find(t=>t.track===e);return this._mapSendLocalIdRtpSender.set(g,y),{localId:g,rtpParameters:l,rtpSender:y}}async stopSending(e){this._assertSendDirection(),h.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(t),t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(i){if(0===this._sendStream.getTracks().length)return void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",i.toString());throw i}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this._assertSendDirection(),t?h.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):h.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};h.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",e,t);const n=e,i=t;this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const s={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const c=o.parse(a.sdp),d=c.media.find(e=>String(e.mid)===i);u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:d}),a={type:"answer",sdp:o.write(c)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:c}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);const p=this._pc.getReceivers().find(e=>e.track&&e.track.id===n);if(!p)throw new Error("new RTCRtpReceiver not");return this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:r,rtpReceiver:p}),{localId:n,track:p.track,rtpReceiver:p}}async stopReceiving(e){this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",e);const{mid:t,rtpParameters:r}=this._mapRecvLocalIdInfo.get(e)||{};this._mapRecvLocalIdInfo.delete(e),this._remoteSdp.planBStopReceiving({mid:t,offerRtpParameters:r});const n={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const i=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this._assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:a,protocol:r};h.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome67=g},1168:function(e,t,r){e.exports=r("ba0c").version},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1468:function(e,t){var r=1e3,n=60*r,i=60*n,s=24*i,o=7*s,a=365.25*s;function c(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var c=parseFloat(t[1]),d=(t[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*s;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function d(e){var t=Math.abs(e);return t>=s?Math.round(e/s)+"d":t>=i?Math.round(e/i)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}function u(e){var t=Math.abs(e);return t>=s?p(e,t,s,"day"):t>=i?p(e,t,i,"hour"):t>=n?p(e,t,n,"minute"):t>=r?p(e,t,r,"second"):e+" ms"}function p(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return c(e);if("number"===r&&isFinite(e))return t.long?u(e):d(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},"14c3":function(e,t,r){var n=r("825a"),i=r("1626"),s=r("c6b6"),o=r("9263");e.exports=function(e,t){var r=e.exec;if(i(r)){var a=r.call(e,t);return null!==a&&n(a),a}if("RegExp"===s(e))return o.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")}},"159b":function(e,t,r){var n=r("da84"),i=r("fdbc"),s=r("785a"),o=r("17c2"),a=r("9112"),c=function(e){if(e&&e.forEach!==o)try{a(e,"forEach",o)}catch(t){e.forEach=o}};for(var d in i)i[d]&&c(n[d]&&n[d].prototype);c(s)},1626:function(e,t){e.exports=function(e){return"function"===typeof e}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,i=r("a640"),s=i("forEach");e.exports=s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"19aa":function(e,t){e.exports=function(e,t,r){if(e instanceof t)return e;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}},"19f7":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSdp=void 0;const o=s(r("93be")),a=r("ee1f"),c=r("47bc"),d=new a.Logger("RemoteSdp");class u{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=t,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=i,this._planB=s,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const e=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[e-1].algorithm,hash:r.fingerprints[e-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}i&&(this._sdpObject.origin.address=i.ip,this._sdpObject.origin.ipVer=i.ipVersion)}updateIceParameters(e){d.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;for(const t of this._mediaSections)t.setIceParameters(e)}updateDtlsRole(e){d.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;for(const t of this._mediaSections)t.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){const t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:i,extmapAllowMixed:s=!1}){const o=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:n,codecOptions:i,extmapAllowMixed:s});t?this._replaceMediaSection(o,t):this._midToIndex.has(o.mid)?this._replaceMediaSection(o):this._addMediaSection(o)}receive({mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:i}){const s=this._midToIndex.get(e);let o;if(void 0!==s&&(o=this._mediaSections[s]),o)o.planBReceive({offerRtpParameters:r,streamId:n,trackId:i}),this._replaceMediaSection(o);else{o=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:i});const s=this._mediaSections.find(e=>e.closed);s?this._replaceMediaSection(o,s.mid):this._addMediaSection(o)}}disableMediaSection(e){const t=this._midToIndex.get(e);if(void 0===t)throw new Error(`no media section found with mid '${e}'`);const r=this._mediaSections[t];r.disable()}closeMediaSection(e){const t=this._midToIndex.get(e);if(void 0===t)throw new Error(`no media section found with mid '${e}'`);const r=this._mediaSections[t];if(e===this._firstMid)return d.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),void this.disableMediaSection(e);r.close(),this._regenerateBundleMids()}planBStopReceiving({mid:e,offerRtpParameters:t}){const r=this._midToIndex.get(e);if(void 0===r)throw new Error(`no media section found with mid '${e}'`);const n=this._mediaSections[r];n.planBStopReceiving({offerRtpParameters:t}),this._replaceMediaSection(n)}sendSctpAssociation({offerMediaObject:e}){const t=new c.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(t)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){const t=new c.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(t)}getSdp(){return this._sdpObject.origin.sessionVersion++,o.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,t){if("string"===typeof t){const r=this._midToIndex.get(t);if(void 0===r)throw new Error(`no media section found for reuseMid '${t}'`);const n=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(n.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{const t=this._midToIndex.get(e.mid);if(void 0===t)throw new Error(`no media section found with mid '${e.mid}'`);this._mediaSections[t]=e,this._sdpObject.media[t]=e.getObject()}}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}t.RemoteSdp=u},"1a1c":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.mangleRtpParameters=t.getCapabilities=void 0;const o=s(r("f31c"));function a(){const e=RTCRtpReceiver.getCapabilities(),t=o.clone(e,{});for(const r of t.codecs){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){const e=r.parameters;e.apt&&(e.apt=Number(e.apt)),e["packetization-mode"]&&(e["packetization-mode"]=Number(e["packetization-mode"]))}for(const e of r.rtcpFeedback||[])e.parameter||(e.parameter="")}return t}function c(e){const t=o.clone(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);for(const r of t.codecs)r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return t}t.getCapabilities=a,t.mangleRtpParameters=c},"1a2d":function(e,t,r){var n=r("7b0b"),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(n(e),t)}},"1b28":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancedEventEmitter=void 0;const n=r("faa1"),i=r("ee1f"),s=new i.Logger("EnhancedEventEmitter");class o extends n.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}safeEmit(e,...t){const r=this.listenerCount(e);try{return this.emit(e,...t)}catch(n){return s.error("safeEmit() | event listener threw an error [event:%s]:%o",e,n),Boolean(r)}}async safeEmitAsPromise(e,...t){return new Promise((r,n)=>{try{this.emit(e,...t,r,n)}catch(i){s.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,i),n(i)}})}}t.EnhancedEventEmitter=o},"1be4":function(e,t,r){var n=r("d066");e.exports=n("document","documentElement")},"1c7e":function(e,t,r){var n=r("b622"),i=n("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!s)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(c){}return r}},"1cdc":function(e,t,r){var n=r("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("d3b7");function n(e,t,r,n,i,s,o){try{var a=e[s](o),c=a.value}catch(d){return void r(d)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,s){var o=e.apply(t,r);function a(e){n(o,i,s,a,c,"next",e)}function c(e){n(o,i,s,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,r){var n=r("d039"),i=r("b622"),s=r("2d00"),o=i("species");e.exports=function(e){return s>=51||!n((function(){var t=[],r=t.constructor={};return r[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2266:function(e,t,r){var n=r("825a"),i=r("e95a"),s=r("07fa"),o=r("0366"),a=r("9a1f"),c=r("35a1"),d=r("2a62"),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var p,l,f,h,m,g,y,v=r&&r.that,b=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_ITERATOR),S=!(!r||!r.INTERRUPTED),w=o(t,v,1+b+S),R=function(e){return p&&d(p,"normal",e),new u(!0,e)},O=function(e){return b?(n(e),S?w(e[0],e[1],R):w(e[0],e[1])):S?w(e,R):w(e)};if(_)p=e;else{if(l=c(e),!l)throw TypeError(String(e)+" is not iterable");if(i(l)){for(f=0,h=s(e);h>f;f++)if(m=O(e[f]),m&&m instanceof u)return m;return new u(!1)}p=a(e,l)}g=p.next;while(!(y=g.call(p)).done){try{m=O(y.value)}catch(x){d(p,"throw",x)}if("object"==typeof m&&m&&m instanceof u)return m}return new u(!1)}},"23cb":function(e,t,r){var n=r("5926"),i=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},"23e7":function(e,t,r){var n=r("da84"),i=r("06cf").f,s=r("9112"),o=r("6eeb"),a=r("ce4e"),c=r("e893"),d=r("94ca");e.exports=function(e,t){var r,u,p,l,f,h,m=e.target,g=e.global,y=e.stat;if(u=g?n:y?n[m]||a(m,{}):(n[m]||{}).prototype,u)for(p in t){if(f=t[p],e.noTargetGet?(h=i(u,p),l=h&&h.value):l=u[p],r=d(g?p:m+(y?".":"#")+p,e.forced),!r&&void 0!==l){if(typeof f===typeof l)continue;c(f,l)}(e.sham||l&&l.sham)&&s(f,"sham",!0),o(u,p,f,e)}}},"241c":function(e,t,r){var n=r("ca84"),i=r("7839"),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},2626:function(e,t,r){"use strict";var n=r("d066"),i=r("9bf2"),s=r("b622"),o=r("83ab"),a=s("species");e.exports=function(e){var t=n(e),r=i.f;o&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},"2a62":function(e,t,r){var n=r("825a"),i=r("dc4a");e.exports=function(e,t,r){var s,o;n(e);try{if(s=i(e,"return"),!s){if("throw"===t)throw r;return r}s=s.call(e)}catch(a){o=!0,s=a}if("throw"===t)throw r;if(o)throw s;return n(s),r}},"2b3d":function(e,t,r){"use strict";r("3ca3");var n,i=r("23e7"),s=r("83ab"),o=r("0d3b"),a=r("da84"),c=r("37e8"),d=r("6eeb"),u=r("19aa"),p=r("1a2d"),l=r("60da"),f=r("4df4"),h=r("6547").codeAt,m=r("5fb2"),g=r("577e"),y=r("d44e"),v=r("9861"),b=r("69f3"),_=a.URL,S=v.URLSearchParams,w=v.getState,R=b.set,O=b.getterFor("URL"),x=Math.floor,k=Math.pow,P="Invalid authority",C="Invalid scheme",j="Invalid host",T="Invalid port",E=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,D=/\d/,I=/^0x/i,M=/^[0-7]+$/,A=/^\d+$/,q=/^[\dA-Fa-f]+$/,F=/[\0\t\n\r #%/:<>?@[\\\]^|]/,N=/[\0\t\n\r #/:<>?@[\\\]^|]/,B=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,z=/[\t\n\r]/g,U=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return j;if(r=G(t.slice(1,-1)),!r)return j;e.host=r}else if(X(e)){if(t=m(t),F.test(t))return j;if(r=W(t),null===r)return j;e.host=r}else{if(N.test(t))return j;for(r="",n=f(t),i=0;i<n.length;i++)r+=Z(n[i],K);e.host=r}},W=function(e){var t,r,n,i,s,o,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),t=c.length,t>4)return e;for(r=[],n=0;n<t;n++){if(i=c[n],""==i)return e;if(s=10,i.length>1&&"0"==i.charAt(0)&&(s=I.test(i)?16:8,i=i.slice(8==s?1:2)),""===i)o=0;else{if(!(10==s?A:8==s?M:q).test(i))return e;o=parseInt(i,s)}r.push(o)}for(n=0;n<t;n++)if(o=r[n],n==t-1){if(o>=k(256,5-t))return null}else if(o>255)return null;for(a=r.pop(),n=0;n<r.length;n++)a+=r[n]*k(256,3-n);return a},G=function(e){var t,r,n,i,s,o,a,c=[0,0,0,0,0,0,0,0],d=0,u=null,p=0,l=function(){return e.charAt(p)};if(":"==l()){if(":"!=e.charAt(1))return;p+=2,d++,u=d}while(l()){if(8==d)return;if(":"!=l()){t=r=0;while(r<4&&q.test(l()))t=16*t+parseInt(l(),16),p++,r++;if("."==l()){if(0==r)return;if(p-=r,d>6)return;n=0;while(l()){if(i=null,n>0){if(!("."==l()&&n<4))return;p++}if(!D.test(l()))return;while(D.test(l())){if(s=parseInt(l(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;p++}c[d]=256*c[d]+i,n++,2!=n&&4!=n||d++}if(4!=n)return;break}if(":"==l()){if(p++,!l())return}else if(l())return;c[d++]=t}else{if(null!==u)return;p++,d++,u=d}}if(null!==u){o=d-u,d=7;while(0!=d&&o>0)a=c[d],c[d--]=c[u+o-1],c[u+--o]=a}else if(8!=d)return;return c},$=function(e){for(var t=null,r=1,n=null,i=0,s=0;s<8;s++)0!==e[s]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=s),++i);return i>r&&(t=n,r=i),t},V=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=$(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},K={},H=l({},K,{" ":1,'"':1,"<":1,">":1,"`":1}),Q=l({},H,{"#":1,"?":1,"{":1,"}":1}),J=l({},Q,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Z=function(e,t){var r=h(e,0);return r>32&&r<127&&!p(t,e)?e:encodeURIComponent(e)},Y={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(e){return p(Y,e.scheme)},ee=function(e){return""!=e.username||""!=e.password},te=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},re=function(e,t){var r;return 2==e.length&&E.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},ne=function(e){var t;return e.length>1&&re(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ie=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&re(t[0],!0)||t.pop()},se=function(e){return"."===e||"%2e"===e.toLowerCase()},oe=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ae={},ce={},de={},ue={},pe={},le={},fe={},he={},me={},ge={},ye={},ve={},be={},_e={},Se={},we={},Re={},Oe={},xe={},ke={},Pe={},Ce=function(e,t,r,i){var s,o,a,c,d=r||ae,u=0,l="",h=!1,m=!1,g=!1;r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(B,"")),t=t.replace(z,""),s=f(t);while(u<=s.length){switch(o=s[u],d){case ae:if(!o||!E.test(o)){if(r)return C;d=de;continue}l+=o.toLowerCase(),d=ce;break;case ce:if(o&&(L.test(o)||"+"==o||"-"==o||"."==o))l+=o.toLowerCase();else{if(":"!=o){if(r)return C;l="",d=de,u=0;continue}if(r&&(X(e)!=p(Y,l)||"file"==l&&(ee(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=l,r)return void(X(e)&&Y[e.scheme]==e.port&&(e.port=null));l="","file"==e.scheme?d=_e:X(e)&&i&&i.scheme==e.scheme?d=ue:X(e)?d=he:"/"==s[u+1]?(d=pe,u++):(e.cannotBeABaseURL=!0,e.path.push(""),d=xe)}break;case de:if(!i||i.cannotBeABaseURL&&"#"!=o)return C;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,d=Pe;break}d="file"==i.scheme?_e:le;continue;case ue:if("/"!=o||"/"!=s[u+1]){d=le;continue}d=me,u++;break;case pe:if("/"==o){d=ge;break}d=Oe;continue;case le:if(e.scheme=i.scheme,o==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&X(e))d=fe;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",d=ke;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),d=Oe;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Pe}break;case fe:if(!X(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,d=Oe;continue}d=ge}else d=me;break;case he:if(d=me,"/"!=o||"/"!=l.charAt(u+1))continue;u++;break;case me:if("/"!=o&&"\\"!=o){d=ge;continue}break;case ge:if("@"==o){h&&(l="%40"+l),h=!0,a=f(l);for(var y=0;y<a.length;y++){var v=a[y];if(":"!=v||g){var b=Z(v,J);g?e.password+=b:e.username+=b}else g=!0}l=""}else if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)){if(h&&""==l)return P;u-=f(l).length+1,l="",d=ye}else l+=o;break;case ye:case ve:if(r&&"file"==e.scheme){d=we;continue}if(":"!=o||m){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)){if(X(e)&&""==l)return j;if(r&&""==l&&(ee(e)||null!==e.port))return;if(c=U(e,l),c)return c;if(l="",d=Re,r)return;continue}"["==o?m=!0:"]"==o&&(m=!1),l+=o}else{if(""==l)return j;if(c=U(e,l),c)return c;if(l="",d=be,r==ve)return}break;case be:if(!D.test(o)){if(o==n||"/"==o||"?"==o||"#"==o||"\\"==o&&X(e)||r){if(""!=l){var _=parseInt(l,10);if(_>65535)return T;e.port=X(e)&&_===Y[e.scheme]?null:_,l=""}if(r)return;d=Re;continue}return T}l+=o;break;case _e:if(e.scheme="file","/"==o||"\\"==o)d=Se;else{if(!i||"file"!=i.scheme){d=Oe;continue}if(o==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",d=ke;else{if("#"!=o){ne(s.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),ie(e)),d=Oe;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",d=Pe}}break;case Se:if("/"==o||"\\"==o){d=we;break}i&&"file"==i.scheme&&!ne(s.slice(u).join(""))&&(re(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),d=Oe;continue;case we:if(o==n||"/"==o||"\\"==o||"?"==o||"#"==o){if(!r&&re(l))d=Oe;else if(""==l){if(e.host="",r)return;d=Re}else{if(c=U(e,l),c)return c;if("localhost"==e.host&&(e.host=""),r)return;l="",d=Re}continue}l+=o;break;case Re:if(X(e)){if(d=Oe,"/"!=o&&"\\"!=o)continue}else if(r||"?"!=o)if(r||"#"!=o){if(o!=n&&(d=Oe,"/"!=o))continue}else e.fragment="",d=Pe;else e.query="",d=ke;break;case Oe:if(o==n||"/"==o||"\\"==o&&X(e)||!r&&("?"==o||"#"==o)){if(oe(l)?(ie(e),"/"==o||"\\"==o&&X(e)||e.path.push("")):se(l)?"/"==o||"\\"==o&&X(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&re(l)&&(e.host&&(e.host=""),l=l.charAt(0)+":"),e.path.push(l)),l="","file"==e.scheme&&(o==n||"?"==o||"#"==o))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==o?(e.query="",d=ke):"#"==o&&(e.fragment="",d=Pe)}else l+=Z(o,Q);break;case xe:"?"==o?(e.query="",d=ke):"#"==o?(e.fragment="",d=Pe):o!=n&&(e.path[0]+=Z(o,K));break;case ke:r||"#"!=o?o!=n&&("'"==o&&X(e)?e.query+="%27":e.query+="#"==o?"%23":Z(o,K)):(e.fragment="",d=Pe);break;case Pe:o!=n&&(e.fragment+=Z(o,H));break}u++}},je=function(e){var t,r,n=u(this,je,"URL"),i=arguments.length>1?arguments[1]:void 0,o=g(e),a=R(n,{type:"URL"});if(void 0!==i)if(i instanceof je)t=O(i);else if(r=Ce(t={},g(i)),r)throw TypeError(r);if(r=Ce(a,o,null,t),r)throw TypeError(r);var c=a.searchParams=new S,d=w(c);d.updateSearchParams(a.query),d.updateURL=function(){a.query=String(c)||null},s||(n.href=Ee.call(n),n.origin=Le.call(n),n.protocol=De.call(n),n.username=Ie.call(n),n.password=Me.call(n),n.host=Ae.call(n),n.hostname=qe.call(n),n.port=Fe.call(n),n.pathname=Ne.call(n),n.search=Be.call(n),n.searchParams=ze.call(n),n.hash=Ue.call(n))},Te=je.prototype,Ee=function(){var e=O(this),t=e.scheme,r=e.username,n=e.password,i=e.host,s=e.port,o=e.path,a=e.query,c=e.fragment,d=t+":";return null!==i?(d+="//",ee(e)&&(d+=r+(n?":"+n:"")+"@"),d+=V(i),null!==s&&(d+=":"+s)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==a&&(d+="?"+a),null!==c&&(d+="#"+c),d},Le=function(){var e=O(this),t=e.scheme,r=e.port;if("blob"==t)try{return new je(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&X(e)?t+"://"+V(e.host)+(null!==r?":"+r:""):"null"},De=function(){return O(this).scheme+":"},Ie=function(){return O(this).username},Me=function(){return O(this).password},Ae=function(){var e=O(this),t=e.host,r=e.port;return null===t?"":null===r?V(t):V(t)+":"+r},qe=function(){var e=O(this).host;return null===e?"":V(e)},Fe=function(){var e=O(this).port;return null===e?"":String(e)},Ne=function(){var e=O(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Be=function(){var e=O(this).query;return e?"?"+e:""},ze=function(){return O(this).searchParams},Ue=function(){var e=O(this).fragment;return e?"#"+e:""},We=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&c(Te,{href:We(Ee,(function(e){var t=O(this),r=g(e),n=Ce(t,r);if(n)throw TypeError(n);w(t.searchParams).updateSearchParams(t.query)})),origin:We(Le),protocol:We(De,(function(e){var t=O(this);Ce(t,g(e)+":",ae)})),username:We(Ie,(function(e){var t=O(this),r=f(g(e));if(!te(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=Z(r[n],J)}})),password:We(Me,(function(e){var t=O(this),r=f(g(e));if(!te(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=Z(r[n],J)}})),host:We(Ae,(function(e){var t=O(this);t.cannotBeABaseURL||Ce(t,g(e),ye)})),hostname:We(qe,(function(e){var t=O(this);t.cannotBeABaseURL||Ce(t,g(e),ve)})),port:We(Fe,(function(e){var t=O(this);te(t)||(e=g(e),""==e?t.port=null:Ce(t,e,be))})),pathname:We(Ne,(function(e){var t=O(this);t.cannotBeABaseURL||(t.path=[],Ce(t,g(e),Re))})),search:We(Be,(function(e){var t=O(this);e=g(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ce(t,e,ke)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:We(ze),hash:We(Ue,(function(e){var t=O(this);e=g(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ce(t,e,Pe)):t.fragment=null}))}),d(Te,"toJSON",(function(){return Ee.call(this)}),{enumerable:!0}),d(Te,"toString",(function(){return Ee.call(this)}),{enumerable:!0}),_){var Ge=_.createObjectURL,$e=_.revokeObjectURL;Ge&&d(je,"createObjectURL",(function(e){return Ge.apply(_,arguments)})),$e&&d(je,"revokeObjectURL",(function(e){return $e.apply(_,arguments)}))}y(je,"URL"),i({global:!0,forced:!o,sham:!s},{URL:je})},"2cf4":function(e,t,r){var n,i,s,o,a=r("da84"),c=r("1626"),d=r("d039"),u=r("0366"),p=r("1be4"),l=r("cc12"),f=r("1cdc"),h=r("605d"),m=a.setImmediate,g=a.clearImmediate,y=a.process,v=a.MessageChannel,b=a.Dispatch,_=0,S={},w="onreadystatechange";try{n=a.location}catch(P){}var R=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},O=function(e){return function(){R(e)}},x=function(e){R(e.data)},k=function(e){a.postMessage(String(e),n.protocol+"//"+n.host)};m&&g||(m=function(e){var t=[],r=arguments.length,n=1;while(r>n)t.push(arguments[n++]);return S[++_]=function(){(c(e)?e:Function(e)).apply(void 0,t)},i(_),_},g=function(e){delete S[e]},h?i=function(e){y.nextTick(O(e))}:b&&b.now?i=function(e){b.now(O(e))}:v&&!f?(s=new v,o=s.port2,s.port1.onmessage=x,i=u(o.postMessage,o,1)):a.addEventListener&&c(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!d(k)?(i=k,a.addEventListener("message",x,!1)):i=w in l("script")?function(e){p.appendChild(l("script"))[w]=function(){p.removeChild(this),R(e)}}:function(e){setTimeout(O(e),0)}),e.exports={set:m,clear:g}},"2d00":function(e,t,r){var n,i,s=r("da84"),o=r("342f"),a=s.process,c=s.Deno,d=a&&a.versions||c&&c.version,u=d&&d.v8;u?(n=u.split("."),i=n[0]<4?1:n[0]+n[1]):o&&(n=o.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/),n&&(i=n[1]))),e.exports=i&&+i},"337f":function(e,t,r){!function(t,r){e.exports=r()}(0,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(i,s),a=0,c=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var a=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),n&&o(t,n),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=c(r(92)),i=c(r(93)),s=c(r(94)),o=c(r(95)),a=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(i[t]=o,s+=1):"object"==typeof o&&(r[t]=o,n+=1)})),n>0){var o=Object.keys(r),c=a.default.find(o,(function(e){return t.isOS(e)}));if(c){var d=this.satisfies(r[c]);if(void 0!==d)return d}var u=a.default.find(o,(function(e){return t.isPlatform(e)}));if(u){var p=this.satisfies(r[u]);if(void 0!==p)return p}}if(s>0){var l=Object.keys(i),f=a.default.find(l,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(i[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})}))},"342f":function(e,t,r){var n=r("d066");e.exports=n("navigator","userAgent")||""},"34eb":function(e,t,r){(function(n){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function s(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)}function o(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}}function a(){let e;try{e=t.storage.getItem("debug")}catch(r){}return!e&&"undefined"!==typeof n&&"env"in n&&(e=Object({NODE_ENV:"production",BASE_URL:""}).DEBUG),e}function c(){try{return localStorage}catch(e){}}t.formatArgs=s,t.save=o,t.load=a,t.useColors=i,t.storage=c(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r("dc90")(t);const{formatters:d}=e.exports;d.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,r("4362"))},"35a1":function(e,t,r){var n=r("f5df"),i=r("dc4a"),s=r("3f8c"),o=r("b622"),a=o("iterator");e.exports=function(e){if(void 0!=e)return i(e,a)||i(e,"@@iterator")||s[n(e)]}},"363f":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=t.detectDevice=void 0;const a=o(r("337f")),c=r("ee1f"),d=r("1b28"),u=r("9c0b"),p=s(r("f31c")),l=s(r("feba")),f=r("525a"),h=r("d0d4"),m=r("5138"),g=r("10be"),y=r("e0d2"),v=r("d859"),b=r("8d94"),_=r("fe97"),S=r("ee6e"),w=r("ee41"),R=new c.Logger("Device");function O(){if("object"===typeof navigator&&"ReactNative"===navigator.product)return"undefined"===typeof RTCPeerConnection?void R.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection"):(R.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative");if("object"!==typeof navigator||"string"!==typeof navigator.userAgent)R.warn("this._detectDevice() | unknown device");else{const e=navigator.userAgent,t=a.default.getParser(e),r=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({safari:">=12.0"})&&"undefined"!==typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(r.name&&"blink"===r.name.toLowerCase()){const t=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(t){const e=Number(t[1]);return e>=74?"Chrome74":e>=70?"Chrome70":e>=67?"Chrome67":"Chrome55"}return"Chrome74"}R.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion())}}t.detectDevice=O;class x{constructor({handlerName:e,handlerFactory:t,Handler:r}={}){if(this._loaded=!1,this._observer=new d.EnhancedEventEmitter,R.debug("constructor()"),r){if(R.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!==typeof r)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");e=r}if(e&&t)throw new TypeError("just one of handlerName or handlerInterface can be given");if(t)this._handlerFactory=t;else{if(e)R.debug("constructor() | handler given: %s",e);else{if(e=O(),!e)throw new u.UnsupportedError("device not supported");R.debug("constructor() | detected handler: %s",e)}switch(e){case"Chrome74":this._handlerFactory=h.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=m.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=g.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=y.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=v.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=b.Safari12.createFactory();break;case"Safari11":this._handlerFactory=_.Safari11.createFactory();break;case"Edge11":this._handlerFactory=S.Edge11.createFactory();break;case"ReactNative":this._handlerFactory=w.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${e}"`)}}const n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new u.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){let t;R.debug("load() [routerRtpCapabilities:%o]",e),e=p.clone(e,void 0);try{if(this._loaded)throw new u.InvalidStateError("already loaded");l.validateRtpCapabilities(e),t=this._handlerFactory();const r=await t.getNativeRtpCapabilities();R.debug("load() | got native RTP capabilities:%o",r),l.validateRtpCapabilities(r),this._extendedRtpCapabilities=l.getExtendedRtpCapabilities(r,e),R.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=l.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=l.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=l.getRecvRtpCapabilities(this._extendedRtpCapabilities),l.validateRtpCapabilities(this._recvRtpCapabilities),R.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await t.getNativeSctpCapabilities(),R.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),l.validateSctpCapabilities(this._sctpCapabilities),R.debug("load() succeeded"),this._loaded=!0,t.close()}catch(r){throw t&&t.close(),r}}canProduce(e){if(!this._loaded)throw new u.InvalidStateError("not loaded");if("audio"!==e&&"video"!==e)throw new TypeError(`invalid kind "${e}"`);return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,appData:d={}}){return R.debug("createSendTransport()"),this._createTransport({direction:"send",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,appData:d})}createRecvTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,appData:d={}}){return R.debug("createRecvTransport()"),this._createTransport({direction:"recv",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,appData:d})}_createTransport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:d,appData:p={}}){if(!this._loaded)throw new u.InvalidStateError("not loaded");if("string"!==typeof t)throw new TypeError("missing id");if("object"!==typeof r)throw new TypeError("missing iceParameters");if(!Array.isArray(n))throw new TypeError("missing iceCandidates");if("object"!==typeof i)throw new TypeError("missing dtlsParameters");if(s&&"object"!==typeof s)throw new TypeError("wrong sctpParameters");if(p&&"object"!==typeof p)throw new TypeError("if given, appData must be an object");const l=new f.Transport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:o,iceTransportPolicy:a,additionalSettings:c,proprietaryConstraints:d,appData:p,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",l),l}}t.Device=x},"37e8":function(e,t,r){var n=r("83ab"),i=r("9bf2"),s=r("825a"),o=r("df75");e.exports=n?Object.defineProperties:function(e,t){s(e);var r,n=o(t),a=n.length,c=0;while(a>c)i.f(e,r=n[c++],t[r]);return e}},"3a4a":function(e,t,r){const n=r("f16e"),{generateRandomNumber:i}=r("ef45"),s=new n("Message");class o{static parse(e){let t;const r={};try{t=JSON.parse(e)}catch(n){return void s.error("parse() | invalid JSON: %s",n)}if("object"===typeof t&&!Array.isArray(t)){if(t.request){if(r.request=!0,"string"!==typeof t.method)return void s.error("parse() | missing/invalid method field");if("number"!==typeof t.id)return void s.error("parse() | missing/invalid id field");r.id=t.id,r.method=t.method,r.data=t.data||{}}else if(t.response){if(r.response=!0,"number"!==typeof t.id)return void s.error("parse() | missing/invalid id field");r.id=t.id,t.ok?(r.ok=!0,r.data=t.data||{}):(r.ok=!1,r.errorCode=t.errorCode,r.errorReason=t.errorReason)}else{if(!t.notification)return void s.error("parse() | missing request/response field");if(r.notification=!0,"string"!==typeof t.method)return void s.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}return r}s.error("parse() | not an object")}static createRequest(e,t){const r={request:!0,id:i(),method:e,data:t||{}};return r}static createSuccessResponse(e,t){const r={response:!0,id:e.id,ok:!0,data:t||{}};return r}static createErrorResponse(e,t,r){const n={response:!0,id:e.id,ok:!1,errorCode:t,errorReason:r};return n}static createNotification(e,t){const r={notification:!0,method:e,data:t||{}};return r}}e.exports=o},"3baa":function(e,t){var r=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){var t=r[e];t.forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},"3bbe":function(e,t,r){var n=r("1626");e.exports=function(e){if("object"===typeof e||n(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},"3ca3":function(e,t,r){"use strict";var n=r("6547").charAt,i=r("577e"),s=r("69f3"),o=r("7dd0"),a="String Iterator",c=s.set,d=s.getterFor(a);o(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=d(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},"428f":function(e,t,r){var n=r("da84");e.exports=n},4362:function(e,t,r){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,n="/";t.cwd=function(){return n},t.chdir=function(t){e||(e=r("df7c")),n=e.resolve(t,n)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,r){var n=r("d039"),i=r("c6b6"),s="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},"44d2":function(e,t,r){var n=r("b622"),i=r("7c73"),s=r("9bf2"),o=n("unscopables"),a=Array.prototype;void 0==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},"44de":function(e,t,r){var n=r("da84");e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},"47bc":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OfferMediaSection=t.AnswerMediaSection=t.MediaSection=void 0;const o=s(r("f31c"));class a{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,e&&this.setIceParameters(e),t){this._mediaObject.candidates=[];for(const e of t){const t={component:1};t.foundation=e.foundation,t.ip=e.ip,t.port=e.port,t.priority=e.priority,t.transport=e.protocol,t.type=e.type,e.tcpType&&(t.tcptype=e.tcpType),this._mediaObject.candidates.push(t)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return 0===this._mediaObject.port}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}disable(){this._mediaObject.direction="inactive",delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids}close(){this._mediaObject.direction="inactive",this._mediaObject.port=0,delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}}t.MediaSection=a;class c extends a{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1,offerMediaObject:a,offerRtpParameters:c,answerRtpParameters:d,codecOptions:p,extmapAllowMixed:l=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:s}),this._mediaObject.mid=String(a.mid),this._mediaObject.type=a.type,this._mediaObject.protocol=a.protocol,i?(this._mediaObject.connection={ip:i.ip,version:i.ipVersion},this._mediaObject.port=i.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),a.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const e of d.codecs){const t={payload:e.payloadType,codec:u(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),this._mediaObject.rtp.push(t);const r=o.clone(e.parameters,{});if(p){const{opusStereo:t,opusFec:n,opusDtx:i,opusMaxPlaybackRate:s,opusMaxAverageBitrate:o,opusPtime:a,videoGoogleStartBitrate:d,videoGoogleMaxBitrate:u,videoGoogleMinBitrate:l}=p,f=c.codecs.find(t=>t.payloadType===e.payloadType);switch(e.mimeType.toLowerCase()){case"audio/opus":void 0!==t&&(f.parameters["sprop-stereo"]=t?1:0,r.stereo=t?1:0),void 0!==n&&(f.parameters.useinbandfec=n?1:0,r.useinbandfec=n?1:0),void 0!==i&&(f.parameters.usedtx=i?1:0,r.usedtx=i?1:0),void 0!==s&&(r.maxplaybackrate=s),void 0!==o&&(r.maxaveragebitrate=o),void 0!==a&&(f.parameters.ptime=a,r.ptime=a);break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==d&&(r["x-google-start-bitrate"]=d),void 0!==u&&(r["x-google-max-bitrate"]=u),void 0!==l&&(r["x-google-min-bitrate"]=l);break}}const n={payload:e.payloadType,config:""};for(const e of Object.keys(r))n.config&&(n.config+=";"),n.config+=`${e}=${r[e]}`;n.config&&this._mediaObject.fmtp.push(n);for(const i of e.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:e.payloadType,type:i.type,subtype:i.parameter})}this._mediaObject.payloads=d.codecs.map(e=>e.payloadType).join(" "),this._mediaObject.ext=[];for(const e of d.headerExtensions){const t=(a.ext||[]).some(t=>t.uri===e.uri);t&&this._mediaObject.ext.push({uri:e.uri,value:e.id})}if(l&&"extmap-allow-mixed"===a.extmapAllowMixed&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),a.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:a.simulcast.list1},this._mediaObject.rids=[];for(const e of a.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}else if(a.simulcast_03){this._mediaObject.simulcast_03={value:a.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const e of a.rids||[])"send"===e.direction&&this._mediaObject.rids.push({id:e.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&"video"===this._mediaObject.type&&(this._mediaObject.xGoogleFlag="conference");break;case"application":"number"===typeof a.sctpPort?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):a.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize});break}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass";break}}}t.AnswerMediaSection=c;class d extends a{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1,mid:o,kind:a,offerRtpParameters:c,streamId:d,trackId:p,oldDataChannelSpec:l=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:s}),this._mediaObject.mid=String(o),this._mediaObject.type=a,i?(this._mediaObject.connection={ip:i.ip,version:i.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=i.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=n?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),a){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${d||"-"} ${p}`);for(const n of c.codecs){const e={payload:n.payloadType,codec:u(n),rate:n.clockRate};n.channels>1&&(e.encoding=n.channels),this._mediaObject.rtp.push(e);const t={payload:n.payloadType,config:""};for(const r of Object.keys(n.parameters))t.config&&(t.config+=";"),t.config+=`${r}=${n.parameters[r]}`;t.config&&this._mediaObject.fmtp.push(t);for(const r of n.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:n.payloadType,type:r.type,subtype:r.parameter})}this._mediaObject.payloads=c.codecs.map(e=>e.payloadType).join(" "),this._mediaObject.ext=[];for(const n of c.headerExtensions)this._mediaObject.ext.push({uri:n.uri,value:n.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const e=c.encodings[0],t=e.ssrc,r=e.rtx&&e.rtx.ssrc?e.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],c.rtcp.cname&&this._mediaObject.ssrcs.push({id:t,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:t,attribute:"msid",value:`${d||"-"} ${p}`}),r&&(c.rtcp.cname&&this._mediaObject.ssrcs.push({id:r,attribute:"cname",value:c.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:r,attribute:"msid",value:`${d||"-"} ${p}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${t} ${r}`}));break}case"application":l?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize);break}}setDtlsRole(e){this._mediaObject.setup="actpass"}planBReceive({offerRtpParameters:e,streamId:t,trackId:r}){const n=e.encodings[0],i=n.ssrc,s=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,o=this._mediaObject.payloads.split(" ");for(const a of e.codecs){if(o.includes(String(a.payloadType)))continue;const e={payload:a.payloadType,codec:u(a),rate:a.clockRate};a.channels>1&&(e.encoding=a.channels),this._mediaObject.rtp.push(e);const t={payload:a.payloadType,config:""};for(const r of Object.keys(a.parameters))t.config&&(t.config+=";"),t.config+=`${r}=${a.parameters[r]}`;t.config&&this._mediaObject.fmtp.push(t);for(const r of a.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:a.payloadType,type:r.type,subtype:r.parameter})}this._mediaObject.payloads+=" "+e.codecs.filter(e=>!this._mediaObject.payloads.includes(e.payloadType)).map(e=>e.payloadType).join(" "),this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:i,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:i,attribute:"msid",value:`${t||"-"} ${r}`}),s&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${t||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${i} ${s}`}))}planBStopReceiving({offerRtpParameters:e}){const t=e.encodings[0],r=t.ssrc,n=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(e=>e.id!==r&&e.id!==n),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(e=>e.ssrcs!==`${r} ${n}`))}}function u(e){const t=new RegExp("^(audio|video)/(.+)","i"),r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");return r[2]}t.OfferMediaSection=d},4840:function(e,t,r){var n=r("825a"),i=r("5087"),s=r("b622"),o=s("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||void 0==(r=n(s)[o])?t:i(r)}},"485a":function(e,t,r){var n=r("1626"),i=r("861d");e.exports=function(e,t){var r,s;if("string"===t&&n(r=e.toString)&&!i(s=r.call(e)))return s;if(n(r=e.valueOf)&&!i(s=r.call(e)))return s;if("string"!==t&&n(r=e.toString)&&!i(s=r.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},4930:function(e,t,r){var n=r("2d00"),i=r("d039");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"4d64":function(e,t,r){var n=r("fc6a"),i=r("23cb"),s=r("07fa"),o=function(e){return function(t,r,o){var a,c=n(t),d=s(c),u=i(o,d);if(e&&r!=r){while(d>u)if(a=c[u++],a!=a)return!0}else for(;d>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},"4de4":function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").filter,s=r("1dde"),o=s("filter");n({target:"Array",proto:!0,forced:!o},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,r){"use strict";var n=r("0366"),i=r("7b0b"),s=r("9bdd"),o=r("e95a"),a=r("68ee"),c=r("07fa"),d=r("8418"),u=r("9a1f"),p=r("35a1");e.exports=function(e){var t=i(e),r=a(this),l=arguments.length,f=l>1?arguments[1]:void 0,h=void 0!==f;h&&(f=n(f,l>2?arguments[2]:void 0,2));var m,g,y,v,b,_,S=p(t),w=0;if(!S||this==Array&&o(S))for(m=c(t),g=r?new this(m):Array(m);m>w;w++)_=h?f(t[w],w):t[w],d(g,w,_);else for(v=u(t,S),b=v.next,g=r?new this:[];!(y=b.call(v)).done;w++)_=h?s(v,f,[y.value,w],!0):y.value,d(g,w,_);return g.length=w,g}},5087:function(e,t,r){var n=r("68ee"),i=r("0d51");e.exports=function(e){if(n(e))return e;throw TypeError(i(e)+" is not a constructor")}},"50c4":function(e,t,r){var n=r("5926"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},5138:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome70=void 0;const o=s(r("93be")),a=r("ee1f"),c=s(r("f31c")),d=s(r("feba")),u=s(r("6303")),p=s(r("887c")),l=r("d73d"),f=r("19f7"),h=r("8040"),m=new a.Logger("Chrome70"),g={OS:1024,MIS:1024};class y extends l.HandlerInterface{constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new y}get name(){return"Chrome70"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=o.parse(r.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:u}){m.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",u),video:d.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",u),video:d.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=d.reduceCodecs(s.codecs,n);const a=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let f,g=await this._pc.createOffer(),y=o.parse(g.sdp);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:y}),t&&t.length>1&&(m.debug("send() | enabling legacy simulcast"),y=o.parse(g.sdp),f=y.media[a.idx],p.addLegacySimulcast({offerMediaObject:f,numStreams:t.length}),g={type:"offer",sdp:o.write(y)});let v=!1;const b=h.parse((t||[{}])[0].scalabilityMode);if(t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===i.codecs[0].mimeType.toLowerCase()&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,y=o.parse(g.sdp),f=y.media[a.idx],p.addLegacySimulcast({offerMediaObject:f,numStreams:b.spatialLayers}),g={type:"offer",sdp:o.write(y)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g),t){m.debug("send() | applying given encodings");const e=l.sender.getParameters();for(let r=0;r<(e.encodings||[]).length;++r){const n=e.encodings[r],i=t[r];if(!i)break;e.encodings[r]=Object.assign(n,i)}await l.sender.setParameters(e)}const _=l.mid;if(i.mid=_,y=o.parse(this._pc.localDescription.sdp),f=y.media[a.idx],i.rtcp.cname=u.getCname({offerMediaObject:f}),i.encodings=p.getRtpEncodings({offerMediaObject:f}),t)for(let o=0;o<i.encodings.length;++o)t[o]&&Object.assign(i.encodings[o],t[o]);if(v&&(i.encodings=[i.encodings[0]]),i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const o of i.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:a.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(_,l),{localId:_,rtpParameters:i,rtpSender:l.sender}}async stopSending(e){this._assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async replaceTrack(e,t){this._assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.sender.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.sender.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),m.debug("receive() [trackId:%s, kind:%s]",e,t);const n=r.mid||String(this._mapMidTransceiver.size);this._remoteSdp.receive({mid:n,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const i={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const a=o.parse(s.sdp),c=a.media.find(e=>String(e.mid)===n);u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:c}),s={type:"answer",sdp:o.write(a)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:a}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);const d=this._pc.getTransceivers().find(e=>e.mid===n);if(!d)throw new Error("new RTCRtpTransceiver not found");return this._mapMidTransceiver.set(n,d),{localId:n,track:d.receiver.track,rtpReceiver:d.receiver}}async stopReceiving(e){this._assertRecvDirection(),m.debug("stopReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(t.mid);const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n),this._mapMidTransceiver.delete(e)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this._assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:a,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome70=y},"51f9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProducer=void 0;const n=r("ee1f"),i=r("1b28"),s=r("9c0b"),o=new n.Logger("DataProducer");class a extends i.EnhancedEventEmitter{constructor({id:e,dataChannel:t,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._dataChannel=t,this._sctpStreamParameters=r,this._appData=n,this._handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(o.debug("send()"),this._closed)throw new s.InvalidStateError("closed");this._dataChannel.send(e)}_handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(o.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):o.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)}),this._dataChannel.addEventListener("close",()=>{this._closed||(o.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||o.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}t.DataProducer=a},"525a":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const o=r("e04a"),a=r("ee1f"),c=r("1b28"),d=r("9c0b"),u=s(r("f31c")),p=s(r("feba")),l=r("0191"),f=r("b19e"),h=r("5258"),m=r("8544"),g=new a.Logger("Transport");class y extends c.EnhancedEventEmitter{constructor({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:p,additionalSettings:l,proprietaryConstraints:f,appData:h,handlerFactory:m,extendedRtpCapabilities:y,canProduceByKind:v}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new o.AwaitQueue({ClosedErrorClass:d.InvalidStateError}),this._observer=new c.EnhancedEventEmitter,g.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=y,this._canProduceByKind=v,this._maxSctpMessageSize=s?s.maxMessageSize:null,l=u.clone(l,{}),delete l.iceServers,delete l.iceTransportPolicy,delete l.bundlePolicy,delete l.rtcpMuxPolicy,delete l.sdpSemantics,this._handler=m(),this._handler.run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:p,additionalSettings:l,proprietaryConstraints:f,extendedRtpCapabilities:y}),this._appData=h,this._handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this._awaitQueue.close(),this._handler.close();for(const e of this._producers.values())e.transportClosed();this._producers.clear();for(const e of this._consumers.values())e.transportClosed();this._consumers.clear();for(const e of this._dataProducers.values())e.transportClosed();this._dataProducers.clear();for(const e of this._dataConsumers.values())e.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new d.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(g.debug("restartIce()"),this._closed)throw new d.InvalidStateError("closed");if(!e)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(g.debug("updateIceServers()"),this._closed)throw new d.InvalidStateError("closed");if(!Array.isArray(e))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:r,codec:n,stopTracks:i=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:o=!1,appData:a={}}={}){if(g.debug("produce() [track:%o]",e),!e)throw new TypeError("missing track");if("send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[e.kind])throw new d.UnsupportedError("cannot produce "+e.kind);if("ended"===e.readyState)throw new d.InvalidStateError("track ended");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("produce"))throw new TypeError('no "produce" listener set into this transport');if(a&&"object"!==typeof a)throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let c;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&0===t.length?c=void 0:t&&(c=t.map(e=>{const t={active:!0};return!1===e.active&&(t.active=!1),"boolean"===typeof e.dtx&&(t.dtx=e.dtx),"string"===typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"===typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"===typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"===typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"===typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"===typeof e.priority&&(t.priority=e.priority),"string"===typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t}));const{localId:d,rtpParameters:u,rtpSender:f}=await this._handler.send({track:e,encodings:c,codecOptions:r,codec:n});try{p.validateRtpParameters(u);const{id:t}=await this.safeEmitAsPromise("produce",{kind:e.kind,rtpParameters:u,appData:a}),r=new l.Producer({id:t,localId:d,rtpSender:f,track:e,rtpParameters:u,stopTracks:i,disableTrackOnPause:s,zeroRtpOnPause:o,appData:a});return this._producers.set(r.id,r),this._handleProducer(r),this._observer.safeEmit("newproducer",r),r}catch(h){throw this._handler.stopSending(d).catch(()=>{}),h}},"transport.produce()").catch(t=>{if(i)try{e.stop()}catch(r){}throw t})}async consume({id:e,producerId:t,kind:r,rtpParameters:n,appData:i={}}){if(g.debug("consume()"),n=u.clone(n,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if("string"!==typeof e)throw new TypeError("missing id");if("string"!==typeof t)throw new TypeError("missing producerId");if("audio"!==r&&"video"!==r)throw new TypeError(`invalid kind '${r}'`);if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(i&&"object"!==typeof i)throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{const s=p.canReceive(n,this._extendedRtpCapabilities);if(!s)throw new d.UnsupportedError("cannot consume this Producer");const{localId:o,rtpReceiver:a,track:c}=await this._handler.receive({trackId:e,kind:r,rtpParameters:n}),u=new f.Consumer({id:e,localId:o,producerId:t,rtpReceiver:a,track:c,rtpParameters:n,appData:i});if(this._consumers.set(u.id,u),this._handleConsumer(u),!this._probatorConsumerCreated&&"video"===r)try{const e=p.generateProbatorRtpParameters(u.rtpParameters);await this._handler.receive({trackId:"probator",kind:"video",rtpParameters:e}),g.debug("consume() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(l){g.error("consume() | failed to create Consumer for RTP probation:%o",l)}return this._observer.safeEmit("newconsumer",u),u},"transport.consume()")}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:r,label:n="",protocol:i="",appData:s={}}={}){if(g.debug("produceData()"),"send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new d.UnsupportedError("SCTP not enabled by remote Transport");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("producedata"))throw new TypeError('no "producedata" listener set into this transport');if(s&&"object"!==typeof s)throw new TypeError("if given, appData must be an object");return(t||r)&&(e=!1),this._awaitQueue.push(async()=>{const{dataChannel:o,sctpStreamParameters:a}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i});p.validateSctpStreamParameters(a);const{id:c}=await this.safeEmitAsPromise("producedata",{sctpStreamParameters:a,label:n,protocol:i,appData:s}),d=new h.DataProducer({id:c,dataChannel:o,sctpStreamParameters:a,appData:s});return this._dataProducers.set(d.id,d),this._handleDataProducer(d),this._observer.safeEmit("newdataproducer",d),d},"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:r,label:n="",protocol:i="",appData:s={}}){if(g.debug("consumeData()"),r=u.clone(r,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new d.UnsupportedError("SCTP not enabled by remote Transport");if("string"!==typeof e)throw new TypeError("missing id");if("string"!==typeof t)throw new TypeError("missing dataProducerId");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw new TypeError('no "connect" listener set into this transport');if(s&&"object"!==typeof s)throw new TypeError("if given, appData must be an object");return p.validateSctpStreamParameters(r),this._awaitQueue.push(async()=>{const{dataChannel:o}=await this._handler.receiveDataChannel({sctpStreamParameters:r,label:n,protocol:i}),a=new m.DataConsumer({id:e,dataProducerId:t,dataChannel:o,sctpStreamParameters:r,appData:s});return this._dataConsumers.set(a.id,a),this._handleDataConsumer(a),this._observer.safeEmit("newdataconsumer",a),a},"transport.consumeData()")}_handleHandler(){const e=this._handler;e.on("@connect",({dtlsParameters:e},t,r)=>{this._closed?r(new d.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:e},t,r)}),e.on("@connectionstatechange",e=>{e!==this._connectionState&&(g.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))})}_handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),this._closed||this._awaitQueue.push(async()=>this._handler.stopSending(e.localId),"producer @close event").catch(e=>g.warn("producer.close() failed:%o",e))}),e.on("@replacetrack",(t,r,n)=>{this._awaitQueue.push(async()=>this._handler.replaceTrack(e.localId,t),"producer @replacetrack event").then(r).catch(n)}),e.on("@setmaxspatiallayer",(t,r,n)=>{this._awaitQueue.push(async()=>this._handler.setMaxSpatialLayer(e.localId,t),"producer @setmaxspatiallayer event").then(r).catch(n)}),e.on("@setrtpencodingparameters",(t,r,n)=>{this._awaitQueue.push(async()=>this._handler.setRtpEncodingParameters(e.localId,t),"producer @setrtpencodingparameters event").then(r).catch(n)}),e.on("@getstats",(t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(t).catch(r)})}_handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._closed||this._awaitQueue.push(async()=>this._handler.stopReceiving(e.localId),"consumer @close event").catch(()=>{})}),e.on("@pause",()=>{this._awaitQueue.push(async()=>this._handler.pauseReceiving(e.localId),"consumer @pause event").catch(()=>{})}),e.on("@resume",()=>{this._awaitQueue.push(async()=>this._handler.resumeReceiving(e.localId),"consumer @resume event").catch(()=>{})}),e.on("@getstats",(t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(r)})}_handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}_handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}}t.Transport=y},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},5692:function(e,t,r){var n=r("c430"),i=r("c6cd");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.2",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,r){var n=r("d066"),i=r("241c"),s=r("7418"),o=r("825a");e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(o(e)),r=s.f;return r?t.concat(r(e)):t}},"577e":function(e,t,r){var n=r("f5df");e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},5926:function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?n:r)(t)}},"59ed":function(e,t,r){var n=r("1626"),i=r("0d51");e.exports=function(e){if(n(e))return e;throw TypeError(i(e)+" is not a function")}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5e77":function(e,t,r){var n=r("83ab"),i=r("1a2d"),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,d=a&&(!n||n&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:d}},"5fb2":function(e,t,r){"use strict";var n=2147483647,i=36,s=1,o=26,a=38,c=700,d=72,u=128,p="-",l=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,h="Overflow: input needs wider integers to process",m=i-s,g=Math.floor,y=String.fromCharCode,v=function(e){var t=[],r=0,n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t},b=function(e){return e+22+75*(e<26)},_=function(e,t,r){var n=0;for(e=r?g(e/c):e>>1,e+=g(e/t);e>m*o>>1;n+=i)e=g(e/m);return g(n+(m+1)*e/(e+a))},S=function(e){var t=[];e=v(e);var r,a,c=e.length,l=u,f=0,m=d;for(r=0;r<e.length;r++)a=e[r],a<128&&t.push(y(a));var S=t.length,w=S;S&&t.push(p);while(w<c){var R=n;for(r=0;r<e.length;r++)a=e[r],a>=l&&a<R&&(R=a);var O=w+1;if(R-l>g((n-f)/O))throw RangeError(h);for(f+=(R-l)*O,l=R,r=0;r<e.length;r++){if(a=e[r],a<l&&++f>n)throw RangeError(h);if(a==l){for(var x=f,k=i;;k+=i){var P=k<=m?s:k>=m+o?o:k-m;if(x<P)break;var C=x-P,j=i-P;t.push(y(b(P+C%j))),x=g(C/j)}t.push(y(b(x))),m=_(f,O,w==S),f=0,++w}}++f,++l}return t.join("")};e.exports=function(e){var t,r,n=[],i=e.toLowerCase().replace(f,".").split(".");for(t=0;t<i.length;t++)r=i[t],n.push(l.test(r)?"xn--"+S(r):r);return n.join(".")}},"605d":function(e,t,r){var n=r("c6b6"),i=r("da84");e.exports="process"==n(i.process)},6069:function(e,t){e.exports="object"==typeof window},"60da":function(e,t,r){"use strict";var n=r("83ab"),i=r("d039"),s=r("df75"),o=r("7418"),a=r("d1e7"),c=r("7b0b"),d=r("44ad"),u=Object.assign,p=Object.defineProperty;e.exports=!u||i((function(){if(n&&1!==u({b:1},u(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||s(u({},t)).join("")!=i}))?function(e,t){var r=c(e),i=arguments.length,u=1,p=o.f,l=a.f;while(i>u){var f,h=d(arguments[u++]),m=p?s(h).concat(p(h)):s(h),g=m.length,y=0;while(g>y)f=m[y++],n&&!l.call(h,f)||(r[f]=h[f])}return r}:u},6303:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCodecParameters=t.getCname=t.extractDtlsParameters=t.extractRtpCapabilities=void 0;const o=s(r("93be"));function a({sdpObject:e}){const t=new Map,r=[];let n=!1,i=!1;for(const a of e.media){const e=a.type;switch(e){case"audio":if(n)continue;n=!0;break;case"video":if(i)continue;i=!0;break;default:continue}for(const r of a.rtp){const n={kind:e,mimeType:`${e}/${r.codec}`,preferredPayloadType:r.payload,clockRate:r.rate,channels:r.encoding,parameters:{},rtcpFeedback:[]};t.set(n.preferredPayloadType,n)}for(const r of a.fmtp||[]){const e=o.parseParams(r.config),n=t.get(r.payload);n&&(e&&e.hasOwnProperty("profile-level-id")&&(e["profile-level-id"]=String(e["profile-level-id"])),n.parameters=e)}for(const r of a.rtcpFb||[]){const e=t.get(r.payload);if(!e)continue;const n={type:r.type,parameter:r.subtype};n.parameter||delete n.parameter,e.rtcpFeedback.push(n)}for(const t of a.ext||[]){if(t["encrypt-uri"])continue;const n={kind:e,uri:t.uri,preferredId:t.value};r.push(n)}}const s={codecs:Array.from(t.values()),headerExtensions:r};return s}function c({sdpObject:e}){const t=(e.media||[]).find(e=>e.iceUfrag&&0!==e.port);if(!t)throw new Error("no active media section found");const r=t.fingerprint||e.fingerprint;let n;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto";break}const i={role:n,fingerprints:[{algorithm:r.type,value:r.hash}]};return i}function d({offerMediaObject:e}){const t=(e.ssrcs||[]).find(e=>"cname"===e.attribute);return t?t.value:""}function u({offerRtpParameters:e,answerMediaObject:t}){for(const r of e.codecs){const e=r.mimeType.toLowerCase();if("audio/opus"!==e)continue;const n=(t.rtp||[]).find(e=>e.payload===r.payloadType);if(!n)continue;t.fmtp=t.fmtp||[];let i=t.fmtp.find(e=>e.payload===r.payloadType);i||(i={payload:r.payloadType,config:""},t.fmtp.push(i));const s=o.parseParams(i.config);switch(e){case"audio/opus":{const e=r.parameters["sprop-stereo"];void 0!==e&&(s.stereo=e?1:0);break}}i.config="";for(const t of Object.keys(s))i.config&&(i.config+=";"),i.config+=`${t}=${s[t]}`}}t.extractRtpCapabilities=a,t.extractDtlsParameters=c,t.getCname=d,t.applyCodecParameters=u},6547:function(e,t,r){var n=r("5926"),i=r("577e"),s=r("1d80"),o=function(e){return function(t,r){var o,a,c=i(s(t)),d=n(r),u=c.length;return d<0||d>=u?e?"":void 0:(o=c.charCodeAt(d),o<55296||o>56319||d+1===u||(a=c.charCodeAt(d+1))<56320||a>57343?e?c.charAt(d):o:e?c.slice(d,d+2):a-56320+(o-55296<<10)+65536)}};e.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(e,t,r){var n=r("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},6787:function(e,t){var r=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},"68ee":function(e,t,r){var n=r("d039"),i=r("1626"),s=r("f5df"),o=r("d066"),a=r("8925"),c=[],d=o("Reflect","construct"),u=/^\s*(?:class|function)\b/,p=u.exec,l=!u.exec((function(){})),f=function(e){if(!i(e))return!1;try{return d(Object,c,e),!0}catch(t){return!1}},h=function(e){if(!i(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return l||!!p.call(u,a(e))};e.exports=!d||n((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?h:f},"69f3":function(e,t,r){var n,i,s,o=r("7f9a"),a=r("da84"),c=r("861d"),d=r("9112"),u=r("1a2d"),p=r("c6cd"),l=r("f772"),f=r("d012"),h="Object already initialized",m=a.WeakMap,g=function(e){return s(e)?i(e):n(e,{})},y=function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(o||p.state){var v=p.state||(p.state=new m),b=v.get,_=v.has,S=v.set;n=function(e,t){if(_.call(v,e))throw new TypeError(h);return t.facade=e,S.call(v,e,t),t},i=function(e){return b.call(v,e)||{}},s=function(e){return _.call(v,e)}}else{var w=l("state");f[w]=!0,n=function(e,t){if(u(e,w))throw new TypeError(h);return t.facade=e,d(e,w,t),t},i=function(e){return u(e,w)?e[w]:{}},s=function(e){return u(e,w)}}e.exports={set:n,get:i,has:s,enforce:g,getterFor:y}},"6b0d":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{for(const[r,n]of t)e[r]=n;return e}},"6dd6":function(e,t,r){var n=r("7322");t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout),n},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"===typeof e[i]&&n.push(i);for(var s=0;s<n.length;s++){var o=n[s],a=e[o];e[o]=function(n){var i=t.operation(r),s=Array.prototype.slice.call(arguments,1),o=s.pop();s.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),o.apply(this,arguments))})),i.attempt((function(){n.apply(e,s)}))}.bind(e,a),e[o].options=r}}},"6eeb":function(e,t,r){var n=r("da84"),i=r("1626"),s=r("1a2d"),o=r("9112"),a=r("ce4e"),c=r("8925"),d=r("69f3"),u=r("5e77").CONFIGURABLE,p=d.get,l=d.enforce,f=String(String).split("String");(e.exports=function(e,t,r,c){var d,p=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:t;i(r)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(r,"name")||u&&r.name!==g)&&o(r,"name",g),d=l(r),d.source||(d.source=f.join("string"==typeof g?g:""))),e!==n?(p?!m&&e[t]&&(h=!0):delete e[t],h?e[t]=r:o(e,t,r)):h?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return i(this)&&p(this).source||c(this)}))},7322:function(e,t){function r(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var n=this,i=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r);return this._options.unref&&i.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(e[s]||0)+1;e[s]=o,o>=r&&(t=i,r=o)}return t}},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,r){var n=r("428f"),i=r("1a2d"),s=r("e538"),o=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,r){var n=r("cc12"),i=n("span").classList,s=i&&i.constructor&&i.constructor.prototype;e.exports=s===Object.prototype?void 0:s},"7a23":function(e,t,r){"use strict";r.d(t,"j",(function(){return Re})),r.d(t,"m",(function(){return n["L"]})),r.d(t,"a",(function(){return Lr})),r.d(t,"c",(function(){return Gr})),r.d(t,"d",(function(){return Wr})),r.d(t,"e",(function(){return Jr})),r.d(t,"f",(function(){return jt})),r.d(t,"g",(function(){return Fr})),r.d(t,"h",(function(){return Qe})),r.d(t,"i",(function(){return He})),r.d(t,"k",(function(){return an})),r.d(t,"l",(function(){return Cr})),r.d(t,"b",(function(){return ps}));var n=r("9ff4");let i;const s=[];class o{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}else 0}on(){this.active&&(s.push(this),i=this)}off(){this.active&&(s.pop(),i=s[s.length-1])}stop(e){if(this.active){if(this.effects.forEach(e=>e.stop()),this.cleanups.forEach(e=>e()),this.scopes&&this.scopes.forEach(e=>e.stop(!0)),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function a(e,t){t=t||i,t&&t.active&&t.effects.push(e)}const c=e=>{const t=new Set(e);return t.w=0,t.n=0,t},d=e=>(e.w&m)>0,u=e=>(e.n&m)>0,p=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=m},l=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];d(i)&&!u(i)?i.delete(e):t[r++]=i,i.w&=~m,i.n&=~m}t.length=r}},f=new WeakMap;let h=0,m=1;const g=30,y=[];let v;const b=Symbol(""),_=Symbol("");class S{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],a(this,r)}run(){if(!this.active)return this.fn();if(!y.includes(this))try{return y.push(v=this),k(),m=1<<++h,h<=g?p(this):w(this),this.fn()}finally{h<=g&&l(this),m=1<<--h,P(),y.pop();const e=y.length;v=e>0?y[e-1]:void 0}}stop(){this.active&&(w(this),this.onStop&&this.onStop(),this.active=!1)}}function w(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let R=!0;const O=[];function x(){O.push(R),R=!1}function k(){O.push(R),R=!0}function P(){const e=O.pop();R=void 0===e||e}function C(e,t,r){if(!j())return;let n=f.get(e);n||f.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=c());const s=void 0;T(i,s)}function j(){return R&&void 0!==v}function T(e,t){let r=!1;h<=g?u(e)||(e.n|=m,r=!d(e)):r=!e.has(v),r&&(e.add(v),v.deps.push(e))}function E(e,t,r,i,s,o){const a=f.get(e);if(!a)return;let d=[];if("clear"===t)d=[...a.values()];else if("length"===r&&Object(n["o"])(e))a.forEach((e,t)=>{("length"===t||t>=i)&&d.push(e)});else switch(void 0!==r&&d.push(a.get(r)),t){case"add":Object(n["o"])(e)?Object(n["s"])(r)&&d.push(a.get("length")):(d.push(a.get(b)),Object(n["t"])(e)&&d.push(a.get(_)));break;case"delete":Object(n["o"])(e)||(d.push(a.get(b)),Object(n["t"])(e)&&d.push(a.get(_)));break;case"set":Object(n["t"])(e)&&d.push(a.get(b));break}if(1===d.length)d[0]&&L(d[0]);else{const e=[];for(const t of d)t&&e.push(...t);L(c(e))}}function L(e,t){for(const r of Object(n["o"])(e)?e:[...e])(r!==v||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const D=Object(n["H"])("__proto__,__v_isRef,__isVue"),I=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(n["E"])),M=B(),A=B(!1,!0),q=B(!0),F=N();function N(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...e){const r=Te(this);for(let t=0,i=this.length;t<i;t++)C(r,"get",t+"");const n=r[t](...e);return-1===n||!1===n?r[t](...e.map(Te)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...e){x();const r=Te(this)[t].apply(this,e);return P(),r}}),e}function B(e=!1,t=!1){return function(r,i,s){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_raw"===i&&s===(e?t?_e:be:t?ve:ye).get(r))return r;const o=Object(n["o"])(r);if(!e&&o&&Object(n["k"])(F,i))return Reflect.get(F,i,s);const a=Reflect.get(r,i,s);if(Object(n["E"])(i)?I.has(i):D(i))return a;if(e||C(r,"get",i),t)return a;if(Ae(a)){const e=!o||!Object(n["s"])(i);return e?a.value:a}return Object(n["v"])(a)?e?xe(a):Re(a):a}}const z=W(),U=W(!0);function W(e=!1){return function(t,r,i,s){let o=t[r];if(!e&&(i=Te(i),o=Te(o),!Object(n["o"])(t)&&Ae(o)&&!Ae(i)))return o.value=i,!0;const a=Object(n["o"])(t)&&Object(n["s"])(r)?Number(r)<t.length:Object(n["k"])(t,r),c=Reflect.set(t,r,i,s);return t===Te(s)&&(a?Object(n["j"])(i,o)&&E(t,"set",r,i,o):E(t,"add",r,i)),c}}function G(e,t){const r=Object(n["k"])(e,t),i=e[t],s=Reflect.deleteProperty(e,t);return s&&r&&E(e,"delete",t,void 0,i),s}function $(e,t){const r=Reflect.has(e,t);return Object(n["E"])(t)&&I.has(t)||C(e,"has",t),r}function V(e){return C(e,"iterate",Object(n["o"])(e)?"length":b),Reflect.ownKeys(e)}const K={get:M,set:z,deleteProperty:G,has:$,ownKeys:V},H={get:q,set(e,t){return!0},deleteProperty(e,t){return!0}},Q=Object(n["h"])({},K,{get:A,set:U}),J=e=>e,Z=e=>Reflect.getPrototypeOf(e);function Y(e,t,r=!1,n=!1){e=e["__v_raw"];const i=Te(e),s=Te(t);t!==s&&!r&&C(i,"get",t),!r&&C(i,"get",s);const{has:o}=Z(i),a=n?J:r?De:Le;return o.call(i,t)?a(e.get(t)):o.call(i,s)?a(e.get(s)):void(e!==i&&e.get(t))}function X(e,t=!1){const r=this["__v_raw"],n=Te(r),i=Te(e);return e!==i&&!t&&C(n,"has",e),!t&&C(n,"has",i),e===i?r.has(e):r.has(e)||r.has(i)}function ee(e,t=!1){return e=e["__v_raw"],!t&&C(Te(e),"iterate",b),Reflect.get(e,"size",e)}function te(e){e=Te(e);const t=Te(this),r=Z(t),n=r.has.call(t,e);return n||(t.add(e),E(t,"add",e,e)),this}function re(e,t){t=Te(t);const r=Te(this),{has:i,get:s}=Z(r);let o=i.call(r,e);o||(e=Te(e),o=i.call(r,e));const a=s.call(r,e);return r.set(e,t),o?Object(n["j"])(t,a)&&E(r,"set",e,t,a):E(r,"add",e,t),this}function ne(e){const t=Te(this),{has:r,get:n}=Z(t);let i=r.call(t,e);i||(e=Te(e),i=r.call(t,e));const s=n?n.call(t,e):void 0,o=t.delete(e);return i&&E(t,"delete",e,void 0,s),o}function ie(){const e=Te(this),t=0!==e.size,r=void 0,n=e.clear();return t&&E(e,"clear",void 0,void 0,r),n}function se(e,t){return function(r,n){const i=this,s=i["__v_raw"],o=Te(s),a=t?J:e?De:Le;return!e&&C(o,"iterate",b),s.forEach((e,t)=>r.call(n,a(e),a(t),i))}}function oe(e,t,r){return function(...i){const s=this["__v_raw"],o=Te(s),a=Object(n["t"])(o),c="entries"===e||e===Symbol.iterator&&a,d="keys"===e&&a,u=s[e](...i),p=r?J:t?De:Le;return!t&&C(o,"iterate",d?_:b),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:c?[p(e[0]),p(e[1])]:p(e),done:t}},[Symbol.iterator](){return this}}}}function ae(e){return function(...t){return"delete"!==e&&this}}function ce(){const e={get(e){return Y(this,e)},get size(){return ee(this)},has:X,add:te,set:re,delete:ne,clear:ie,forEach:se(!1,!1)},t={get(e){return Y(this,e,!1,!0)},get size(){return ee(this)},has:X,add:te,set:re,delete:ne,clear:ie,forEach:se(!1,!0)},r={get(e){return Y(this,e,!0)},get size(){return ee(this,!0)},has(e){return X.call(this,e,!0)},add:ae("add"),set:ae("set"),delete:ae("delete"),clear:ae("clear"),forEach:se(!0,!1)},n={get(e){return Y(this,e,!0,!0)},get size(){return ee(this,!0)},has(e){return X.call(this,e,!0)},add:ae("add"),set:ae("set"),delete:ae("delete"),clear:ae("clear"),forEach:se(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach(i=>{e[i]=oe(i,!1,!1),r[i]=oe(i,!0,!1),t[i]=oe(i,!1,!0),n[i]=oe(i,!0,!0)}),[e,r,t,n]}const[de,ue,pe,le]=ce();function fe(e,t){const r=t?e?le:pe:e?ue:de;return(t,i,s)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get(Object(n["k"])(r,i)&&i in t?r:t,i,s)}const he={get:fe(!1,!1)},me={get:fe(!1,!0)},ge={get:fe(!0,!1)};const ye=new WeakMap,ve=new WeakMap,be=new WeakMap,_e=new WeakMap;function Se(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function we(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Se(Object(n["O"])(e))}function Re(e){return e&&e["__v_isReadonly"]?e:ke(e,!1,K,he,ye)}function Oe(e){return ke(e,!1,Q,me,ve)}function xe(e){return ke(e,!0,H,ge,be)}function ke(e,t,r,i,s){if(!Object(n["v"])(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=s.get(e);if(o)return o;const a=we(e);if(0===a)return e;const c=new Proxy(e,2===a?i:r);return s.set(e,c),c}function Pe(e){return Ce(e)?Pe(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Ce(e){return!(!e||!e["__v_isReadonly"])}function je(e){return Pe(e)||Ce(e)}function Te(e){const t=e&&e["__v_raw"];return t?Te(t):e}function Ee(e){return Object(n["g"])(e,"__v_skip",!0),e}const Le=e=>Object(n["v"])(e)?Re(e):e,De=e=>Object(n["v"])(e)?xe(e):e;function Ie(e){j()&&(e=Te(e),e.dep||(e.dep=c()),T(e.dep))}function Me(e,t){e=Te(e),e.dep&&L(e.dep)}function Ae(e){return Boolean(e&&!0===e.__v_isRef)}function qe(e){return Ae(e)?e.value:e}const Fe={get:(e,t,r)=>qe(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Ae(i)&&!Ae(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Ne(e){return Pe(e)?e:new Proxy(e,Fe)}class Be{constructor(e,t,r){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new S(e,()=>{this._dirty||(this._dirty=!0,Me(this))}),this["__v_isReadonly"]=r}get value(){const e=Te(this);return Ie(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ze(e,t){let r,i;const s=Object(n["p"])(e);s?(r=e,i=n["d"]):(r=e.get,i=e.set);const o=new Be(r,i,s||!i);return o}Promise.resolve();new Set;new Map;function Ue(e,t,...r){const i=e.vnode.props||n["b"];let s=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in i){const e=("modelValue"===a?"model":a)+"Modifiers",{number:t,trim:o}=i[e]||n["b"];o?s=r.map(e=>e.trim()):t&&(s=r.map(n["N"]))}let c;let d=i[c=Object(n["M"])(t)]||i[c=Object(n["M"])(Object(n["e"])(t))];!d&&o&&(d=i[c=Object(n["M"])(Object(n["l"])(t))]),d&&Ln(d,e,6,s);const u=i[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,Ln(u,e,6,s)}}function We(e,t,r=!1){const i=t.emitsCache,s=i.get(e);if(void 0!==s)return s;const o=e.emits;let a={},c=!1;if(!Object(n["p"])(e)){const i=e=>{const r=We(e,t,!0);r&&(c=!0,Object(n["h"])(a,r))};!r&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return o||c?(Object(n["o"])(o)?o.forEach(e=>a[e]=null):Object(n["h"])(a,o),i.set(e,a),a):(i.set(e,null),null)}function Ge(e,t){return!(!e||!Object(n["w"])(t))&&(t=t.slice(2).replace(/Once$/,""),Object(n["k"])(e,t[0].toLowerCase()+t.slice(1))||Object(n["k"])(e,Object(n["l"])(t))||Object(n["k"])(e,t))}let $e=null,Ve=null;function Ke(e){const t=$e;return $e=e,Ve=e&&e.type.__scopeId||null,t}function He(e){Ve=e}function Qe(){Ve=null}function Je(e,t=$e,r){if(!t)return e;if(e._n)return e;const n=(...r)=>{n._d&&zr(-1);const i=Ke(t),s=e(...r);return Ke(i),n._d&&zr(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Ze(e){const{type:t,vnode:r,proxy:i,withProxy:s,props:o,propsOptions:[a],slots:c,attrs:d,emit:u,render:p,renderCache:l,data:f,setupState:h,ctx:m,inheritAttrs:g}=e;let y,v;const b=Ke(e);try{if(4&r.shapeFlag){const e=s||i;y=rn(p.call(e,e,l,o,h,f,m)),v=d}else{const e=t;0,y=rn(e.length>1?e(o,{attrs:d,slots:c,emit:u}):e(o,null)),v=t.props?d:Ye(d)}}catch(S){Ar.length=0,Dn(S,e,1),y=Zr(Ir)}let _=y;if(v&&!1!==g){const e=Object.keys(v),{shapeFlag:t}=_;e.length&&7&t&&(a&&e.some(n["u"])&&(v=Xe(v,a)),_=en(_,v))}return r.dirs&&(_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),y=_,Ke(b),y}const Ye=e=>{let t;for(const r in e)("class"===r||"style"===r||Object(n["w"])(r))&&((t||(t={}))[r]=e[r]);return t},Xe=(e,t)=>{const r={};for(const i in e)Object(n["u"])(i)&&i.slice(9)in t||(r[i]=e[i]);return r};function et(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,d=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(r&&c>=0))return!(!i&&!a||a&&a.$stable)||n!==o&&(n?!o||tt(n,o,d):!!o);if(1024&c)return!0;if(16&c)return n?tt(n,o,d):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t];if(o[r]!==n[r]&&!Ge(d,r))return!0}}return!1}function tt(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!Ge(r,s))return!0}return!1}function rt({vnode:e,parent:t},r){while(t&&t.subTree===e)(e=t.vnode).el=r,t=t.parent}const nt=e=>e.__isSuspense;function it(e,t){t&&t.pendingBranch?Object(n["o"])(e)?t.effects.push(...e):t.effects.push(e):ti(e)}function st(e,t){if(hn){let r=hn.provides;const n=hn.parent&&hn.parent.provides;n===r&&(r=hn.provides=Object.create(n)),r[e]=t}else 0}function ot(e,t,r=!1){const i=hn||$e;if(i){const s=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return r&&Object(n["p"])(t)?t.call(i.proxy):t}else 0}function at(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jt(()=>{e.isMounted=!0}),Lt(()=>{e.isUnmounting=!0}),e}const ct=[Function,Array],dt={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ct,onEnter:ct,onAfterEnter:ct,onEnterCancelled:ct,onBeforeLeave:ct,onLeave:ct,onAfterLeave:ct,onLeaveCancelled:ct,onBeforeAppear:ct,onAppear:ct,onAfterAppear:ct,onAppearCancelled:ct},setup(e,{slots:t}){const r=mn(),n=at();let i;return()=>{const s=t.default&&gt(t.default(),!0);if(!s||!s.length)return;const o=Te(e),{mode:a}=o;const c=s[0];if(n.isLeaving)return ft(c);const d=ht(c);if(!d)return ft(c);const u=lt(d,o,n,r);mt(d,u);const p=r.subTree,l=p&&ht(p);let f=!1;const{getTransitionKey:h}=d.type;if(h){const e=h();void 0===i?i=e:e!==i&&(i=e,f=!0)}if(l&&l.type!==Ir&&(!Vr(d,l)||f)){const e=lt(l,o,n,r);if(mt(l,e),"out-in"===a)return n.isLeaving=!0,e.afterLeave=()=>{n.isLeaving=!1,r.update()},ft(c);"in-out"===a&&d.type!==Ir&&(e.delayLeave=(e,t,r)=>{const i=pt(n,l);i[String(l.key)]=l,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=r})}return c}}},ut=dt;function pt(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function lt(e,t,r,n){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:p,onLeave:l,onAfterLeave:f,onLeaveCancelled:h,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:v}=t,b=String(e.key),_=pt(r,e),S=(e,t)=>{e&&Ln(e,n,9,t)},w={mode:s,persisted:o,beforeEnter(t){let n=a;if(!r.isMounted){if(!i)return;n=m||a}t._leaveCb&&t._leaveCb(!0);const s=_[b];s&&Vr(e,s)&&s.el._leaveCb&&s.el._leaveCb(),S(n,[t])},enter(e){let t=c,n=d,s=u;if(!r.isMounted){if(!i)return;t=g||c,n=y||d,s=v||u}let o=!1;const a=e._enterCb=t=>{o||(o=!0,S(t?s:n,[e]),w.delayedLeave&&w.delayedLeave(),e._enterCb=void 0)};t?(t(e,a),t.length<=1&&a()):a()},leave(t,n){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),r.isUnmounting)return n();S(p,[t]);let s=!1;const o=t._leaveCb=r=>{s||(s=!0,n(),S(r?h:f,[t]),t._leaveCb=void 0,_[i]===e&&delete _[i])};_[i]=e,l?(l(t,o),l.length<=1&&o()):o()},clone(e){return lt(e,t,r,n)}};return w}function ft(e){if(vt(e))return e=en(e),e.children=null,e}function ht(e){return vt(e)?e.children?e.children[0]:void 0:e}function mt(e,t){6&e.shapeFlag&&e.component?mt(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function gt(e,t=!1){let r=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.type===Lr?(128&s.patchFlag&&n++,r=r.concat(gt(s.children,t))):(t||s.type!==Ir)&&r.push(s)}if(n>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}const yt=e=>!!e.type.__asyncLoader;const vt=e=>e.type.__isKeepAlive;RegExp,RegExp;function bt(e,t){return Object(n["o"])(e)?e.some(e=>bt(e,t)):Object(n["D"])(e)?e.split(",").indexOf(t)>-1:!!e.test&&e.test(t)}function _t(e,t){wt(e,"a",t)}function St(e,t){wt(e,"da",t)}function wt(e,t,r=hn){const n=e.__wdc||(e.__wdc=()=>{let t=r;while(t){if(t.isDeactivated)return;t=t.parent}e()});if(kt(t,n,r),r){let e=r.parent;while(e&&e.parent)vt(e.parent.vnode)&&Rt(n,t,r,e),e=e.parent}}function Rt(e,t,r,i){const s=kt(t,e,i,!0);Dt(()=>{Object(n["K"])(i[t],s)},r)}function Ot(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function xt(e){return 128&e.shapeFlag?e.ssContent:e}function kt(e,t,r=hn,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...n)=>{if(r.isUnmounted)return;x(),gn(r);const i=Ln(t,r,e,n);return yn(),P(),i});return n?i.unshift(s):i.push(s),s}}const Pt=e=>(t,r=hn)=>(!Sn||"sp"===e)&&kt(e,t,r),Ct=Pt("bm"),jt=Pt("m"),Tt=Pt("bu"),Et=Pt("u"),Lt=Pt("bum"),Dt=Pt("um"),It=Pt("sp"),Mt=Pt("rtg"),At=Pt("rtc");function qt(e,t=hn){kt("ec",e,t)}let Ft=!0;function Nt(e){const t=Wt(e),r=e.proxy,i=e.ctx;Ft=!1,t.beforeCreate&&zt(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:a,watch:c,provide:d,inject:u,created:p,beforeMount:l,mounted:f,beforeUpdate:h,updated:m,activated:g,deactivated:y,beforeDestroy:v,beforeUnmount:b,destroyed:_,unmounted:S,render:w,renderTracked:R,renderTriggered:O,errorCaptured:x,serverPrefetch:k,expose:P,inheritAttrs:C,components:j,directives:T,filters:E}=t,L=null;if(u&&Bt(u,i,L,e.appContext.config.unwrapInjectedRef),a)for(const I in a){const e=a[I];Object(n["p"])(e)&&(i[I]=e.bind(r))}if(s){0;const t=s.call(r,r);0,Object(n["v"])(t)&&(e.data=Re(t))}if(Ft=!0,o)for(const I in o){const e=o[I],t=Object(n["p"])(e)?e.bind(r,r):Object(n["p"])(e.get)?e.get.bind(r,r):n["d"];0;const s=!Object(n["p"])(e)&&Object(n["p"])(e.set)?e.set.bind(r):n["d"],a=ze({get:t,set:s});Object.defineProperty(i,I,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(const n in c)Ut(c[n],i,r,n);if(d){const e=Object(n["p"])(d)?d.call(r):d;Reflect.ownKeys(e).forEach(t=>{st(t,e[t])})}function D(e,t){Object(n["o"])(t)?t.forEach(t=>e(t.bind(r))):t&&e(t.bind(r))}if(p&&zt(p,e,"c"),D(Ct,l),D(jt,f),D(Tt,h),D(Et,m),D(_t,g),D(St,y),D(qt,x),D(At,R),D(Mt,O),D(Lt,b),D(Dt,S),D(It,k),Object(n["o"])(P))if(P.length){const t=e.exposed||(e.exposed={});P.forEach(e=>{Object.defineProperty(t,e,{get:()=>r[e],set:t=>r[e]=t})})}else e.exposed||(e.exposed={});w&&e.render===n["d"]&&(e.render=w),null!=C&&(e.inheritAttrs=C),j&&(e.components=j),T&&(e.directives=T)}function Bt(e,t,r=n["d"],i=!1){Object(n["o"])(e)&&(e=Ht(e));for(const s in e){const r=e[s];let o;o=Object(n["v"])(r)?"default"in r?ot(r.from||s,r.default,!0):ot(r.from||s):ot(r),Ae(o)&&i?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[s]=o}}function zt(e,t,r){Ln(Object(n["o"])(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,r)}function Ut(e,t,r,i){const s=i.includes(".")?ui(r,i):()=>r[i];if(Object(n["D"])(e)){const r=t[e];Object(n["p"])(r)&&ai(s,r)}else if(Object(n["p"])(e))ai(s,e.bind(r));else if(Object(n["v"])(e))if(Object(n["o"])(e))e.forEach(e=>Ut(e,t,r,i));else{const i=Object(n["p"])(e.handler)?e.handler.bind(r):t[e.handler];Object(n["p"])(i)&&ai(s,i,e)}else 0}function Wt(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:i.length||r||n?(c={},i.length&&i.forEach(e=>Gt(c,e,o,!0)),Gt(c,t,o)):c=t,s.set(t,c),c}function Gt(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&Gt(e,s,r,!0),i&&i.forEach(t=>Gt(e,t,r,!0));for(const o in t)if(n&&"expose"===o);else{const n=$t[o]||r&&r[o];e[o]=n?n(e[o],t[o]):t[o]}return e}const $t={data:Vt,props:Jt,emits:Jt,methods:Jt,computed:Jt,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:Jt,directives:Jt,watch:Zt,provide:Vt,inject:Kt};function Vt(e,t){return t?e?function(){return Object(n["h"])(Object(n["p"])(e)?e.call(this,this):e,Object(n["p"])(t)?t.call(this,this):t)}:t:e}function Kt(e,t){return Jt(Ht(e),Ht(t))}function Ht(e){if(Object(n["o"])(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Qt(e,t){return e?[...new Set([].concat(e,t))]:t}function Jt(e,t){return e?Object(n["h"])(Object(n["h"])(Object.create(null),e),t):t}function Zt(e,t){if(!e)return t;if(!t)return e;const r=Object(n["h"])(Object.create(null),e);for(const n in t)r[n]=Qt(e[n],t[n]);return r}function Yt(e,t,r,i=!1){const s={},o={};Object(n["g"])(o,Kr,1),e.propsDefaults=Object.create(null),er(e,t,s,o);for(const n in e.propsOptions[0])n in s||(s[n]=void 0);r?e.props=i?s:Oe(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function Xt(e,t,r,i){const{props:s,attrs:o,vnode:{patchFlag:a}}=e,c=Te(s),[d]=e.propsOptions;let u=!1;if(!(i||a>0)||16&a){let i;er(e,t,s,o)&&(u=!0);for(const o in c)t&&(Object(n["k"])(t,o)||(i=Object(n["l"])(o))!==o&&Object(n["k"])(t,i))||(d?!r||void 0===r[o]&&void 0===r[i]||(s[o]=tr(d,c,o,void 0,e,!0)):delete s[o]);if(o!==c)for(const e in o)t&&Object(n["k"])(t,e)||(delete o[e],u=!0)}else if(8&a){const r=e.vnode.dynamicProps;for(let i=0;i<r.length;i++){let a=r[i];const p=t[a];if(d)if(Object(n["k"])(o,a))p!==o[a]&&(o[a]=p,u=!0);else{const t=Object(n["e"])(a);s[t]=tr(d,c,t,p,e,!1)}else p!==o[a]&&(o[a]=p,u=!0)}}u&&E(e,"set","$attrs")}function er(e,t,r,i){const[s,o]=e.propsOptions;let a,c=!1;if(t)for(let d in t){if(Object(n["z"])(d))continue;const u=t[d];let p;s&&Object(n["k"])(s,p=Object(n["e"])(d))?o&&o.includes(p)?(a||(a={}))[p]=u:r[p]=u:Ge(e.emitsOptions,d)||u!==i[d]&&(i[d]=u,c=!0)}if(o){const t=Te(r),i=a||n["b"];for(let a=0;a<o.length;a++){const c=o[a];r[c]=tr(s,t,c,i[c],e,!Object(n["k"])(i,c))}}return c}function tr(e,t,r,i,s,o){const a=e[r];if(null!=a){const e=Object(n["k"])(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&Object(n["p"])(e)){const{propsDefaults:n}=s;r in n?i=n[r]:(gn(s),i=n[r]=e.call(null,t),yn())}else i=e}a[0]&&(o&&!e?i=!1:!a[1]||""!==i&&i!==Object(n["l"])(r)||(i=!0))}return i}function rr(e,t,r=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const o=e.props,a={},c=[];let d=!1;if(!Object(n["p"])(e)){const i=e=>{d=!0;const[r,i]=rr(e,t,!0);Object(n["h"])(a,r),i&&c.push(...i)};!r&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!d)return i.set(e,n["a"]),n["a"];if(Object(n["o"])(o))for(let p=0;p<o.length;p++){0;const e=Object(n["e"])(o[p]);nr(e)&&(a[e]=n["b"])}else if(o){0;for(const e in o){const t=Object(n["e"])(e);if(nr(t)){const r=o[e],i=a[t]=Object(n["o"])(r)||Object(n["p"])(r)?{type:r}:r;if(i){const e=or(Boolean,i.type),r=or(String,i.type);i[0]=e>-1,i[1]=r<0||e<r,(e>-1||Object(n["k"])(i,"default"))&&c.push(t)}}}}const u=[a,c];return i.set(e,u),u}function nr(e){return"$"!==e[0]}function ir(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function sr(e,t){return ir(e)===ir(t)}function or(e,t){return Object(n["o"])(t)?t.findIndex(t=>sr(t,e)):Object(n["p"])(t)&&sr(t,e)?0:-1}const ar=e=>"_"===e[0]||"$stable"===e,cr=e=>Object(n["o"])(e)?e.map(rn):[rn(e)],dr=(e,t,r)=>{const n=Je((...e)=>cr(t(...e)),r);return n._c=!1,n},ur=(e,t,r)=>{const i=e._ctx;for(const s in e){if(ar(s))continue;const r=e[s];if(Object(n["p"])(r))t[s]=dr(s,r,i);else if(null!=r){0;const e=cr(r);t[s]=()=>e}}},pr=(e,t)=>{const r=cr(t);e.slots.default=()=>r},lr=(e,t)=>{if(32&e.vnode.shapeFlag){const r=t._;r?(e.slots=Te(t),Object(n["g"])(t,"_",r)):ur(t,e.slots={})}else e.slots={},t&&pr(e,t);Object(n["g"])(e.slots,Kr,1)},fr=(e,t,r)=>{const{vnode:i,slots:s}=e;let o=!0,a=n["b"];if(32&i.shapeFlag){const e=t._;e?r&&1===e?o=!1:(Object(n["h"])(s,t),r||1!==e||delete s._):(o=!t.$stable,ur(t,s)),a=t}else t&&(pr(e,t),a={default:1});if(o)for(const n in s)ar(n)||n in a||delete s[n]};function hr(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[n];c&&(x(),Ln(c,r,8,[e.el,a,e,t]),P())}}function mr(){return{app:null,config:{isNativeTag:n["c"],performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gr=0;function yr(e,t){return function(r,i=null){null==i||Object(n["v"])(i)||(i=null);const s=mr(),o=new Set;let a=!1;const c=s.app={_uid:gr++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:fi,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&Object(n["p"])(e.install)?(o.add(e),e.install(c,...t)):Object(n["p"])(e)&&(o.add(e),e(c,...t))),c},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),c},component(e,t){return t?(s.components[e]=t,c):s.components[e]},directive(e,t){return t?(s.directives[e]=t,c):s.directives[e]},mount(n,o,d){if(!a){const u=Zr(r,i);return u.appContext=s,o&&t?t(u,n):e(u,n,d),a=!0,c._container=n,n.__vue_app__=c,Cn(u.component)||u.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return s.provides[e]=t,c}};return c}}function vr(){}const br=it;function _r(e){return Sr(e)}function Sr(e,t){vr();const r=Object(n["i"])();r.__VUE__=!0;const{insert:i,remove:s,patchProp:o,createElement:a,createText:c,createComment:d,setText:u,setElementText:p,parentNode:l,nextSibling:f,setScopeId:h=n["d"],cloneNode:m,insertStaticContent:g}=e,y=(e,t,r,n=null,i=null,s=null,o=!1,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Vr(e,t)&&(n=H(e),W(e,i,s,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:d,ref:u,shapeFlag:p}=t;switch(d){case Dr:v(e,t,r,n);break;case Ir:b(e,t,r,n);break;case Mr:null==e&&_(t,r,n,o);break;case Lr:D(e,t,r,n,i,s,o,a,c);break;default:1&p?O(e,t,r,n,i,s,o,a,c):6&p?I(e,t,r,n,i,s,o,a,c):(64&p||128&p)&&d.process(e,t,r,n,i,s,o,a,c,J)}null!=u&&i&&wr(u,e&&e.ref,s,t||e,!t)},v=(e,t,r,n)=>{if(null==e)i(t.el=c(t.children),r,n);else{const r=t.el=e.el;t.children!==e.children&&u(r,t.children)}},b=(e,t,r,n)=>{null==e?i(t.el=d(t.children||""),r,n):t.el=e.el},_=(e,t,r,n)=>{[e.el,e.anchor]=g(e.children,t,r,n)},w=({el:e,anchor:t},r,n)=>{let s;while(e&&e!==t)s=f(e),i(e,r,n),e=s;i(t,r,n)},R=({el:e,anchor:t})=>{let r;while(e&&e!==t)r=f(e),s(e),e=r;s(t)},O=(e,t,r,n,i,s,o,a,c)=>{o=o||"svg"===t.type,null==e?k(t,r,n,i,s,o,a,c):T(e,t,i,s,o,a,c)},k=(e,t,r,s,c,d,u,l)=>{let f,h;const{type:g,props:y,shapeFlag:v,transition:b,patchFlag:_,dirs:S}=e;if(e.el&&void 0!==m&&-1===_)f=e.el=m(e.el);else{if(f=e.el=a(e.type,d,y&&y.is,y),8&v?p(f,e.children):16&v&&j(e.children,f,null,s,c,d&&"foreignObject"!==g,u,l),S&&hr(e,null,s,"created"),y){for(const t in y)"value"===t||Object(n["z"])(t)||o(f,t,null,y[t],d,e.children,s,c,K);"value"in y&&o(f,"value",null,y.value),(h=y.onVnodeBeforeMount)&&Rr(h,s,e)}C(f,e,e.scopeId,u,s)}S&&hr(e,null,s,"beforeMount");const w=(!c||c&&!c.pendingBranch)&&b&&!b.persisted;w&&b.beforeEnter(f),i(f,t,r),((h=y&&y.onVnodeMounted)||w||S)&&br(()=>{h&&Rr(h,s,e),w&&b.enter(f),S&&hr(e,null,s,"mounted")},c)},C=(e,t,r,n,i)=>{if(r&&h(e,r),n)for(let s=0;s<n.length;s++)h(e,n[s]);if(i){let r=i.subTree;if(t===r){const t=i.vnode;C(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},j=(e,t,r,n,i,s,o,a,c=0)=>{for(let d=c;d<e.length;d++){const c=e[d]=a?nn(e[d]):rn(e[d]);y(null,c,t,r,n,i,s,o,a)}},T=(e,t,r,i,s,a,c)=>{const d=t.el=e.el;let{patchFlag:u,dynamicChildren:l,dirs:f}=t;u|=16&e.patchFlag;const h=e.props||n["b"],m=t.props||n["b"];let g;(g=m.onVnodeBeforeUpdate)&&Rr(g,r,t,e),f&&hr(t,e,r,"beforeUpdate");const y=s&&"foreignObject"!==t.type;if(l?E(e.dynamicChildren,l,d,r,i,y,a):c||N(e,t,d,null,r,i,y,a,!1),u>0){if(16&u)L(d,t,h,m,r,i,s);else if(2&u&&h.class!==m.class&&o(d,"class",null,m.class,s),4&u&&o(d,"style",h.style,m.style,s),8&u){const n=t.dynamicProps;for(let t=0;t<n.length;t++){const a=n[t],c=h[a],u=m[a];u===c&&"value"!==a||o(d,a,c,u,s,e.children,r,i,K)}}1&u&&e.children!==t.children&&p(d,t.children)}else c||null!=l||L(d,t,h,m,r,i,s);((g=m.onVnodeUpdated)||f)&&br(()=>{g&&Rr(g,r,t,e),f&&hr(t,e,r,"updated")},i)},E=(e,t,r,n,i,s,o)=>{for(let a=0;a<t.length;a++){const c=e[a],d=t[a],u=c.el&&(c.type===Lr||!Vr(c,d)||70&c.shapeFlag)?l(c.el):r;y(c,d,u,null,n,i,s,o,!0)}},L=(e,t,r,i,s,a,c)=>{if(r!==i){for(const d in i){if(Object(n["z"])(d))continue;const u=i[d],p=r[d];u!==p&&"value"!==d&&o(e,d,p,u,c,t.children,s,a,K)}if(r!==n["b"])for(const d in r)Object(n["z"])(d)||d in i||o(e,d,r[d],null,c,t.children,s,a,K);"value"in i&&o(e,"value",r.value,i.value)}},D=(e,t,r,n,s,o,a,d,u)=>{const p=t.el=e?e.el:c(""),l=t.anchor=e?e.anchor:c("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:m}=t;m&&(d=d?d.concat(m):m),null==e?(i(p,r,n),i(l,r,n),j(t.children,r,l,s,o,a,d,u)):f>0&&64&f&&h&&e.dynamicChildren?(E(e.dynamicChildren,h,r,s,o,a,d),(null!=t.key||s&&t===s.subTree)&&Or(e,t,!0)):N(e,t,r,l,s,o,a,d,u)},I=(e,t,r,n,i,s,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,r,n,o,c):M(t,r,n,i,s,o,c):A(e,t,c)},M=(e,t,r,n,i,s,o)=>{const a=e.component=fn(e,n,i);if(vt(e)&&(a.ctx.renderer=J),wn(a),a.asyncDep){if(i&&i.registerDep(a,q),!e.el){const e=a.subTree=Zr(Ir);b(null,e,t,r)}}else q(a,e,t,r,i,s,o)},A=(e,t,r)=>{const n=t.component=e.component;if(et(e,t,r)){if(n.asyncDep&&!n.asyncResolved)return void F(n,t,r);n.next=t,Yn(n.update),n.update()}else t.component=e.component,t.el=e.el,n.vnode=t},q=(e,t,r,i,s,o,a)=>{const c=()=>{if(e.isMounted){let t,{next:r,bu:i,u:c,parent:u,vnode:p}=e,f=r;0,d.allowRecurse=!1,r?(r.el=p.el,F(e,r,a)):r=p,i&&Object(n["n"])(i),(t=r.props&&r.props.onVnodeBeforeUpdate)&&Rr(t,u,r,p),d.allowRecurse=!0;const h=Ze(e);0;const m=e.subTree;e.subTree=h,y(m,h,l(m.el),H(m),e,s,o),r.el=h.el,null===f&&rt(e,h.el),c&&br(c,s),(t=r.props&&r.props.onVnodeUpdated)&&br(()=>Rr(t,u,r,p),s)}else{let a;const{el:c,props:u}=t,{bm:p,m:l,parent:f}=e,h=yt(t);if(d.allowRecurse=!1,p&&Object(n["n"])(p),!h&&(a=u&&u.onVnodeBeforeMount)&&Rr(a,f,t),d.allowRecurse=!0,c&&Y){const r=()=>{e.subTree=Ze(e),Y(c,e.subTree,e,s,null)};h?t.type.__asyncLoader().then(()=>!e.isUnmounted&&r()):r()}else{0;const n=e.subTree=Ze(e);0,y(null,n,r,i,e,s,o),t.el=n.el}if(l&&br(l,s),!h&&(a=u&&u.onVnodeMounted)){const e=t;br(()=>Rr(a,f,e),s)}256&t.shapeFlag&&e.a&&br(e.a,s),e.isMounted=!0,t=r=i=null}},d=new S(c,()=>Jn(e.update),e.scope),u=e.update=d.run.bind(d);u.id=e.uid,d.allowRecurse=u.allowRecurse=!0,u()},F=(e,t,r)=>{t.component=e;const n=e.vnode.props;e.vnode=t,e.next=null,Xt(e,t.props,n,r),fr(e,t.children,r),x(),ri(void 0,e.update),P()},N=(e,t,r,n,i,s,o,a,c=!1)=>{const d=e&&e.children,u=e?e.shapeFlag:0,l=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void z(d,l,r,n,i,s,o,a,c);if(256&f)return void B(d,l,r,n,i,s,o,a,c)}8&h?(16&u&&K(d,i,s),l!==d&&p(r,l)):16&u?16&h?z(d,l,r,n,i,s,o,a,c):K(d,i,s,!0):(8&u&&p(r,""),16&h&&j(l,r,n,i,s,o,a,c))},B=(e,t,r,i,s,o,a,c,d)=>{e=e||n["a"],t=t||n["a"];const u=e.length,p=t.length,l=Math.min(u,p);let f;for(f=0;f<l;f++){const n=t[f]=d?nn(t[f]):rn(t[f]);y(e[f],n,r,null,s,o,a,c,d)}u>p?K(e,s,o,!0,!1,l):j(t,r,i,s,o,a,c,d,l)},z=(e,t,r,i,s,o,a,c,d)=>{let u=0;const p=t.length;let l=e.length-1,f=p-1;while(u<=l&&u<=f){const n=e[u],i=t[u]=d?nn(t[u]):rn(t[u]);if(!Vr(n,i))break;y(n,i,r,null,s,o,a,c,d),u++}while(u<=l&&u<=f){const n=e[l],i=t[f]=d?nn(t[f]):rn(t[f]);if(!Vr(n,i))break;y(n,i,r,null,s,o,a,c,d),l--,f--}if(u>l){if(u<=f){const e=f+1,n=e<p?t[e].el:i;while(u<=f)y(null,t[u]=d?nn(t[u]):rn(t[u]),r,n,s,o,a,c,d),u++}}else if(u>f)while(u<=l)W(e[u],s,o,!0),u++;else{const h=u,m=u,g=new Map;for(u=m;u<=f;u++){const e=t[u]=d?nn(t[u]):rn(t[u]);null!=e.key&&g.set(e.key,u)}let v,b=0;const _=f-m+1;let S=!1,w=0;const R=new Array(_);for(u=0;u<_;u++)R[u]=0;for(u=h;u<=l;u++){const n=e[u];if(b>=_){W(n,s,o,!0);continue}let i;if(null!=n.key)i=g.get(n.key);else for(v=m;v<=f;v++)if(0===R[v-m]&&Vr(n,t[v])){i=v;break}void 0===i?W(n,s,o,!0):(R[i-m]=u+1,i>=w?w=i:S=!0,y(n,t[i],r,null,s,o,a,c,d),b++)}const O=S?xr(R):n["a"];for(v=O.length-1,u=_-1;u>=0;u--){const e=m+u,n=t[e],l=e+1<p?t[e+1].el:i;0===R[u]?y(null,n,r,l,s,o,a,c,d):S&&(v<0||u!==O[v]?U(n,r,l,2):v--)}}},U=(e,t,r,n,s=null)=>{const{el:o,type:a,transition:c,children:d,shapeFlag:u}=e;if(6&u)return void U(e.component.subTree,t,r,n);if(128&u)return void e.suspense.move(t,r,n);if(64&u)return void a.move(e,t,r,J);if(a===Lr){i(o,t,r);for(let e=0;e<d.length;e++)U(d[e],t,r,n);return void i(e.anchor,t,r)}if(a===Mr)return void w(e,t,r);const p=2!==n&&1&u&&c;if(p)if(0===n)c.beforeEnter(o),i(o,t,r),br(()=>c.enter(o),s);else{const{leave:e,delayLeave:n,afterLeave:s}=c,a=()=>i(o,t,r),d=()=>{e(o,()=>{a(),s&&s()})};n?n(o,a,d):d()}else i(o,t,r)},W=(e,t,r,n=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:d,shapeFlag:u,patchFlag:p,dirs:l}=e;if(null!=a&&wr(a,null,r,e,!0),256&u)return void t.ctx.deactivate(e);const f=1&u&&l,h=!yt(e);let m;if(h&&(m=o&&o.onVnodeBeforeUnmount)&&Rr(m,t,e),6&u)V(e.component,r,n);else{if(128&u)return void e.suspense.unmount(r,n);f&&hr(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,r,i,J,n):d&&(s!==Lr||p>0&&64&p)?K(d,t,r,!1,!0):(s===Lr&&384&p||!i&&16&u)&&K(c,t,r),n&&G(e)}(h&&(m=o&&o.onVnodeUnmounted)||f)&&br(()=>{m&&Rr(m,t,e),f&&hr(e,null,t,"unmounted")},r)},G=e=>{const{type:t,el:r,anchor:n,transition:i}=e;if(t===Lr)return void $(r,n);if(t===Mr)return void R(e);const o=()=>{s(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:n}=i,s=()=>t(r,o);n?n(e.el,o,s):s()}else o()},$=(e,t)=>{let r;while(e!==t)r=f(e),s(e),e=r;s(t)},V=(e,t,r)=>{const{bum:i,scope:s,update:o,subTree:a,um:c}=e;i&&Object(n["n"])(i),s.stop(),o&&(o.active=!1,W(a,e,t,r)),c&&br(c,t),br(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},K=(e,t,r,n=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)W(e[o],t,r,n,i)},H=e=>6&e.shapeFlag?H(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),Q=(e,t,r)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,r),ni(),t._vnode=e},J={p:y,um:W,m:U,r:G,mt:M,mc:j,pc:N,pbc:E,n:H,o:e};let Z,Y;return t&&([Z,Y]=t(J)),{render:Q,hydrate:Z,createApp:yr(Q,Z)}}function wr(e,t,r,i,s=!1){if(Object(n["o"])(e))return void e.forEach((e,o)=>wr(e,t&&(Object(n["o"])(t)?t[o]:t),r,i,s));if(yt(i)&&!s)return;const o=4&i.shapeFlag?Cn(i.component)||i.component.proxy:i.el,a=s?null:o,{i:c,r:d}=e;const u=t&&t.r,p=c.refs===n["b"]?c.refs={}:c.refs,l=c.setupState;if(null!=u&&u!==d&&(Object(n["D"])(u)?(p[u]=null,Object(n["k"])(l,u)&&(l[u]=null)):Ae(u)&&(u.value=null)),Object(n["D"])(d)){const e=()=>{p[d]=a,Object(n["k"])(l,d)&&(l[d]=a)};a?(e.id=-1,br(e,r)):e()}else if(Ae(d)){const e=()=>{d.value=a};a?(e.id=-1,br(e,r)):e()}else Object(n["p"])(d)&&En(d,c,12,[a,p])}function Rr(e,t,r,n=null){Ln(e,t,7,[r,n])}function Or(e,t,r=!1){const i=e.children,s=t.children;if(Object(n["o"])(i)&&Object(n["o"])(s))for(let n=0;n<i.length;n++){const e=i[n];let t=s[n];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[n]=nn(s[n]),t.el=e.el),r||Or(e,t))}}function xr(e){const t=e.slice(),r=[0];let n,i,s,o,a;const c=e.length;for(n=0;n<c;n++){const c=e[n];if(0!==c){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}s=0,o=r.length-1;while(s<o)a=s+o>>1,e[r[a]]<c?s=a+1:o=a;c<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}s=r.length,o=r[s-1];while(s-- >0)r[s]=o,o=t[o];return r}const kr=e=>e.__isTeleport;const Pr="components";function Cr(e,t){return Tr(Pr,e,!0,t)||e}const jr=Symbol();function Tr(e,t,r=!0,i=!1){const s=$e||hn;if(s){const r=s.type;if(e===Pr){const e=jn(r);if(e&&(e===t||e===Object(n["e"])(t)||e===Object(n["f"])(Object(n["e"])(t))))return r}const o=Er(s[e]||r[e],t)||Er(s.appContext[e],t);return!o&&i?r:o}}function Er(e,t){return e&&(e[t]||e[Object(n["e"])(t)]||e[Object(n["f"])(Object(n["e"])(t))])}const Lr=Symbol(void 0),Dr=Symbol(void 0),Ir=Symbol(void 0),Mr=Symbol(void 0),Ar=[];let qr=null;function Fr(e=!1){Ar.push(qr=e?null:[])}function Nr(){Ar.pop(),qr=Ar[Ar.length-1]||null}let Br=1;function zr(e){Br+=e}function Ur(e){return e.dynamicChildren=Br>0?qr||n["a"]:null,Nr(),Br>0&&qr&&qr.push(e),e}function Wr(e,t,r,n,i,s){return Ur(Jr(e,t,r,n,i,s,!0))}function Gr(e,t,r,n,i){return Ur(Zr(e,t,r,n,i,!0))}function $r(e){return!!e&&!0===e.__v_isVNode}function Vr(e,t){return e.type===t.type&&e.key===t.key}const Kr="__vInternal",Hr=({key:e})=>null!=e?e:null,Qr=({ref:e})=>null!=e?Object(n["D"])(e)||Ae(e)||Object(n["p"])(e)?{i:$e,r:e}:e:null;function Jr(e,t=null,r=null,i=0,s=null,o=(e===Lr?0:1),a=!1,c=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hr(t),ref:t&&Qr(t),scopeId:Ve,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(sn(d,r),128&o&&e.normalize(d)):r&&(d.shapeFlag|=Object(n["D"])(r)?8:16),Br>0&&!a&&qr&&(d.patchFlag>0||6&o)&&32!==d.patchFlag&&qr.push(d),d}const Zr=Yr;function Yr(e,t=null,r=null,i=0,s=null,o=!1){if(e&&e!==jr||(e=Ir),$r(e)){const n=en(e,t,!0);return r&&sn(n,r),n}if(Tn(e)&&(e=e.__vccOpts),t){t=Xr(t);let{class:e,style:r}=t;e&&!Object(n["D"])(e)&&(t.class=Object(n["I"])(e)),Object(n["v"])(r)&&(je(r)&&!Object(n["o"])(r)&&(r=Object(n["h"])({},r)),t.style=Object(n["J"])(r))}const a=Object(n["D"])(e)?1:nt(e)?128:kr(e)?64:Object(n["v"])(e)?4:Object(n["p"])(e)?2:0;return Jr(e,t,r,i,s,a,o,!0)}function Xr(e){return e?je(e)||Kr in e?Object(n["h"])({},e):e:null}function en(e,t,r=!1){const{props:i,ref:s,patchFlag:o,children:a}=e,c=t?on(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Hr(c),ref:t&&t.ref?r&&s?Object(n["o"])(s)?s.concat(Qr(t)):[s,Qr(t)]:Qr(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Lr?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&en(e.ssContent),ssFallback:e.ssFallback&&en(e.ssFallback),el:e.el,anchor:e.anchor};return d}function tn(e=" ",t=0){return Zr(Dr,null,e,t)}function rn(e){return null==e||"boolean"===typeof e?Zr(Ir):Object(n["o"])(e)?Zr(Lr,null,e.slice()):"object"===typeof e?nn(e):Zr(Dr,null,String(e))}function nn(e){return null===e.el||e.memo?e:en(e)}function sn(e,t){let r=0;const{shapeFlag:i}=e;if(null==t)t=null;else if(Object(n["o"])(t))r=16;else if("object"===typeof t){if(65&i){const r=t.default;return void(r&&(r._c&&(r._d=!1),sn(e,r()),r._c&&(r._d=!0)))}{r=32;const n=t._;n||Kr in t?3===n&&$e&&(1===$e.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=$e}}else Object(n["p"])(t)?(t={default:t,_ctx:$e},r=32):(t=String(t),64&i?(r=16,t=[tn(t)]):r=8);e.children=t,e.shapeFlag|=r}function on(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=Object(n["I"])([t.class,i.class]));else if("style"===e)t.style=Object(n["J"])([t.style,i.style]);else if(Object(n["w"])(e)){const r=t[e],n=i[e];r!==n&&(t[e]=r?[].concat(r,n):n)}else""!==e&&(t[e]=i[e])}return t}function an(e,t,r,i){let s;const o=r&&r[i];if(Object(n["o"])(e)||Object(n["D"])(e)){s=new Array(e.length);for(let r=0,n=e.length;r<n;r++)s[r]=t(e[r],r,void 0,o&&o[r])}else if("number"===typeof e){0,s=new Array(e);for(let r=0;r<e;r++)s[r]=t(r+1,r,void 0,o&&o[r])}else if(Object(n["v"])(e))if(e[Symbol.iterator])s=Array.from(e,(e,r)=>t(e,r,void 0,o&&o[r]));else{const r=Object.keys(e);s=new Array(r.length);for(let n=0,i=r.length;n<i;n++){const i=r[n];s[n]=t(e[i],i,n,o&&o[n])}}else s=[];return r&&(r[i]=s),s}const cn=e=>e?vn(e)?Cn(e)||e.proxy:cn(e.parent):null,dn=Object(n["h"])(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>cn(e.parent),$root:e=>cn(e.root),$emit:e=>e.emit,$options:e=>Wt(e),$forceUpdate:e=>()=>Jn(e.update),$nextTick:e=>Hn.bind(e.proxy),$watch:e=>di.bind(e)}),un={get({_:e},t){const{ctx:r,setupState:i,data:s,props:o,accessCache:a,type:c,appContext:d}=e;let u;if("$"!==t[0]){const c=a[t];if(void 0!==c)switch(c){case 0:return i[t];case 1:return s[t];case 3:return r[t];case 2:return o[t]}else{if(i!==n["b"]&&Object(n["k"])(i,t))return a[t]=0,i[t];if(s!==n["b"]&&Object(n["k"])(s,t))return a[t]=1,s[t];if((u=e.propsOptions[0])&&Object(n["k"])(u,t))return a[t]=2,o[t];if(r!==n["b"]&&Object(n["k"])(r,t))return a[t]=3,r[t];Ft&&(a[t]=4)}}const p=dn[t];let l,f;return p?("$attrs"===t&&C(e,"get",t),p(e)):(l=c.__cssModules)&&(l=l[t])?l:r!==n["b"]&&Object(n["k"])(r,t)?(a[t]=3,r[t]):(f=d.config.globalProperties,Object(n["k"])(f,t)?f[t]:void 0)},set({_:e},t,r){const{data:i,setupState:s,ctx:o}=e;if(s!==n["b"]&&Object(n["k"])(s,t))s[t]=r;else if(i!==n["b"]&&Object(n["k"])(i,t))i[t]=r;else if(Object(n["k"])(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:s,propsOptions:o}},a){let c;return void 0!==r[a]||e!==n["b"]&&Object(n["k"])(e,a)||t!==n["b"]&&Object(n["k"])(t,a)||(c=o[0])&&Object(n["k"])(c,a)||Object(n["k"])(i,a)||Object(n["k"])(dn,a)||Object(n["k"])(s.config.globalProperties,a)}};const pn=mr();let ln=0;function fn(e,t,r){const i=e.type,s=(t?t.appContext:e.appContext)||pn,a={uid:ln++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,update:null,scope:new o(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:rr(i,s),emitsOptions:We(i,s),emit:null,emitted:null,propsDefaults:n["b"],inheritAttrs:i.inheritAttrs,ctx:n["b"],data:n["b"],props:n["b"],attrs:n["b"],slots:n["b"],refs:n["b"],setupState:n["b"],setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Ue.bind(null,a),e.ce&&e.ce(a),a}let hn=null;const mn=()=>hn||$e,gn=e=>{hn=e,e.scope.on()},yn=()=>{hn&&hn.scope.off(),hn=null};function vn(e){return 4&e.vnode.shapeFlag}let bn,_n,Sn=!1;function wn(e,t=!1){Sn=t;const{props:r,children:n}=e.vnode,i=vn(e);Yt(e,r,i,t),lr(e,n);const s=i?Rn(e,t):void 0;return Sn=!1,s}function Rn(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ee(new Proxy(e.ctx,un));const{setup:i}=r;if(i){const r=e.setupContext=i.length>1?Pn(e):null;gn(e),x();const s=En(i,e,0,[e.props,r]);if(P(),yn(),Object(n["y"])(s)){if(s.then(yn,yn),t)return s.then(r=>{On(e,r,t)}).catch(t=>{Dn(t,e,0)});e.asyncDep=s}else On(e,s,t)}else xn(e,t)}function On(e,t,r){Object(n["p"])(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Object(n["v"])(t)&&(e.setupState=Ne(t)),xn(e,r)}function xn(e,t,r){const i=e.type;if(!e.render){if(!t&&bn&&!i.render){const t=i.template;if(t){0;const{isCustomElement:r,compilerOptions:s}=e.appContext.config,{delimiters:o,compilerOptions:a}=i,c=Object(n["h"])(Object(n["h"])({isCustomElement:r,delimiters:o},s),a);i.render=bn(t,c)}}e.render=i.render||n["d"],_n&&_n(e)}gn(e),x(),Nt(e),P(),yn()}function kn(e){return new Proxy(e.attrs,{get(t,r){return C(e,"get","$attrs"),t[r]}})}function Pn(e){const t=t=>{e.exposed=t||{}};let r;return{get attrs(){return r||(r=kn(e))},slots:e.slots,emit:e.emit,expose:t}}function Cn(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ne(Ee(e.exposed)),{get(t,r){return r in t?t[r]:r in dn?dn[r](e):void 0}}))}function jn(e){return Object(n["p"])(e)&&e.displayName||e.name}function Tn(e){return Object(n["p"])(e)&&"__vccOpts"in e}function En(e,t,r,n){let i;try{i=n?e(...n):e()}catch(s){Dn(s,t,r)}return i}function Ln(e,t,r,i){if(Object(n["p"])(e)){const s=En(e,t,r,i);return s&&Object(n["y"])(s)&&s.catch(e=>{Dn(e,t,r)}),s}const s=[];for(let n=0;n<e.length;n++)s.push(Ln(e[n],t,r,i));return s}function Dn(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let n=t.parent;const i=t.proxy,s=r;while(n){const t=n.ec;if(t)for(let r=0;r<t.length;r++)if(!1===t[r](e,i,s))return;n=n.parent}const o=t.appContext.config.errorHandler;if(o)return void En(o,null,10,[e,i,s])}In(e,r,i,n)}function In(e,t,r,n=!0){console.error(e)}let Mn=!1,An=!1;const qn=[];let Fn=0;const Nn=[];let Bn=null,zn=0;const Un=[];let Wn=null,Gn=0;const $n=Promise.resolve();let Vn=null,Kn=null;function Hn(e){const t=Vn||$n;return e?t.then(this?e.bind(this):e):t}function Qn(e){let t=Fn+1,r=qn.length;while(t<r){const n=t+r>>>1,i=ii(qn[n]);i<e?t=n+1:r=n}return t}function Jn(e){qn.length&&qn.includes(e,Mn&&e.allowRecurse?Fn+1:Fn)||e===Kn||(null==e.id?qn.push(e):qn.splice(Qn(e.id),0,e),Zn())}function Zn(){Mn||An||(An=!0,Vn=$n.then(si))}function Yn(e){const t=qn.indexOf(e);t>Fn&&qn.splice(t,1)}function Xn(e,t,r,i){Object(n["o"])(e)?r.push(...e):t&&t.includes(e,e.allowRecurse?i+1:i)||r.push(e),Zn()}function ei(e){Xn(e,Bn,Nn,zn)}function ti(e){Xn(e,Wn,Un,Gn)}function ri(e,t=null){if(Nn.length){for(Kn=t,Bn=[...new Set(Nn)],Nn.length=0,zn=0;zn<Bn.length;zn++)Bn[zn]();Bn=null,zn=0,Kn=null,ri(e,t)}}function ni(e){if(Un.length){const e=[...new Set(Un)];if(Un.length=0,Wn)return void Wn.push(...e);for(Wn=e,Wn.sort((e,t)=>ii(e)-ii(t)),Gn=0;Gn<Wn.length;Gn++)Wn[Gn]();Wn=null,Gn=0}}const ii=e=>null==e.id?1/0:e.id;function si(e){An=!1,Mn=!0,ri(e),qn.sort((e,t)=>ii(e)-ii(t));n["d"];try{for(Fn=0;Fn<qn.length;Fn++){const e=qn[Fn];e&&!1!==e.active&&En(e,null,14)}}finally{Fn=0,qn.length=0,ni(e),Mn=!1,Vn=null,(qn.length||Nn.length||Un.length)&&si(e)}}const oi={};function ai(e,t,r){return ci(e,t,r)}function ci(e,t,{immediate:r,deep:i,flush:s,onTrack:o,onTrigger:a}=n["b"]){const c=hn;let d,u,p=!1,l=!1;if(Ae(e)?(d=()=>e.value,p=!!e._shallow):Pe(e)?(d=()=>e,i=!0):Object(n["o"])(e)?(l=!0,p=e.some(Pe),d=()=>e.map(e=>Ae(e)?e.value:Pe(e)?pi(e):Object(n["p"])(e)?En(e,c,2):void 0)):d=Object(n["p"])(e)?t?()=>En(e,c,2):()=>{if(!c||!c.isUnmounted)return u&&u(),Ln(e,c,3,[f])}:n["d"],t&&i){const e=d;d=()=>pi(e())}let f=e=>{u=y.onStop=()=>{En(e,c,4)}};if(Sn)return f=n["d"],t?r&&Ln(t,c,3,[d(),l?[]:void 0,f]):d(),n["d"];let h=l?[]:oi;const m=()=>{if(y.active)if(t){const e=y.run();(i||p||(l?e.some((e,t)=>Object(n["j"])(e,h[t])):Object(n["j"])(e,h)))&&(u&&u(),Ln(t,c,3,[e,h===oi?void 0:h,f]),h=e)}else y.run()};let g;m.allowRecurse=!!t,g="sync"===s?m:"post"===s?()=>br(m,c&&c.suspense):()=>{!c||c.isMounted?ei(m):m()};const y=new S(d,g);return t?r?m():h=y.run():"post"===s?br(y.run.bind(y),c&&c.suspense):y.run(),()=>{y.stop(),c&&c.scope&&Object(n["K"])(c.scope.effects,y)}}function di(e,t,r){const i=this.proxy,s=Object(n["D"])(e)?e.includes(".")?ui(i,e):()=>i[e]:e.bind(i,i);let o;Object(n["p"])(t)?o=t:(o=t.handler,r=t);const a=hn;gn(this);const c=ci(s,o.bind(i),r);return a?gn(a):yn(),c}function ui(e,t){const r=t.split(".");return()=>{let t=e;for(let e=0;e<r.length&&t;e++)t=t[r[e]];return t}}function pi(e,t){if(!Object(n["v"])(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),Ae(e))pi(e.value,t);else if(Object(n["o"])(e))for(let r=0;r<e.length;r++)pi(e[r],t);else if(Object(n["B"])(e)||Object(n["t"])(e))e.forEach(e=>{pi(e,t)});else if(Object(n["x"])(e))for(const r in e)pi(e[r],t);return e}function li(e,t,r){const i=arguments.length;return 2===i?Object(n["v"])(t)&&!Object(n["o"])(t)?$r(t)?Zr(e,null,[t]):Zr(e,t):Zr(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):3===i&&$r(r)&&(r=[r]),Zr(e,t,r))}Symbol("");const fi="3.2.19",hi="http://www.w3.org/2000/svg",mi="undefined"!==typeof document?document:null,gi=new Map,yi={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?mi.createElementNS(hi,e):mi.createElement(e,r?{is:r}:void 0);return"select"===e&&n&&null!=n.multiple&&i.setAttribute("multiple",n.multiple),i},createText:e=>mi.createTextNode(e),createComment:e=>mi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n){const i=r?r.previousSibling:t.lastChild;let s=gi.get(e);if(!s){const t=mi.createElement("template");if(t.innerHTML=n?`<svg>${e}</svg>`:e,s=t.content,n){const e=s.firstChild;while(e.firstChild)s.appendChild(e.firstChild);s.removeChild(e)}gi.set(e,s)}return t.insertBefore(s.cloneNode(!0),r),[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function vi(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function bi(e,t,r){const i=e.style,s=i.display;if(r)if(Object(n["D"])(r))t!==r&&(i.cssText=r);else{for(const e in r)Si(i,e,r[e]);if(t&&!Object(n["D"])(t))for(const e in t)null==r[e]&&Si(i,e,"")}else e.removeAttribute("style");"_vod"in e&&(i.display=s)}const _i=/\s*!important$/;function Si(e,t,r){if(Object(n["o"])(r))r.forEach(r=>Si(e,t,r));else if(t.startsWith("--"))e.setProperty(t,r);else{const i=Oi(e,t);_i.test(r)?e.setProperty(Object(n["l"])(i),r.replace(_i,""),"important"):e[i]=r}}const wi=["Webkit","Moz","ms"],Ri={};function Oi(e,t){const r=Ri[t];if(r)return r;let i=Object(n["e"])(t);if("filter"!==i&&i in e)return Ri[t]=i;i=Object(n["f"])(i);for(let n=0;n<wi.length;n++){const r=wi[n]+i;if(r in e)return Ri[t]=r}return t}const xi="http://www.w3.org/1999/xlink";function ki(e,t,r,i,s){if(i&&t.startsWith("xlink:"))null==r?e.removeAttributeNS(xi,t.slice(6,t.length)):e.setAttributeNS(xi,t,r);else{const i=Object(n["C"])(t);null==r||i&&!Object(n["m"])(r)?e.removeAttribute(t):e.setAttribute(t,i?"":r)}}function Pi(e,t,r,i,s,o,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,s,o),void(e[t]=null==r?"":r);if("value"===t&&"PROGRESS"!==e.tagName){e._value=r;const n=null==r?"":r;return e.value!==n&&(e.value=n),void(null==r&&e.removeAttribute(t))}if(""===r||null==r){const i=typeof e[t];if("boolean"===i)return void(e[t]=Object(n["m"])(r));if(null==r&&"string"===i)return e[t]="",void e.removeAttribute(t);if("number"===i){try{e[t]=0}catch(c){}return void e.removeAttribute(t)}}try{e[t]=r}catch(d){0}}let Ci=Date.now,ji=!1;if("undefined"!==typeof window){Ci()>document.createEvent("Event").timeStamp&&(Ci=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);ji=!!(e&&Number(e[1])<=53)}let Ti=0;const Ei=Promise.resolve(),Li=()=>{Ti=0},Di=()=>Ti||(Ei.then(Li),Ti=Ci());function Ii(e,t,r,n){e.addEventListener(t,r,n)}function Mi(e,t,r,n){e.removeEventListener(t,r,n)}function Ai(e,t,r,n,i=null){const s=e._vei||(e._vei={}),o=s[t];if(n&&o)o.value=n;else{const[r,a]=Fi(t);if(n){const o=s[t]=Ni(n,i);Ii(e,r,o,a)}else o&&(Mi(e,r,o,a),s[t]=void 0)}}const qi=/(?:Once|Passive|Capture)$/;function Fi(e){let t;if(qi.test(e)){let r;t={};while(r=e.match(qi))e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[Object(n["l"])(e.slice(2)),t]}function Ni(e,t){const r=e=>{const n=e.timeStamp||Ci();(ji||n>=r.attached-1)&&Ln(Bi(e,r.value),t,5,[e])};return r.value=e,r.attached=Di(),r}function Bi(e,t){if(Object(n["o"])(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e(t))}return t}const zi=/^on[a-z]/,Ui=(e,t,r,i,s=!1,o,a,c,d)=>{"class"===t?vi(e,i,s):"style"===t?bi(e,r,i):Object(n["w"])(t)?Object(n["u"])(t)||Ai(e,t,r,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):Wi(e,t,i,s))?Pi(e,t,i,o,a,c,d):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),ki(e,t,i,s))};function Wi(e,t,r,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&zi.test(t)&&Object(n["p"])(r)):"spellcheck"!==t&&"draggable"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!zi.test(t)||!Object(n["D"])(r))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const Gi="transition",$i="animation",Vi=(e,{slots:t})=>li(ut,Ji(e),t);Vi.displayName="Transition";const Ki={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Hi=(Vi.props=Object(n["h"])({},ut.props,Ki),(e,t=[])=>{Object(n["o"])(e)?e.forEach(e=>e(...t)):e&&e(...t)}),Qi=e=>!!e&&(Object(n["o"])(e)?e.some(e=>e.length>1):e.length>1);function Ji(e){const t={};for(const n in e)n in Ki||(t[n]=e[n]);if(!1===e.css)return t;const{name:r="v",type:i,duration:s,enterFromClass:o=r+"-enter-from",enterActiveClass:a=r+"-enter-active",enterToClass:c=r+"-enter-to",appearFromClass:d=o,appearActiveClass:u=a,appearToClass:p=c,leaveFromClass:l=r+"-leave-from",leaveActiveClass:f=r+"-leave-active",leaveToClass:h=r+"-leave-to"}=e,m=Zi(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:_,onLeave:S,onLeaveCancelled:w,onBeforeAppear:R=v,onAppear:O=b,onAppearCancelled:x=_}=t,k=(e,t,r)=>{es(e,t?p:c),es(e,t?u:a),r&&r()},P=(e,t)=>{es(e,h),es(e,f),t&&t()},C=e=>(t,r)=>{const n=e?O:b,s=()=>k(t,e,r);Hi(n,[t,s]),ts(()=>{es(t,e?d:o),Xi(t,e?p:c),Qi(n)||ns(t,i,g,s)})};return Object(n["h"])(t,{onBeforeEnter(e){Hi(v,[e]),Xi(e,o),Xi(e,a)},onBeforeAppear(e){Hi(R,[e]),Xi(e,d),Xi(e,u)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){const r=()=>P(e,t);Xi(e,l),as(),Xi(e,f),ts(()=>{es(e,l),Xi(e,h),Qi(S)||ns(e,i,y,r)}),Hi(S,[e,r])},onEnterCancelled(e){k(e,!1),Hi(_,[e])},onAppearCancelled(e){k(e,!0),Hi(x,[e])},onLeaveCancelled(e){P(e),Hi(w,[e])}})}function Zi(e){if(null==e)return null;if(Object(n["v"])(e))return[Yi(e.enter),Yi(e.leave)];{const t=Yi(e);return[t,t]}}function Yi(e){const t=Object(n["N"])(e);return t}function Xi(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e._vtc||(e._vtc=new Set)).add(t)}function es(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function ts(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let rs=0;function ns(e,t,r,n){const i=e._endId=++rs,s=()=>{i===e._endId&&n()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:c}=is(e,t);if(!o)return n();const d=o+"end";let u=0;const p=()=>{e.removeEventListener(d,l),s()},l=t=>{t.target===e&&++u>=c&&p()};setTimeout(()=>{u<c&&p()},a+1),e.addEventListener(d,l)}function is(e,t){const r=window.getComputedStyle(e),n=e=>(r[e]||"").split(", "),i=n(Gi+"Delay"),s=n(Gi+"Duration"),o=ss(i,s),a=n($i+"Delay"),c=n($i+"Duration"),d=ss(a,c);let u=null,p=0,l=0;t===Gi?o>0&&(u=Gi,p=o,l=s.length):t===$i?d>0&&(u=$i,p=d,l=c.length):(p=Math.max(o,d),u=p>0?o>d?Gi:$i:null,l=u?u===Gi?s.length:c.length:0);const f=u===Gi&&/\b(transform|all)(,|$)/.test(r[Gi+"Property"]);return{type:u,timeout:p,propCount:l,hasTransform:f}}function ss(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map((t,r)=>os(t)+os(e[r])))}function os(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function as(){return document.body.offsetHeight}new WeakMap,new WeakMap;const cs=Object(n["h"])({patchProp:Ui},yi);let ds;function us(){return ds||(ds=_r(cs))}const ps=(...e)=>{const t=us().createApp(...e);const{mount:r}=t;return t.mount=e=>{const i=ls(e);if(!i)return;const s=t._component;Object(n["p"])(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ls(e){if(Object(n["D"])(e)){const t=document.querySelector(e);return t}return e}},"7b0b":function(e,t,r){var n=r("1d80");e.exports=function(e){return Object(n(e))}},"7c73":function(e,t,r){var n,i=r("825a"),s=r("37e8"),o=r("7839"),a=r("d012"),c=r("1be4"),d=r("cc12"),u=r("f772"),p=">",l="<",f="prototype",h="script",m=u("IE_PROTO"),g=function(){},y=function(e){return l+h+p+e+l+"/"+h+p},v=function(e){e.write(y("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=d("iframe"),r="java"+h+":";return t.style.display="none",c.appendChild(t),t.src=String(r),e=t.contentWindow.document,e.open(),e.write(y("document.F=Object")),e.close(),e.F},_=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}_="undefined"!=typeof document?document.domain&&n?v(n):b():v(n);var e=o.length;while(e--)delete _[f][o[e]];return _()};a[m]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(g[f]=i(e),r=new g,g[f]=null,r[m]=e):r=_(),void 0===t?r:s(r,t)}},"7dd0":function(e,t,r){"use strict";var n=r("23e7"),i=r("c430"),s=r("5e77"),o=r("1626"),a=r("9ed3"),c=r("e163"),d=r("d2bb"),u=r("d44e"),p=r("9112"),l=r("6eeb"),f=r("b622"),h=r("3f8c"),m=r("ae93"),g=s.PROPER,y=s.CONFIGURABLE,v=m.IteratorPrototype,b=m.BUGGY_SAFARI_ITERATORS,_=f("iterator"),S="keys",w="values",R="entries",O=function(){return this};e.exports=function(e,t,r,s,f,m,x){a(r,t,s);var k,P,C,j=function(e){if(e===f&&I)return I;if(!b&&e in L)return L[e];switch(e){case S:return function(){return new r(this,e)};case w:return function(){return new r(this,e)};case R:return function(){return new r(this,e)}}return function(){return new r(this)}},T=t+" Iterator",E=!1,L=e.prototype,D=L[_]||L["@@iterator"]||f&&L[f],I=!b&&D||j(f),M="Array"==t&&L.entries||D;if(M&&(k=c(M.call(new e)),k!==Object.prototype&&k.next&&(i||c(k)===v||(d?d(k,v):o(k[_])||l(k,_,O)),u(k,T,!0,!0),i&&(h[T]=O))),g&&f==w&&D&&D.name!==w&&(!i&&y?p(L,"name",w):(E=!0,I=function(){return D.call(this)})),f)if(P={values:j(w),keys:m?I:j(S),entries:j(R)},x)for(C in P)(b||E||!(C in L))&&l(L,C,P[C]);else n({target:t,proto:!0,forced:b||E},P);return i&&!x||L[_]===I||l(L,_,I,{name:f}),h[t]=I,P}},"7e3c":function(e,t,r){var n;if("object"===typeof globalThis)n=globalThis;else try{n=r("6787")}catch(a){}finally{if(n||"undefined"===typeof window||(n=window),!n)throw new Error("Could not determine global this")}var i=n.WebSocket||n.MozWebSocket,s=r("1168");function o(e,t){var r;return r=t?new i(e,t):new i(e),r}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?o:null,version:s}},"7f9a":function(e,t,r){var n=r("da84"),i=r("1626"),s=r("8925"),o=n.WeakMap;e.exports=i(o)&&/native code/.test(s(o))},8040:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const n=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");function i(e){const t=n.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}t.parse=i},"825a":function(e,t,r){var n=r("861d");e.exports=function(e){if(n(e))return e;throw TypeError(String(e)+" is not an object")}},"83ab":function(e,t,r){var n=r("d039");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,r){"use strict";var n=r("a04b"),i=r("9bf2"),s=r("5c6c");e.exports=function(e,t,r){var o=n(t);o in e?i.f(e,o,s(0,r)):e[o]=r}},"841c":function(e,t,r){"use strict";var n=r("d784"),i=r("825a"),s=r("1d80"),o=r("129f"),a=r("577e"),c=r("dc4a"),d=r("14c3");n("search",(function(e,t,r){return[function(t){var r=s(this),n=void 0==t?void 0:c(t,e);return n?n.call(t,r):new RegExp(t)[e](a(r))},function(e){var n=i(this),s=a(e),c=r(t,n,s);if(c.done)return c.value;var u=n.lastIndex;o(u,0)||(n.lastIndex=0);var p=d(n,s);return o(n.lastIndex,u)||(n.lastIndex=u),null===p?-1:p.index}]}))},8544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsumer=void 0;const n=r("ee1f"),i=r("1b28"),s=new n.Logger("DataConsumer");class o extends i.EnhancedEventEmitter{constructor({id:e,dataProducerId:t,dataChannel:r,sctpStreamParameters:n,appData:o}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,s.debug("constructor()"),this._id=e,this._dataProducerId=t,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=o,this._handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}_handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:t}=e;t||(t=new Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):s.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)}),this._dataChannel.addEventListener("close",()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}t.DataConsumer=o},"861d":function(e,t,r){var n=r("1626");e.exports=function(e){return"object"===typeof e?null!==e:n(e)}},8871:function(e){e.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},"887c":function(e,t,r){"use strict";function n({offerMediaObject:e}){const t=new Set;for(const i of e.ssrcs||[]){const e=i.id;t.add(e)}if(0===t.size)throw new Error("no a=ssrc lines found");const r=new Map;for(const i of e.ssrcGroups||[]){if("FID"!==i.semantics)continue;let[e,n]=i.ssrcs.split(/\s+/);e=Number(e),n=Number(n),t.has(e)&&(t.delete(e),t.delete(n),r.set(e,n))}for(const i of t)r.set(i,null);const n=[];for(const[i,s]of r){const e={ssrc:i};s&&(e.rtx={ssrc:s}),n.push(e)}return n}function i({offerMediaObject:e,numStreams:t}){if(t<=1)throw new TypeError("numStreams must be greater than 1");const r=(e.ssrcs||[]).find(e=>"msid"===e.attribute);if(!r)throw new Error("a=ssrc line with msid information not found");const[n,i]=r.value.split(" "),s=r.id;let o;(e.ssrcGroups||[]).some(e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===s&&(o=Number(t[1]),!0)});const a=e.ssrcs.find(e=>"cname"===e.attribute);if(!a)throw new Error("a=ssrc line with cname information not found");const c=a.value,d=[],u=[];for(let p=0;p<t;++p)d.push(s+p),o&&u.push(o+p);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let p=0;p<d.length;++p){const t=d[p];e.ssrcs.push({id:t,attribute:"cname",value:c}),e.ssrcs.push({id:t,attribute:"msid",value:`${n} ${i}`})}for(let p=0;p<u.length;++p){const t=d[p],r=u[p];e.ssrcs.push({id:r,attribute:"cname",value:c}),e.ssrcs.push({id:r,attribute:"msid",value:`${n} ${i}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${t} ${r}`})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=n,t.addLegacySimulcast=i},8925:function(e,t,r){var n=r("1626"),i=r("c6cd"),s=Function.toString;n(i.inspectSource)||(i.inspectSource=function(e){return s.call(e)}),e.exports=i.inspectSource},"8d94":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari12=void 0;const o=s(r("93be")),a=r("ee1f"),c=s(r("f31c")),d=s(r("feba")),u=s(r("6303")),p=s(r("887c")),l=r("d73d"),f=r("19f7"),h=new a.Logger("Safari12"),m={OS:1024,MIS:1024};class g extends l.HandlerInterface{constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new g}get name(){return"Safari12"}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=o.parse(r.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:u}){h.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",u),video:d.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",u),video:d.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){h.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=d.reduceCodecs(s.codecs,n);const a=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});let f,m=await this._pc.createOffer(),g=o.parse(m.sdp);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:g}),t&&t.length>1&&(h.debug("send() | enabling legacy simulcast"),g=o.parse(m.sdp),f=g.media[a.idx],p.addLegacySimulcast({offerMediaObject:f,numStreams:t.length}),m={type:"offer",sdp:o.write(g)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const y=l.mid;if(i.mid=y,g=o.parse(this._pc.localDescription.sdp),f=g.media[a.idx],i.rtcp.cname=u.getCname({offerMediaObject:f}),i.encodings=p.getRtpEncodings({offerMediaObject:f}),t)for(let o=0;o<i.encodings.length;++o)t[o]&&Object.assign(i.encodings[o],t[o]);if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const o of i.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:a.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r});const v={type:"answer",sdp:this._remoteSdp.getSdp()};return h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v),this._mapMidTransceiver.set(y,l),{localId:y,rtpParameters:i,rtpSender:l.sender}}async stopSending(e){this._assertSendDirection(),h.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid);const r=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async replaceTrack(e,t){this._assertSendDirection(),t?h.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):h.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.sender.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.sender.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};h.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",e,t);const n=r.mid||String(this._mapMidTransceiver.size);this._remoteSdp.receive({mid:n,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const i={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const a=o.parse(s.sdp),c=a.media.find(e=>String(e.mid)===n);u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:c}),s={type:"answer",sdp:o.write(a)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:a}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);const d=this._pc.getTransceivers().find(e=>e.mid===n);if(!d)throw new Error("new RTCRtpTransceiver not found");return this._mapMidTransceiver.set(n,d),{localId:n,track:d.receiver.track,rtpReceiver:d.receiver}}async stopReceiving(e){this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(t.mid);const r={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n),this._mapMidTransceiver.delete(e)}async pauseReceiving(e){this._assertRecvDirection(),h.debug("pauseReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive";const r={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();h.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this._assertRecvDirection(),h.debug("resumeReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="recvonly";const r={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();h.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this._assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a,protocol:r};h.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari12=g},"90e3":function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},9112:function(e,t,r){var n=r("83ab"),i=r("9bf2"),s=r("5c6c");e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},9263:function(e,t,r){"use strict";var n=r("577e"),i=r("ad6d"),s=r("9f7f"),o=r("5692"),a=r("7c73"),c=r("69f3").get,d=r("fce3"),u=r("107c"),p=RegExp.prototype.exec,l=o("native-string-replace",String.prototype.replace),f=p,h=function(){var e=/a/,t=/b*/g;return p.call(e,"a"),p.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),m=s.UNSUPPORTED_Y||s.BROKEN_CARET,g=void 0!==/()??/.exec("")[1],y=h||g||m||d||u;y&&(f=function(e){var t,r,s,o,d,u,y,v=this,b=c(v),_=n(e),S=b.raw;if(S)return S.lastIndex=v.lastIndex,t=f.call(S,_),v.lastIndex=S.lastIndex,t;var w=b.groups,R=m&&v.sticky,O=i.call(v),x=v.source,k=0,P=_;if(R&&(O=O.replace("y",""),-1===O.indexOf("g")&&(O+="g"),P=_.slice(v.lastIndex),v.lastIndex>0&&(!v.multiline||v.multiline&&"\n"!==_.charAt(v.lastIndex-1))&&(x="(?: "+x+")",P=" "+P,k++),r=new RegExp("^(?:"+x+")",O)),g&&(r=new RegExp("^"+x+"$(?!\\s)",O)),h&&(s=v.lastIndex),o=p.call(R?r:v,P),R?o?(o.input=o.input.slice(k),o[0]=o[0].slice(k),o.index=v.lastIndex,v.lastIndex+=o[0].length):v.lastIndex=0:h&&o&&(v.lastIndex=v.global?o.index+o[0].length:s),g&&o&&o.length>1&&l.call(o[0],r,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(o[d]=void 0)})),o&&w)for(o.groups=u=a(null),d=0;d<w.length;d++)y=w[d],u[y[0]]=o[y[1]];return o}),e.exports=f},9315:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(e,t){__WEBPACK_AMD_DEFINE_FACTORY__=t,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)})(0,(function(context){function Lazy(e){if(isArray(e))return new ArrayWrapper(e);if("string"===typeof e)return new StringWrapper(e);if(e instanceof Sequence)return e;if(Lazy.extensions){var t,r=Lazy.extensions,n=r.length;while(!t&&n--)t=r[n](e);if(t)return t}return new ObjectWrapper(e)}function Sequence(){}function Iterator(e){this.sequence=e,this.index=-1}function MemoizedSequence(e){this.parent=e,this.memo=[],this.iterator=void 0,this.complete=!1}function MappedSequence(e,t){this.parent=e,this.mapFn=t}function MappingIterator(e,t){this.iterator=e.getIterator(),this.mapFn=t,this.index=-1}function FilteredSequence(e,t){this.parent=e,this.filterFn=t}function FilteringIterator(e,t){this.iterator=e.getIterator(),this.filterFn=t,this.index=0}function ReversedSequence(e){this.parent=e}function ReversedIterator(e){this.sequence=e}function ConcatenatedSequence(e,t){this.parent=e,this.arrays=t}function TakeSequence(e,t){this.parent=e,this.count=t}function TakeIterator(e,t){this.iterator=e.getIterator(),this.count=t}function TakeWhileSequence(e,t){this.parent=e,this.predicate=t}function InitialSequence(e,t){this.parent=e,this.count="number"===typeof t?t:1}function DropSequence(e,t){this.parent=e,this.count="number"===typeof t?t:1}function DropWhileSequence(e,t){this.parent=e,this.predicate=t}function SortedSequence(e,t){this.parent=e,this.sortFn=t}function GroupedSequence(e,t,r){this.parent=e,this.keyFn=t,this.valFn=r}function IndexedSequence(e,t,r){this.parent=e,this.keyFn=t,this.valFn=r}function CountedSequence(e,t){this.parent=e,this.keyFn=t}function UniqueSequence(e,t){this.parent=e,this.keyFn=t}function ZippedSequence(e,t){this.parent=e,this.arrays=t}function ShuffledSequence(e){this.parent=e}function FlattenedSequence(e,t){this.parent=e,this.each=t?this.eachShallow:this.eachRecursive}function WithoutSequence(e,t){this.parent=e,this.values=t}function IntersectionSequence(e,t){this.parent=e,this.arrays=t}function Memoizer(e,t){this.iterator=t,this.memo=e,this.currentIndex=0,this.currentValue=void 0}function UniqueMemoizer(e){this.iterator=e,this.set=new Set,this.memo=[],this.currentValue=void 0}function ConsecutiveSequence(e,t){this.parent=e,this.count=t}function ChunkedSequence(e,t){this.parent=e,this.chunkSize=t}function ChunkedIterator(e,t){this.iterator=e.getIterator(),this.size=t}function TappedSequence(e,t){this.parent=e,this.callback=t}function SimpleIntersectionSequence(e,t){this.parent=e,this.array=t,this.each=getEachForIntersection(t)}function getEachForIntersection(e){return e.length<40?SimpleIntersectionSequence.prototype.eachArrayCache:SimpleIntersectionSequence.prototype.eachMemoizerCache}function SimpleZippedSequence(e,t){this.parent=e,this.array=t}function ArrayLikeSequence(){}function IndexedIterator(e){this.sequence=e,this.index=-1}function IndexedMappedSequence(e,t){this.parent=e,this.mapFn=t}function IndexedFilteredSequence(e,t){this.parent=e,this.filterFn=t}function IndexedReversedSequence(e){this.parent=e}function IndexedTakeSequence(e,t){this.parent=e,this.count=t}function IndexedDropSequence(e,t){this.parent=e,this.count="number"===typeof t?t:1}function IndexedConcatenatedSequence(e,t){this.parent=e,this.other=t}function IndexedUniqueSequence(e,t){this.parent=e,this.each=getEachForParent(e),this.keyFn=t}function getEachForParent(e){return e.length()<100?IndexedUniqueSequence.prototype.eachArrayCache:UniqueSequence.prototype.each}function ArrayWrapper(e){this.source=e}function MappedArrayWrapper(e,t){this.parent=e,this.mapFn=t}function FilteredArrayWrapper(e,t){this.parent=e,this.filterFn=t}function UniqueArrayWrapper(e,t){this.parent=e,this.each=getEachForSource(e.source),this.keyFn=t}function getEachForSource(e){return e.length<40?UniqueArrayWrapper.prototype.eachNoCache:e.length<100?UniqueArrayWrapper.prototype.eachArrayCache:UniqueArrayWrapper.prototype.eachSetCache}function ConcatArrayWrapper(e,t){this.parent=e,this.other=t}function ObjectLikeSequence(){}function KeySequence(e){this.parent=e}function ValuesSequence(e){this.parent=e}function FilteredObjectLikeSequence(e,t){this.parent=e,this.filterFn=t}function AssignSequence(e,t){this.parent=e,this.other=t}function DefaultsSequence(e,t){this.parent=e,this.defaultValues=t}function InvertedSequence(e){this.parent=e}function MergedSequence(e,t,r){this.parent=e,this.others=t,this.mergeFn=r}function mergeObjects(e,t){var r,n;if("undefined"===typeof t)return e;if(isVanillaObject(e)&&isVanillaObject(t))r={};else{if(!isArray(e)||!isArray(t))return t;r=[]}for(n in e)r[n]=mergeObjects(e[n],t[n]);for(n in t)r[n]||(r[n]=t[n]);return r}function isVanillaObject(e){return e&&e.constructor===Object}function PickSequence(e,t){this.parent=e,this.properties=t}function OmitSequence(e,t){this.parent=e,this.properties=t}function ObjectWrapper(e){this.source=e}function StringLikeSequence(){}function CharIterator(e){this.source=Lazy(e),this.index=-1}function StringSegment(e,t,r){this.parent=e,this.start=Math.max(0,t),this.stop=r}function MappedStringLikeSequence(e,t){this.parent=e,this.mapFn=t}function ReversedStringLikeSequence(e){this.parent=e}function StringMatchSequence(e,t){this.parent=e,this.pattern=t}function StringMatchIterator(e,t){this.source=e,this.pattern=cloneRegex(t)}function SplitStringSequence(e,t){this.parent=e,this.pattern=t}function SplitWithRegExpIterator(e,t){this.source=e,this.pattern=cloneRegex(t)}function SplitWithStringIterator(e,t){this.source=e,this.delimiter=t}function StringWrapper(e){this.source=e}function GeneratedSequence(e,t){this.get=e,this.fixedLength=t}function GeneratedIterator(e){this.sequence=e,this.index=0,this.currentValue=null}function AsyncSequence(e,t){if(e instanceof AsyncSequence)throw new Error("Sequence is already asynchronous!");this.parent=e,this.interval=t,this.onNextCallback=getOnNextCallback(t),this.cancelCallback=getCancelCallback(t)}function AsyncHandle(e){this.resolveListeners=[],this.rejectListeners=[],this.state=PENDING,this.cancelFn=e}Lazy.VERSION="0.5.1",Lazy.noop=function(){},Lazy.identity=function(e){return e},Lazy.equality=function(e,t){return e===t},Lazy.strict=function(){function e(e){if(null==e)throw new Error("You cannot wrap null or undefined using Lazy.");if("number"===typeof e||"boolean"===typeof e)throw new Error("You cannot wrap primitive values using Lazy.");return Lazy(e)}return Lazy(Lazy).each((function(t,r){e[r]=t})),e},Sequence.define=function(e,t){if(!t||!t.getIterator&&!t.each)throw new Error("A custom sequence must implement *at least* getIterator or each!");return defineSequenceType(Sequence,e,t)},Sequence.prototype.size=function(){return this.getIndex().length()},Sequence.prototype.getIterator=function(){return new Iterator(this)},Sequence.prototype.root=function(){return this.parent.root()},Sequence.prototype.isAsync=function(){return!!this.parent&&this.parent.isAsync()},Sequence.prototype.value=function(){return this.toArray()},Sequence.prototype.apply=function(e){var t,r=this.root(),n=r.source;try{r.source=e,t=this.value()}finally{r.source=n}return t},Iterator.prototype.current=function(){return this.cachedIndex&&this.cachedIndex.get(this.index)},Iterator.prototype.moveNext=function(){var e=this.cachedIndex;return e||(e=this.cachedIndex=this.sequence.getIndex()),!(this.index>=e.length()-1)&&(++this.index,!0)},Sequence.prototype.toArray=function(){return this.reduce((function(e,t){return e.push(t),e}),[])},Sequence.prototype.equals=function(e,t){if(!(e instanceof Sequence))return!1;var r=this.getIterator(),n=e.getIterator(),i=t||Lazy.equality;while(r.moveNext()){if(!n.moveNext())return!1;if(!i(r.current(),n.current()))return!1}return!n.moveNext()},Sequence.prototype.getIndex=function(){return new ArrayWrapper(this.toArray())},Sequence.prototype.get=function(e){var t;return this.each((function(r,n){if(n===e)return t=r,!1})),t},Sequence.prototype.memoize=function(){return new MemoizedSequence(this)},Sequence.prototype.toObject=function(){return this.reduce((function(e,t){return e[t[0]]=t[1],e}),{})},Sequence.prototype.each=function(e){var t=this.getIterator(),r=-1;while(t.moveNext())if(!1===e(t.current(),++r))return!1;return!0},Sequence.prototype.forEach=function(e){return this.each(e)},Sequence.prototype.map=function(e){return new MappedSequence(this,createCallback(e))},Sequence.prototype.collect=function(e){return this.map(e)},MappedSequence.prototype=Object.create(Sequence.prototype),MappedSequence.prototype.getIterator=function(){return new MappingIterator(this.parent,this.mapFn)},MappedSequence.prototype.each=function(e){var t=this.mapFn;return this.parent.each((function(r,n){return e(t(r,n),n)}))},MappingIterator.prototype.current=function(){return this.mapFn(this.iterator.current(),this.index)},MappingIterator.prototype.moveNext=function(){return!!this.iterator.moveNext()&&(++this.index,!0)},Sequence.prototype.pluck=function(e){return this.map(e)},Sequence.prototype.invoke=function(e){return this.map((function(t){return t[e]()}))},Sequence.prototype.filter=function(e){return new FilteredSequence(this,createCallback(e))},Sequence.prototype.select=function(e){return this.filter(e)},FilteredSequence.prototype=Object.create(Sequence.prototype),FilteredSequence.prototype.getIterator=function(){return new FilteringIterator(this.parent,this.filterFn)},FilteredSequence.prototype.each=function(e){var t=this.filterFn,r=0;return this.parent.each((function(n,i){if(t(n,i))return e(n,r++)}))},FilteredSequence.prototype.reverse=function(){return this.parent.reverse().filter(this.filterFn)},FilteringIterator.prototype.current=function(){return this.value},FilteringIterator.prototype.moveNext=function(){var e,t=this.iterator,r=this.filterFn;while(t.moveNext())if(e=t.current(),r(e,this.index++))return this.value=e,!0;return this.value=void 0,!1},Sequence.prototype.reject=function(e){return e=createCallback(e),this.filter((function(t){return!e(t)}))},Sequence.prototype.ofType=function(e){return this.filter((function(t){return typeof t===e}))},Sequence.prototype.where=function(e){return this.filter(e)},Sequence.prototype.reverse=function(){return new ReversedSequence(this)},ReversedSequence.prototype=Object.create(Sequence.prototype),ReversedSequence.prototype.getIterator=function(){return new ReversedIterator(this.parent)},ReversedIterator.prototype.current=function(){return this.getIndex().get(this.index)},ReversedIterator.prototype.moveNext=function(){var e=this.getIndex(),t=e.length();return"undefined"===typeof this.index&&(this.index=t),--this.index>=0},ReversedIterator.prototype.getIndex=function(){return this.cachedIndex||(this.cachedIndex=this.sequence.getIndex()),this.cachedIndex},Sequence.prototype.concat=function(e){return new ConcatenatedSequence(this,arraySlice.call(arguments,0))},ConcatenatedSequence.prototype=Object.create(Sequence.prototype),ConcatenatedSequence.prototype.each=function(e){var t=!1,r=0;this.parent.each((function(n){if(!1===e(n,r++))return t=!0,!1})),t||Lazy(this.arrays).flatten(!0).each((function(t){if(!1===e(t,r++))return!1}))},Sequence.prototype.first=function(e){return"undefined"===typeof e?getFirst(this):new TakeSequence(this,e)},Sequence.prototype.head=Sequence.prototype.take=function(e){return this.first(e)},TakeSequence.prototype=Object.create(Sequence.prototype),TakeSequence.prototype.getIterator=function(){return new TakeIterator(this.parent,this.count)},TakeSequence.prototype.each=function(e){var t,r=this.count,n=0,i=this.parent.each((function(i){return n<r&&(t=e(i,n++)),!(n>=r)&&t}));return i instanceof AsyncHandle?i:n===r&&!1!==t},TakeIterator.prototype.current=function(){return this.iterator.current()},TakeIterator.prototype.moveNext=function(){return--this.count>=0&&this.iterator.moveNext()},Sequence.prototype.takeWhile=function(e){return new TakeWhileSequence(this,e)},TakeWhileSequence.prototype=Object.create(Sequence.prototype),TakeWhileSequence.prototype.each=function(e){var t=this.predicate,r=!1,n=0,i=this.parent.each((function(i,s){return t(i,s)?e(i,n++):(r=!0,!1)}));return i instanceof AsyncHandle?i:r},Sequence.prototype.initial=function(e){return new InitialSequence(this,e)},InitialSequence.prototype=Object.create(Sequence.prototype),InitialSequence.prototype.each=function(e){var t=this.parent.getIndex();return t.take(t.length()-this.count).each(e)},Sequence.prototype.last=function(e){return"undefined"===typeof e?this.reverse().first():this.reverse().take(e).reverse()},Sequence.prototype.findWhere=function(e){return this.where(e).first()},Sequence.prototype.rest=function(e){return new DropSequence(this,e)},Sequence.prototype.skip=Sequence.prototype.tail=Sequence.prototype.drop=function(e){return this.rest(e)},DropSequence.prototype=Object.create(Sequence.prototype),DropSequence.prototype.each=function(e){var t=this.count,r=0,n=0;return this.parent.each((function(i){if(!(r++<t))return e(i,n++)}))},Sequence.prototype.dropWhile=function(e){return new DropWhileSequence(this,e)},Sequence.prototype.skipWhile=function(e){return this.dropWhile(e)},DropWhileSequence.prototype=Object.create(Sequence.prototype),DropWhileSequence.prototype.each=function(e){var t=this.predicate,r=!1;return this.parent.each((function(n){if(!r){if(t(n))return;r=!0}return e(n)}))},Sequence.prototype.sort=function(e,t){return e||(e=compare),t&&(e=reverseArguments(e)),new SortedSequence(this,e)},Sequence.prototype.sortBy=function(e,t){return e=createComparator(e),t&&(e=reverseArguments(e)),new SortedSequence(this,e)},SortedSequence.prototype=Object.create(Sequence.prototype),SortedSequence.prototype.each=function(e){var t=this.sortFn,r=this.parent.toArray();return r.sort(t),forEach(r,e)},SortedSequence.prototype.reverse=function(){return new SortedSequence(this.parent,reverseArguments(this.sortFn))},Sequence.prototype.groupBy=function(e,t){return new GroupedSequence(this,e,t)},Sequence.prototype.indexBy=function(e,t){return new IndexedSequence(this,e,t)},Sequence.prototype.countBy=function(e){return new CountedSequence(this,e)},Sequence.prototype.uniq=function(e){return new UniqueSequence(this,e)},Sequence.prototype.unique=function(e){return this.uniq(e)},UniqueSequence.prototype=Object.create(Sequence.prototype),UniqueSequence.prototype.each=function(e){var t=new Set,r=this.keyFn,n=0;return r?(r=createCallback(r),this.parent.each((function(i){if(t.add(r(i)))return e(i,n++)}))):this.parent.each((function(r){if(t.add(r))return e(r,n++)}))},Sequence.prototype.zip=function(e){return 1===arguments.length?new SimpleZippedSequence(this,e):new ZippedSequence(this,arraySlice.call(arguments,0))},ZippedSequence.prototype=Object.create(Sequence.prototype),ZippedSequence.prototype.each=function(e){var t=this.arrays,r=0,n=this.parent.each((function(n){for(var i=[n],s=0;s<t.length;++s)i.push(t[s][r]);return e(i,r++)}));if(!n)return!1;var i,s=!0;while(s){s=!1,i=[void 0];for(var o=0;o<t.length;++o)i.push(t[o][r]),t[o].length>r&&(s=!0);if(s&&!1===e(i,r++))return!1}return!0},Sequence.prototype.shuffle=function(){return new ShuffledSequence(this)},ShuffledSequence.prototype=Object.create(Sequence.prototype),ShuffledSequence.prototype.each=function(e){for(var t=this.parent.toArray(),r=Math.floor,n=Math.random,i=0,s=t.length-1;s>0;--s)if(swap(t,s,r(n()*(s+1))),!1===e(t[s],i++))return!1;return t.length&&e(t[0],i),!0},Sequence.prototype.flatten=function(e){return new FlattenedSequence(this,e)},FlattenedSequence.prototype=Object.create(Sequence.prototype),FlattenedSequence.prototype.eachShallow=function(e){var t=0;return this.parent.each((function(r){return isArray(r)?forEach(r,(function(r){return e(r,t++)})):r instanceof Sequence?r.each((function(r){return e(r,t++)})):e(r,t++)}))},FlattenedSequence.prototype.eachRecursive=function(e){var t=0;return this.parent.each((function r(n){return isArray(n)?forEach(n,r):n instanceof Sequence?n.each(r):e(n,t++)}))},Sequence.prototype.compact=function(){return this.filter((function(e){return!!e}))},Sequence.prototype.without=function(e){return new WithoutSequence(this,arraySlice.call(arguments,0))},Sequence.prototype.difference=function(e){return this.without.apply(this,arguments)},WithoutSequence.prototype=Object.create(Sequence.prototype),WithoutSequence.prototype.each=function(e){var t=createSet(this.values),r=0;return this.parent.each((function(n){if(!t.contains(n))return e(n,r++)}))},Sequence.prototype.union=function(e){return this.concat(e).uniq()},Sequence.prototype.intersection=function(e){return 1===arguments.length&&isArray(arguments[0])?new SimpleIntersectionSequence(this,e):new IntersectionSequence(this,arraySlice.call(arguments,0))},IntersectionSequence.prototype=Object.create(Sequence.prototype),IntersectionSequence.prototype.each=function(e){var t=Lazy(this.arrays).map((function(e){return new UniqueMemoizer(Lazy(e).getIterator())})),r=new UniqueMemoizer(t.getIterator()),n=0;return this.parent.uniq().each((function(t){var i=!0;if(r.each((function(e){if(!e.contains(t))return i=!1,!1})),i)return e(t,n++)}))},Memoizer.prototype.current=function(){return this.currentValue},Memoizer.prototype.moveNext=function(){var e=this.iterator,t=this.memo;return this.currentIndex<t.length?(this.currentValue=t[this.currentIndex++],!0):!!e.moveNext()&&(this.currentValue=t[this.currentIndex++]=e.current(),!0)},UniqueMemoizer.prototype.current=function(){return this.currentValue},UniqueMemoizer.prototype.moveNext=function(){var e,t=this.iterator,r=this.set,n=this.memo;while(t.moveNext())if(e=t.current(),r.add(e))return n.push(e),this.currentValue=e,!0;return!1},UniqueMemoizer.prototype.each=function(e){var t=this.memo,r=t.length,n=-1;while(++n<r)if(!1===e(t[n],n))return!1;while(this.moveNext())if(!1===e(this.currentValue,n++))break},UniqueMemoizer.prototype.contains=function(e){if(this.set.contains(e))return!0;while(this.moveNext())if(this.currentValue===e)return!0;return!1},Sequence.prototype.every=function(e){return e=createCallback(e),this.each((function(t,r){return!!e(t,r)}))},Sequence.prototype.all=function(e){return this.every(e)},Sequence.prototype.some=function(e){e=createCallback(e,!0);var t=!1;return this.each((function(r){if(e(r))return t=!0,!1})),t},Sequence.prototype.any=function(e){return this.some(e)},Sequence.prototype.none=function(e){return!this.any(e)},Sequence.prototype.isEmpty=function(){return!this.any()},Sequence.prototype.indexOf=function(e,t){var r=t||Lazy.equality,n=-1;return this.each((function(t,i){if(r(t,e))return n=i,!1})),n},Sequence.prototype.lastIndexOf=function(e,t){var r=this.getIndex().reverse(),n=r.indexOf(e,t);return-1!==n&&(n=r.length()-n-1),n},Sequence.prototype.sortedIndex=function(e){var t,r=this.getIndex(),n=0,i=r.length();while(n<i)t=n+i>>>1,-1===compare(r.get(t),e)?n=t+1:i=t;return n},Sequence.prototype.contains=function(e,t){return-1!==this.indexOf(e,t)},Sequence.prototype.reduce=function(e,t){if(arguments.length<2)return this.tail().reduce(e,this.head());var r=this.each((function(r,n){t=e(t,r,n)}));return r instanceof AsyncHandle?r.then((function(){return t})):t},Sequence.prototype.inject=Sequence.prototype.foldl=function(e,t){return this.reduce(e,t)},Sequence.prototype.reduceRight=function(e,t){if(arguments.length<2)return this.initial(1).reduceRight(e,this.last());var r=this.getIndex(),n=r.length()-1;return r.reverse().reduce((function(t,r){return e(t,r,n--)}),t)},Sequence.prototype.foldr=function(e,t){return this.reduceRight(e,t)},Sequence.prototype.consecutive=function(e){return new ConsecutiveSequence(this,e)},ConsecutiveSequence.prototype=Object.create(Sequence.prototype),ConsecutiveSequence.prototype.each=function(e){var t=this.count,r=new Queue(t),n=this.parent.map((function(e){if(r.add(e).count===t)return r.toArray()}));return n.compact().each(e)},Sequence.prototype.chunk=function(e){if(e<1)throw new Error("You must specify a positive chunk size.");return new ChunkedSequence(this,e)},ChunkedSequence.prototype=Object.create(Sequence.prototype),ChunkedSequence.prototype.getIterator=function(){return new ChunkedIterator(this.parent,this.chunkSize)},ChunkedIterator.prototype.current=function(){return this.currentChunk},ChunkedIterator.prototype.moveNext=function(){var e=this.iterator,t=this.size,r=[];while(r.length<t&&e.moveNext())r.push(e.current());return 0!==r.length&&(this.currentChunk=r,!0)},Sequence.prototype.tap=function(e){return new TappedSequence(this,e)},TappedSequence.prototype=Object.create(Sequence.prototype),TappedSequence.prototype.each=function(e){var t=this.callback;return this.parent.each((function(r,n){return t(r,n),e(r,n)}))},Sequence.prototype.find=function(e){return this.filter(e).first()},Sequence.prototype.detect=function(e){return this.find(e)},Sequence.prototype.min=function(e){return"undefined"!==typeof e?this.minBy(e):this.reduce((function(e,t,r){return"undefined"===typeof e||t<e?t:e}))},Sequence.prototype.minBy=function(e){return e=createCallback(e),this.reduce((function(t,r){return e(r)<e(t)?r:t}))},Sequence.prototype.max=function(e){return"undefined"!==typeof e?this.maxBy(e):this.reduce((function(e,t,r){return"undefined"===typeof e||t>e?t:e}))},Sequence.prototype.maxBy=function(e){return e=createCallback(e),this.reduce((function(t,r){return e(r)>e(t)?r:t}))},Sequence.prototype.sum=function(e){return"undefined"!==typeof e?this.sumBy(e):this.reduce((function(e,t){return e+t}),0)},Sequence.prototype.sumBy=function(e){return e=createCallback(e),this.reduce((function(t,r){return t+e(r)}),0)},Sequence.prototype.join=function(e){e="undefined"===typeof e?",":String(e);var t=-1;return this.reduce((function(r,n){return++t>0&&(r+=e),r+n}),"")},Sequence.prototype.toString=function(e){return this.join(e)},Sequence.prototype.async=function(e){return new AsyncSequence(this,e)},SimpleIntersectionSequence.prototype=Object.create(Sequence.prototype),SimpleIntersectionSequence.prototype.eachMemoizerCache=function(e){var t=new UniqueMemoizer(Lazy(this.array).getIterator()),r=0;return this.parent.uniq().each((function(n){if(t.contains(n))return e(n,r++)}))},SimpleIntersectionSequence.prototype.eachArrayCache=function(e){var t=this.array,r=arrayContains,n=0;return this.parent.uniq().each((function(i){if(r(t,i))return e(i,n++)}))},SimpleZippedSequence.prototype=Object.create(Sequence.prototype),SimpleZippedSequence.prototype.each=function(e){var t=this.array,r=-1,n=this.parent.each((function(n){return++r,e([n,t[r]],r)}));if(!n)return!1;while(++r<t.length)if(!1===e([void 0,t[r]],r))return!1;return!0},ArrayLikeSequence.prototype=Object.create(Sequence.prototype),ArrayLikeSequence.define=function(e,t){if(!t||"function"!==typeof t.get)throw new Error("A custom array-like sequence must implement *at least* get!");return defineSequenceType(ArrayLikeSequence,e,t)},ArrayLikeSequence.prototype.get=function(e){return this.parent.get(e)},ArrayLikeSequence.prototype.length=function(){return this.parent.length()},ArrayLikeSequence.prototype.getIndex=function(){return this},ArrayLikeSequence.prototype.getIterator=function(){return new IndexedIterator(this)},IndexedIterator.prototype.current=function(){return this.sequence.get(this.index)},IndexedIterator.prototype.moveNext=function(){return!(this.index>=this.sequence.length()-1)&&(++this.index,!0)},ArrayLikeSequence.prototype.each=function(e){var t=this.length(),r=-1;while(++r<t)if(!1===e(this.get(r),r))return!1;return!0},ArrayLikeSequence.prototype.push=function(e){return this.concat([e])},ArrayLikeSequence.prototype.pop=function(){return this.initial()},ArrayLikeSequence.prototype.unshift=function(e){return Lazy([e]).concat(this)},ArrayLikeSequence.prototype.shift=function(){return this.drop()},ArrayLikeSequence.prototype.slice=function(e,t){var r=this.length();e<0&&(e=r+e);var n=this.drop(e);return"number"===typeof t&&(t<0&&(t=r+t),n=n.take(t-e)),n},ArrayLikeSequence.prototype.map=function(e){return new IndexedMappedSequence(this,createCallback(e))},IndexedMappedSequence.prototype=Object.create(ArrayLikeSequence.prototype),IndexedMappedSequence.prototype.get=function(e){if(!(e<0||e>=this.parent.length()))return this.mapFn(this.parent.get(e),e)},ArrayLikeSequence.prototype.filter=function(e){return new IndexedFilteredSequence(this,createCallback(e))},IndexedFilteredSequence.prototype=Object.create(FilteredSequence.prototype),IndexedFilteredSequence.prototype.each=function(e){var t,r=this.parent,n=this.filterFn,i=this.parent.length(),s=-1,o=0;while(++s<i)if(t=r.get(s),n(t,s)&&!1===e(t,o++))return!1;return!0},ArrayLikeSequence.prototype.reverse=function(){return new IndexedReversedSequence(this)},IndexedReversedSequence.prototype=Object.create(ArrayLikeSequence.prototype),IndexedReversedSequence.prototype.get=function(e){return this.parent.get(this.length()-e-1)},ArrayLikeSequence.prototype.first=function(e){return"undefined"===typeof e?this.get(0):new IndexedTakeSequence(this,e)},IndexedTakeSequence.prototype=Object.create(ArrayLikeSequence.prototype),IndexedTakeSequence.prototype.length=function(){var e=this.parent.length();return this.count<=e?this.count:e},ArrayLikeSequence.prototype.rest=function(e){return new IndexedDropSequence(this,e)},IndexedDropSequence.prototype=Object.create(ArrayLikeSequence.prototype),IndexedDropSequence.prototype.get=function(e){return this.parent.get(this.count+e)},IndexedDropSequence.prototype.length=function(){var e=this.parent.length();return this.count<=e?e-this.count:0},ArrayLikeSequence.prototype.concat=function(e){return 1===arguments.length&&isArray(arguments[0])?new IndexedConcatenatedSequence(this,e):Sequence.prototype.concat.apply(this,arguments)},IndexedConcatenatedSequence.prototype=Object.create(ArrayLikeSequence.prototype),IndexedConcatenatedSequence.prototype.get=function(e){var t=this.parent.length();return e<t?this.parent.get(e):this.other[e-t]},IndexedConcatenatedSequence.prototype.length=function(){return this.parent.length()+this.other.length},ArrayLikeSequence.prototype.uniq=function(e){return new IndexedUniqueSequence(this,createCallback(e))},IndexedUniqueSequence.prototype=Object.create(Sequence.prototype),IndexedUniqueSequence.prototype.eachArrayCache=function(e){var t,r,n=this.parent,i=this.keyFn,s=n.length(),o=[],a=arrayContains,c=-1,d=0;while(++c<s)if(r=n.get(c),t=i(r),!a(o,t)&&(o.push(t),!1===e(r,d++)))return!1},IndexedUniqueSequence.prototype.eachSetCache=UniqueSequence.prototype.each,MemoizedSequence.prototype=Object.create(Sequence.prototype),MemoizedSequence.prototype.getParentIterator=function(){return this.iterator||(this.iterator=this.parent.getIterator()),this.iterator},MemoizedSequence.prototype.getIterator=function(){return new Memoizer(this.memo,this.getParentIterator())},MemoizedSequence.prototype.iterateTo=function(e){var t=this.memo,r=this.getParentIterator();while(e>=t.length){if(!r.moveNext())return this.complete=!0,!1;t.push(r.current())}return!0},MemoizedSequence.prototype.get=function(e){var t=this.memo;return e<t.length||this.iterateTo(e)?t[e]:void 0},MemoizedSequence.prototype.length=function(){return this.complete||this.iterateTo(1/0),this.memo.length},MemoizedSequence.prototype.slice=function(e,t){return this.complete||this.iterateTo(t),Lazy(this.memo.slice(e,t))},MemoizedSequence.prototype.toArray=function(){return this.complete||this.iterateTo(1/0),this.memo.slice(0)},ArrayWrapper.prototype=Object.create(ArrayLikeSequence.prototype),ArrayWrapper.prototype.root=function(){return this},ArrayWrapper.prototype.isAsync=function(){return!1},ArrayWrapper.prototype.get=function(e){return this.source[e]},ArrayWrapper.prototype.length=function(){return this.source.length},ArrayWrapper.prototype.each=function(e){return forEach(this.source,e)},ArrayWrapper.prototype.map=function(e){return new MappedArrayWrapper(this,createCallback(e))},ArrayWrapper.prototype.filter=function(e){return new FilteredArrayWrapper(this,createCallback(e))},ArrayWrapper.prototype.uniq=function(e){return new UniqueArrayWrapper(this,e)},ArrayWrapper.prototype.concat=function(e){return 1===arguments.length&&isArray(arguments[0])?new ConcatArrayWrapper(this,e):ArrayLikeSequence.prototype.concat.apply(this,arguments)},ArrayWrapper.prototype.toArray=function(){return this.source.slice(0)},MappedArrayWrapper.prototype=Object.create(ArrayLikeSequence.prototype),MappedArrayWrapper.prototype.get=function(e){var t=this.parent.source;if(!(e<0||e>=t.length))return this.mapFn(t[e])},MappedArrayWrapper.prototype.length=function(){return this.parent.source.length},MappedArrayWrapper.prototype.each=function(e){var t=this.parent.source,r=t.length,n=this.mapFn,i=-1;while(++i<r)if(!1===e(n(t[i],i),i))return!1;return!0},FilteredArrayWrapper.prototype=Object.create(FilteredSequence.prototype),FilteredArrayWrapper.prototype.each=function(e){var t,r=this.parent.source,n=this.filterFn,i=r.length,s=-1,o=0;while(++s<i)if(t=r[s],n(t,s)&&!1===e(t,o++))return!1;return!0},UniqueArrayWrapper.prototype=Object.create(Sequence.prototype),UniqueArrayWrapper.prototype.eachNoCache=function(e){var t,r=this.parent.source,n=this.keyFn,i=r.length,s=arrayContainsBefore,o=-1,a=0;while(++o<i)if(t=r[o],!s(r,t,o,n)&&!1===e(t,a++))return!1;return!0},UniqueArrayWrapper.prototype.eachArrayCache=function(e){var t,r,n=this.parent.source,i=this.keyFn,s=n.length,o=[],a=arrayContains,c=-1,d=0;if(i){i=createCallback(i);while(++c<s)if(r=n[c],t=i(r),!a(o,t)&&(o.push(t),!1===e(r,d++)))return!1}else while(++c<s)if(r=n[c],!a(o,r)&&(o.push(r),!1===e(r,d++)))return!1;return!0},UniqueArrayWrapper.prototype.eachSetCache=UniqueSequence.prototype.each,ConcatArrayWrapper.prototype=Object.create(ArrayLikeSequence.prototype),ConcatArrayWrapper.prototype.get=function(e){var t=this.parent.source,r=t.length;return e<r?t[e]:this.other[e-r]},ConcatArrayWrapper.prototype.length=function(){return this.parent.source.length+this.other.length},ConcatArrayWrapper.prototype.each=function(e){var t=this.parent.source,r=t.length,n=this.other,i=n.length,s=0,o=-1;while(++o<r)if(!1===e(t[o],s++))return!1;o=-1;while(++o<i)if(!1===e(n[o],s++))return!1;return!0},ObjectLikeSequence.prototype=Object.create(Sequence.prototype),ObjectLikeSequence.define=function(e,t){if(!t||"function"!==typeof t.each)throw new Error("A custom object-like sequence must implement *at least* each!");return defineSequenceType(ObjectLikeSequence,e,t)},ObjectLikeSequence.prototype.value=function(){return this.toObject()},ObjectLikeSequence.prototype.get=function(e){var t=this.pairs().find((function(t){return t[0]===e}));return t?t[1]:void 0},ObjectLikeSequence.prototype.keys=function(){return new KeySequence(this)},KeySequence.prototype=Object.create(Sequence.prototype),KeySequence.prototype.each=function(e){var t=-1;return this.parent.each((function(r,n){return e(n,++t)}))},ObjectLikeSequence.prototype.values=function(){return new ValuesSequence(this)},ValuesSequence.prototype=Object.create(Sequence.prototype),ValuesSequence.prototype.each=function(e){var t=-1;return this.parent.each((function(r,n){return e(r,++t)}))},ObjectLikeSequence.prototype.async=function(){throw new Error("An ObjectLikeSequence does not support asynchronous iteration.")},ObjectLikeSequence.prototype.filter=function(e){return new FilteredObjectLikeSequence(this,createCallback(e))},FilteredObjectLikeSequence.prototype=Object.create(ObjectLikeSequence.prototype),FilteredObjectLikeSequence.prototype.each=function(e){var t=this.filterFn;return this.parent.each((function(r,n){if(t(r,n))return e(r,n)}))},ObjectLikeSequence.prototype.reverse=function(){return this},ObjectLikeSequence.prototype.assign=function(e){return new AssignSequence(this,e)},ObjectLikeSequence.prototype.extend=function(e){return this.assign(e)},AssignSequence.prototype=Object.create(ObjectLikeSequence.prototype),AssignSequence.prototype.get=function(e){return e in this.other?this.other[e]:this.parent.get(e)},AssignSequence.prototype.each=function(e){var t=new Set,r=!1;if(Lazy(this.other).each((function(n,i){if(!1===e(n,i))return r=!0,!1;t.add(i)})),!r)return this.parent.each((function(r,n){if(!t.contains(n)&&!1===e(r,n))return!1}))},ObjectLikeSequence.prototype.defaults=function(e){return new DefaultsSequence(this,e)},DefaultsSequence.prototype=Object.create(ObjectLikeSequence.prototype),DefaultsSequence.prototype.get=function(e){var t=this.parent.get(e);return void 0!==t?t:this.defaultValues[e]},DefaultsSequence.prototype.each=function(e){var t=new Set,r=!1;this.parent.each((function(n,i){if(!1===e(n,i))return r=!0,!1;"undefined"!==typeof n&&t.add(i)})),r||Lazy(this.defaultValues).each((function(r,n){if(!t.contains(n)&&!1===e(r,n))return!1}))},ObjectLikeSequence.prototype.invert=function(){return new InvertedSequence(this)},InvertedSequence.prototype=Object.create(ObjectLikeSequence.prototype),InvertedSequence.prototype.each=function(e){this.parent.each((function(t,r){return e(r,t)}))},ObjectLikeSequence.prototype.merge=function(e){var t=arguments.length>1&&"function"===typeof arguments[arguments.length-1]?arrayPop.call(arguments):null;return new MergedSequence(this,arraySlice.call(arguments,0),t)},MergedSequence.prototype=Object.create(ObjectLikeSequence.prototype),MergedSequence.prototype.each=function(e){var t=this.others,r=this.mergeFn||mergeObjects,n={},i=this.parent.each((function(i,s){var o=i;return forEach(t,(function(e){s in e&&(o=r(o,e[s]))})),n[s]=!0,e(o,s)}));if(!1===i)return!1;var s={};return forEach(t,(function(e){for(var t in e)n[t]||(s[t]=r(s[t],e[t]))})),Lazy(s).each(e)},ObjectLikeSequence.prototype.functions=function(){return this.filter((function(e,t){return"function"===typeof e})).map((function(e,t){return t}))},ObjectLikeSequence.prototype.methods=function(){return this.functions()},ObjectLikeSequence.prototype.pick=function(e){return new PickSequence(this,e)},PickSequence.prototype=Object.create(ObjectLikeSequence.prototype),PickSequence.prototype.get=function(e){return arrayContains(this.properties,e)?this.parent.get(e):void 0},PickSequence.prototype.each=function(e){var t=arrayContains,r=this.properties;return this.parent.each((function(n,i){if(t(r,i))return e(n,i)}))},ObjectLikeSequence.prototype.omit=function(e){return new OmitSequence(this,e)},OmitSequence.prototype=Object.create(ObjectLikeSequence.prototype),OmitSequence.prototype.get=function(e){return arrayContains(this.properties,e)?void 0:this.parent.get(e)},OmitSequence.prototype.each=function(e){var t=arrayContains,r=this.properties;return this.parent.each((function(n,i){if(!t(r,i))return e(n,i)}))},ObjectLikeSequence.prototype.pairs=function(){return this.map((function(e,t){return[t,e]}))},ObjectLikeSequence.prototype.toArray=function(){return this.pairs().toArray()},ObjectLikeSequence.prototype.toObject=function(){return this.reduce((function(e,t,r){return e[r]=t,e}),{})},GroupedSequence.prototype=Object.create(ObjectLikeSequence.prototype),GroupedSequence.prototype.each=function(e){var t,r=createCallback(this.keyFn),n=createCallback(this.valFn);return t=this.parent.reduce((function(e,t){var i=r(t),s=n(t);return isArray(e[i])?e[i].push(s):e[i]=[s],e}),{}),transform((function(t){for(var r in t)if(!1===e(t[r],r))return!1;return!0}),t)},IndexedSequence.prototype=Object.create(ObjectLikeSequence.prototype),IndexedSequence.prototype.each=function(e){var t=createCallback(this.keyFn),r=createCallback(this.valFn),n={};return this.parent.each((function(i){var s=t(i),o=r(i);if(!n[s])return n[s]=o,e(o,s)}))},CountedSequence.prototype=Object.create(ObjectLikeSequence.prototype),CountedSequence.prototype.each=function(e){var t=createCallback(this.keyFn),r={};for(var n in this.parent.each((function(e){var n=t(e);r[n]?r[n]+=1:r[n]=1})),r)if(!1===e(r[n],n))return!1;return!0},ObjectLikeSequence.prototype.watch=function(e){throw new Error("You can only call #watch on a directly wrapped object.")},ObjectWrapper.prototype=Object.create(ObjectLikeSequence.prototype),ObjectWrapper.prototype.root=function(){return this},ObjectWrapper.prototype.isAsync=function(){return!1},ObjectWrapper.prototype.get=function(e){return this.source[e]},ObjectWrapper.prototype.each=function(e){var t,r,n=this.source,i=n?Object.keys(n):[],s=i.length;for(r=0;r<s;++r)if(t=i[r],!1===e(n[t],t))return!1;return!0},StringLikeSequence.prototype=Object.create(ArrayLikeSequence.prototype),StringLikeSequence.define=function(e,t){if(!t||"function"!==typeof t.get)throw new Error("A custom string-like sequence must implement *at least* get!");return defineSequenceType(StringLikeSequence,e,t)},StringLikeSequence.prototype.value=function(){return this.toString()},StringLikeSequence.prototype.getIterator=function(){return new CharIterator(this)},CharIterator.prototype.current=function(){return this.source.charAt(this.index)},CharIterator.prototype.moveNext=function(){return++this.index<this.source.length()},StringLikeSequence.prototype.charAt=function(e){return this.get(e)},StringLikeSequence.prototype.charCodeAt=function(e){var t=this.charAt(e);return t?t.charCodeAt(0):NaN},StringLikeSequence.prototype.substring=function(e,t){return new StringSegment(this,e,t)},StringSegment.prototype=Object.create(StringLikeSequence.prototype),StringSegment.prototype.get=function(e){return this.parent.get(e+this.start)},StringSegment.prototype.length=function(){return("number"===typeof this.stop?this.stop:this.parent.length())-this.start},StringLikeSequence.prototype.first=function(e){return"undefined"===typeof e?this.charAt(0):this.substring(0,e)},StringLikeSequence.prototype.last=function(e){return"undefined"===typeof e?this.charAt(this.length()-1):this.substring(this.length()-e)},StringLikeSequence.prototype.drop=function(e){return this.substring(e)},StringLikeSequence.prototype.indexOf=function(e,t){return this.toString().indexOf(e,t)},StringLikeSequence.prototype.lastIndexOf=function(e,t){return this.toString().lastIndexOf(e,t)},StringLikeSequence.prototype.contains=function(e){return-1!==this.indexOf(e)},StringLikeSequence.prototype.endsWith=function(e){return this.substring(this.length()-e.length).toString()===e},StringLikeSequence.prototype.startsWith=function(e){return this.substring(0,e.length).toString()===e},StringLikeSequence.prototype.toUpperCase=function(){return this.mapString((function(e){return e.toUpperCase()}))},StringLikeSequence.prototype.toLowerCase=function(){return this.mapString((function(e){return e.toLowerCase()}))},StringLikeSequence.prototype.mapString=function(e){return new MappedStringLikeSequence(this,e)},MappedStringLikeSequence.prototype=Object.create(StringLikeSequence.prototype),MappedStringLikeSequence.prototype.get=IndexedMappedSequence.prototype.get,MappedStringLikeSequence.prototype.length=IndexedMappedSequence.prototype.length,StringLikeSequence.prototype.reverse=function(){return new ReversedStringLikeSequence(this)},ReversedStringLikeSequence.prototype=Object.create(StringLikeSequence.prototype),ReversedStringLikeSequence.prototype.get=IndexedReversedSequence.prototype.get,ReversedStringLikeSequence.prototype.length=IndexedReversedSequence.prototype.length,StringLikeSequence.prototype.toString=function(){return this.join("")},StringLikeSequence.prototype.match=function(e){return new StringMatchSequence(this,e)},StringMatchSequence.prototype=Object.create(Sequence.prototype),StringMatchSequence.prototype.getIterator=function(){return new StringMatchIterator(this.parent.toString(),this.pattern)},StringMatchIterator.prototype.current=function(){return this.match[0]},StringMatchIterator.prototype.moveNext=function(){return!!(this.match=this.pattern.exec(this.source))},StringLikeSequence.prototype.split=function(e){return new SplitStringSequence(this,e)},SplitStringSequence.prototype=Object.create(Sequence.prototype),SplitStringSequence.prototype.getIterator=function(){var e=this.parent.toString();return this.pattern instanceof RegExp?""===this.pattern.source||"(?:)"===this.pattern.source?new CharIterator(e):new SplitWithRegExpIterator(e,this.pattern):""===this.pattern?new CharIterator(e):new SplitWithStringIterator(e,this.pattern)},SplitWithRegExpIterator.prototype.current=function(){return this.source.substring(this.start,this.end)},SplitWithRegExpIterator.prototype.moveNext=function(){if(!this.pattern)return!1;var e=this.pattern.exec(this.source);return e?(this.start=this.nextStart?this.nextStart:0,this.end=e.index,this.nextStart=e.index+e[0].length,!0):!!this.pattern&&(this.start=this.nextStart,this.end=void 0,this.nextStart=void 0,this.pattern=void 0,!0)},SplitWithStringIterator.prototype.current=function(){return this.source.substring(this.leftIndex,this.rightIndex)},SplitWithStringIterator.prototype.moveNext=function(){return this.finished||(this.leftIndex="undefined"!==typeof this.leftIndex?this.rightIndex+this.delimiter.length:0,this.rightIndex=this.source.indexOf(this.delimiter,this.leftIndex)),-1===this.rightIndex?(this.finished=!0,this.rightIndex=void 0,!0):!this.finished},StringWrapper.prototype=Object.create(StringLikeSequence.prototype),StringWrapper.prototype.root=function(){return this},StringWrapper.prototype.isAsync=function(){return!1},StringWrapper.prototype.get=function(e){return this.source.charAt(e)},StringWrapper.prototype.length=function(){return this.source.length},StringWrapper.prototype.toString=function(){return this.source},GeneratedSequence.prototype=Object.create(Sequence.prototype),GeneratedSequence.prototype.isAsync=function(){return!1},GeneratedSequence.prototype.length=function(){return this.fixedLength},GeneratedSequence.prototype.each=function(e){var t=this.get,r=this.fixedLength,n=0;while("undefined"===typeof r||n<r)if(!1===e(t(n),n++))return!1;return!0},GeneratedSequence.prototype.getIterator=function(){return new GeneratedIterator(this)},GeneratedIterator.prototype.current=function(){return this.currentValue},GeneratedIterator.prototype.moveNext=function(){var e=this.sequence;return!("number"===typeof e.fixedLength&&this.index>=e.fixedLength)&&(this.currentValue=e.get(this.index++),!0)},AsyncSequence.prototype=Object.create(Sequence.prototype),AsyncSequence.prototype.isAsync=function(){return!0},AsyncSequence.prototype.getIterator=function(){throw new Error("An AsyncSequence does not support synchronous iteration.")},AsyncSequence.prototype.each=function(e){var t=this.parent.getIterator(),r=this.onNextCallback,n=this.cancelCallback,i=0,s=new AsyncHandle((function(){o&&n(o)})),o=r((function n(){o=null;try{t.moveNext()&&!1!==e(t.current(),i++)?o=r(n):s._resolve()}catch(a){s._reject(a)}}));return s};var PENDING=1,RESOLVED=2,REJECTED=3;function resolve(e,t){if(e!==t)if(t instanceof AsyncHandle)t.then((function(t){resolve(e,t)}),(function(t){e._reject(t)}));else{var r;try{r=/function|object/.test(typeof t)&&null!=t&&t.then}catch(i){return void e._reject(i)}var n=PENDING;if("function"!==typeof r)e._resolve(t);else try{r.call(t,(function(t){n===PENDING&&(n=RESOLVED,resolve(e,t))}),(function(t){n===PENDING&&(n=REJECTED,e._reject(t))}))}catch(i){if(n!==PENDING)return;e._reject(i)}}else e._reject(new TypeError("Cannot resolve a promise to itself"))}function consumeListeners(e,t,r){r||(r=getOnNextCallback()),r((function(){e.length>0&&(e.shift()(t),consumeListeners(e,t,r))}))}function getOnNextCallback(e){return"undefined"===typeof e&&"function"===typeof setImmediate?setImmediate:(e=e||0,function(t){return setTimeout(t,e)})}function getCancelCallback(e){return"undefined"===typeof e&&"function"===typeof clearImmediate?clearImmediate:clearTimeout}function transform(e,t){return t instanceof AsyncHandle?t.then((function(){e(t)})):e(t)}function WatchedPropertySequence(e,t){this.listeners=[],t?isArray(t)||(t=[t]):t=Lazy(e).keys().toArray();var r=this.listeners,n=0;Lazy(t).each((function(t){var i=e[t];Object.defineProperty(e,t,{get:function(){return i},set:function(e){for(var s=r.length-1;s>=0;--s)!1===r[s]({property:t,value:e},n)&&r.splice(s,1);i=e,++n}})}))}function StreamLikeSequence(){}function SplitStreamSequence(e,t){this.parent=e,this.delimiter=t,this.each=this.getEachForDelimiter(t)}function MatchedStreamSequence(e,t){this.parent=e,this.pattern=cloneRegex(t)}AsyncHandle.prototype.then=function(e,t){var r=new AsyncHandle(this.cancelFn);return this.resolveListeners.push((function(t){try{if("function"!==typeof e)return void resolve(r,t);resolve(r,e(t))}catch(n){r._reject(n)}})),this.rejectListeners.push((function(e){try{if("function"!==typeof t)return void r._reject(e);resolve(r,t(e))}catch(n){r._reject(n)}})),this.state===RESOLVED&&this._resolve(this.value),this.state===REJECTED&&this._reject(this.reason),r},AsyncHandle.prototype._resolve=function(e){this.state!==REJECTED&&(this.state===PENDING&&(this.state=RESOLVED,this.value=e),consumeListeners(this.resolveListeners,this.value))},AsyncHandle.prototype._reject=function(e){this.state!==RESOLVED&&(this.state===PENDING&&(this.state=REJECTED,this.reason=e),consumeListeners(this.rejectListeners,this.reason))},AsyncHandle.prototype.cancel=function(){this.cancelFn&&(this.cancelFn(),this.cancelFn=null,this._resolve(!1))},AsyncHandle.prototype.onComplete=function(e){return this.resolveListeners.push(e),this},AsyncHandle.prototype.onError=function(e){return this.rejectListeners.push(e),this},AsyncSequence.prototype.reverse=function(){return this.parent.reverse().async()},AsyncSequence.prototype.find=function(e){var t,r=this.each((function(r,n){if(e(r,n))return t=r,!1}));return r.then((function(){return t}))},AsyncSequence.prototype.indexOf=function(e){var t=-1,r=this.each((function(r,n){if(r===e)return t=n,!1}));return r.then((function(){return t}))},AsyncSequence.prototype.contains=function(e){var t=!1,r=this.each((function(r){if(r===e)return t=!0,!1}));return r.then((function(){return t}))},AsyncSequence.prototype.async=function(){return this},ObjectWrapper.prototype.watch=function(e){return new WatchedPropertySequence(this.source,e)},WatchedPropertySequence.prototype=Object.create(AsyncSequence.prototype),WatchedPropertySequence.prototype.each=function(e){this.listeners.push(e)},StreamLikeSequence.prototype=Object.create(AsyncSequence.prototype),StreamLikeSequence.prototype.isAsync=function(){return!0},StreamLikeSequence.prototype.split=function(e){return new SplitStreamSequence(this,e)},SplitStreamSequence.prototype=Object.create(Sequence.prototype),SplitStreamSequence.prototype.getEachForDelimiter=function(e){return e instanceof RegExp?this.regexEach:this.stringEach},SplitStreamSequence.prototype.regexEach=function(e){var t,r=cloneRegex(this.delimiter),n="",i=0,s=0,o=this.parent.each((function(o){var a;n+=o;while(a=r.exec(n)){if(t=a.index,!1===e(n.substring(i,t),s++))return!1;i=t+a[0].length}n=n.substring(i),i=0}));return o.onComplete((function(){n.length>0&&e(n,s++)})),o},SplitStreamSequence.prototype.stringEach=function(e){var t=this.delimiter,r=0,n="",i=this.parent.each((function(i){var s;n+=i;while((s=n.indexOf(t))>=0){var o=n.substr(0,s);if(n=n.substr(s+t.length),!1===e(o,r++))return!1}return!0}));return i.onComplete((function(){e(n,r++)})),i},StreamLikeSequence.prototype.lines=function(){return this.split("\n")},StreamLikeSequence.prototype.match=function(e){return new MatchedStreamSequence(this,e)},MatchedStreamSequence.prototype=Object.create(AsyncSequence.prototype),MatchedStreamSequence.prototype.each=function(e){var t=this.pattern,r=!1,n=0;return this.parent.each((function(i){return Lazy(i).match(t).each((function(t){if(!1===e(t,n++))return r=!0,!1})),!r}))},Lazy.createWrapper=function(e){var t=function(){this.listeners=[]};return t.prototype=Object.create(StreamLikeSequence.prototype),t.prototype.each=function(e){this.listeners.push(e)},t.prototype.emit=function(e){for(var t=this.listeners,r=t.length,n=r-1;n>=0;--n)!1===t[n](e)&&t.splice(n,1)},function(){var r=new t;return e.apply(r,arguments),r}},Lazy.generate=function(e,t){return new GeneratedSequence(e,t)},Lazy.range=function(){var e=arguments.length>1?arguments[0]:0,t=arguments.length>1?arguments[1]:arguments[0],r=arguments.length>2&&arguments[2];return!1===r&&(r=t>e?1:-1),0===r?Lazy([]):Lazy.generate((function(t){return e+r*t})).take(Math.ceil((t-e)/r))},Lazy.repeat=function(e,t){return Lazy.generate((function(){return e}),t)},Lazy.Sequence=Sequence,Lazy.ArrayLikeSequence=ArrayLikeSequence,Lazy.ObjectLikeSequence=ObjectLikeSequence,Lazy.StringLikeSequence=StringLikeSequence,Lazy.StreamLikeSequence=StreamLikeSequence,Lazy.GeneratedSequence=GeneratedSequence,Lazy.AsyncSequence=AsyncSequence,Lazy.AsyncHandle=AsyncHandle,Lazy.clone=function(e){return Lazy(e).value()},Lazy.deprecate=function(e,t){return function(){return console.warn(e),t.apply(this,arguments)}};var isArray=Array.isArray||function(e){return e instanceof Array},arrayPop=Array.prototype.pop,arraySlice=Array.prototype.slice;function curry(e,t){function r(n){return n.length<t?function(){return r(n.concat(arraySlice.call(arguments,0)))}:e.apply(null,n)}return t||(t=e.length),r([])}function curryRight(e,t){function r(n){return n.length<t?function(){return r(arraySlice.call(arguments,0).concat(n))}:e.apply(null,n)}return t||(t=e.length),r([])}function createCallback(e,t){switch(typeof e){case"function":return e;case"string":return function(t){return t[e]};case"object":return function(t){return Lazy(e).all((function(e,r){return t[r]===e}))};case"undefined":return t?function(){return t}:Lazy.identity;default:throw new Error("Don't know how to make a callback from a "+typeof e+"!")}}function createComparator(e){return e?(e=createCallback(e),function(t,r){return compare(e(t),e(r))}):compare}function reverseArguments(e){return function(t,r){return e(r,t)}}function createSet(e){var t=new Set;return Lazy(e||[]).flatten().each((function(e){t.add(e)})),t}function compare(e,t){return e===t?0:e>t?1:-1}function forEach(e,t){var r=-1,n=e.length;while(++r<n)if(!1===t(e[r],r))return!1;return!0}function getFirst(e){var t;return e.each((function(e){return t=e,!1})),t}function arrayContains(e,t){var r=-1,n=e.length;if(t!==t){while(++r<n)if(e[r]!==e[r])return!0;return!1}while(++r<n)if(e[r]===t)return!0;return!1}function arrayContainsBefore(e,t,r,n){var i=-1;if(n){n=createCallback(n);while(++i<r)if(n(e[i])===n(t))return!0}else while(++i<r)if(e[i]===t)return!0;return!1}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function cloneRegex(pattern){return eval(pattern+(pattern.global?"":"g"))}function Set(){this.table={},this.objects=[]}function Queue(e){this.contents=new Array(e),this.start=0,this.count=0}function defineSequenceType(e,t,r){var n=function(){};for(var i in n.prototype=new e,r)n.prototype[i]=r[i];for(var s=function(){var e=new n;return e.parent=this,e.init&&e.init.apply(e,arguments),e},o="string"===typeof t?[t]:t,a=0;a<o.length;++a)e.prototype[o[a]]=s;return n}return Lazy.curry=curry,Lazy.curryRight=curryRight,Lazy.createCallback=createCallback,Lazy.createComparator=createComparator,Set.prototype.add=function(e){var t,r=this.table,n=typeof e;switch(n){case"number":case"boolean":case"undefined":return!r[e]&&(r[e]=!0,!0);case"string":switch(e.charAt(0)){case"_":case"f":case"t":case"c":case"u":case"@":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"N":e="@"+e}return!r[e]&&(r[e]=!0,!0);default:return t=this.objects,!arrayContains(t,e)&&(t.push(e),!0)}},Set.prototype.contains=function(e){var t=typeof e;switch(t){case"number":case"boolean":case"undefined":return!!this.table[e];case"string":switch(e.charAt(0)){case"_":case"f":case"t":case"c":case"u":case"@":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"N":e="@"+e}return!!this.table[e];default:return arrayContains(this.objects,e)}},Queue.prototype.add=function(e){var t=this.contents,r=t.length,n=this.start;return this.count===r?(t[n]=e,this.start=(n+1)%r):t[this.count++]=e,this},Queue.prototype.toArray=function(){var e=this.contents,t=this.start,r=this.count,n=e.slice(t,t+r);return n.length<r&&(n=n.concat(e.slice(0,r-n.length))),n},Lazy}))},"93be":function(e,t,r){var n=r("95e8"),i=r("f0bc");t.write=i,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},"94ca":function(e,t,r){var n=r("d039"),i=r("1626"),s=/#|\.prototype\./,o=function(e,t){var r=c[a(e)];return r==u||r!=d&&(i(t)?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=o.data={},d=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},"95e8":function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var s=0;s<r.length;s+=1)null!=e[s+1]&&(t[r[s]]=n(e[s+1]))},s=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var s=e.push?{}:n?t[e.name]:t;i(r.match(e.reg),s,e.names,e.name),e.push&&t[e.push].push(s)},o=r("3baa"),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var a=0;a<(o[t]||[]).length;a+=1){var c=o[t][a];if(c.reg.test(i))return s(c,n,i)}})),t.media=r,t};var c=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(c,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},"96cf":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(L){c=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,s=Object.create(i.prototype),o=new j(n||[]);return s._invoke=x(e,r,o),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(L){return{type:"throw",arg:L}}}e.wrap=d;var p="suspendedStart",l="suspendedYield",f="executing",h="completed",m={};function g(){}function y(){}function v(){}var b={};c(b,s,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(T([])));S&&S!==r&&n.call(S,s)&&(b=S);var w=v.prototype=g.prototype=Object.create(b);function R(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(i,s,o,a){var c=u(e[i],e,s);if("throw"!==c.type){var d=c.arg,p=d.value;return p&&"object"===typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(p).then((function(e){d.value=e,o(d)}),(function(e){return r("throw",e,o,a)}))}a(c.arg)}var i;function s(e,n){function s(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(s,s):s()}this._invoke=s}function x(e,t,r){var n=p;return function(i,s){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw s;return E()}r.method=i,r.arg=s;while(1){var o=r.delegate;if(o){var a=k(o,r);if(a){if(a===m)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=u(e,t,r);if("normal"===c.type){if(n=r.done?h:l,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=u(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(e){if(e){var r=e[s];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){while(++i<e.length)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:E}}function E(){return{value:t,done:!0}}return y.prototype=v,c(w,"constructor",v),c(v,"constructor",y),y.displayName=c(v,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,a,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},R(O.prototype),c(O.prototype,o,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var o=new O(d(t,r,n,i),s);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},R(w),c(w,a,"Generator"),c(w,s,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),d=n.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},9861:function(e,t,r){"use strict";r("e260");var n=r("23e7"),i=r("d066"),s=r("0d3b"),o=r("6eeb"),a=r("e2cc"),c=r("d44e"),d=r("9ed3"),u=r("69f3"),p=r("19aa"),l=r("1626"),f=r("1a2d"),h=r("0366"),m=r("f5df"),g=r("825a"),y=r("861d"),v=r("577e"),b=r("7c73"),_=r("5c6c"),S=r("9a1f"),w=r("35a1"),R=r("b622"),O=i("fetch"),x=i("Request"),k=x&&x.prototype,P=i("Headers"),C=R("iterator"),j="URLSearchParams",T=j+"Iterator",E=u.set,L=u.getterFor(j),D=u.getterFor(T),I=/\+/g,M=Array(4),A=function(e){return M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},q=function(e){try{return decodeURIComponent(e)}catch(t){return e}},F=function(e){var t=e.replace(I," "),r=4;try{return decodeURIComponent(t)}catch(n){while(r)t=t.replace(A(r--),q);return t}},N=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},z=function(e){return B[e]},U=function(e){return encodeURIComponent(e).replace(N,z)},W=function(e,t){if(t){var r,n,i=t.split("&"),s=0;while(s<i.length)r=i[s++],r.length&&(n=r.split("="),e.push({key:F(n.shift()),value:F(n.join("="))}))}},G=function(e){this.entries.length=0,W(this.entries,e)},$=function(e,t){if(e<t)throw TypeError("Not enough arguments")},V=d((function(e,t){E(this,{type:T,iterator:S(L(e).entries),kind:t})}),"Iterator",(function(){var e=D(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),K=function(){p(this,K,j);var e,t,r,n,i,s,o,a,c,d=arguments.length>0?arguments[0]:void 0,u=this,l=[];if(E(u,{type:j,entries:l,updateURL:function(){},updateSearchParams:G}),void 0!==d)if(y(d))if(e=w(d),e){t=S(d,e),r=t.next;while(!(n=r.call(t)).done){if(i=S(g(n.value)),s=i.next,(o=s.call(i)).done||(a=s.call(i)).done||!s.call(i).done)throw TypeError("Expected sequence with length 2");l.push({key:v(o.value),value:v(a.value)})}}else for(c in d)f(d,c)&&l.push({key:c,value:v(d[c])});else W(l,"string"===typeof d?"?"===d.charAt(0)?d.slice(1):d:v(d))},H=K.prototype;if(a(H,{append:function(e,t){$(arguments.length,2);var r=L(this);r.entries.push({key:v(e),value:v(t)}),r.updateURL()},delete:function(e){$(arguments.length,1);var t=L(this),r=t.entries,n=v(e),i=0;while(i<r.length)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){$(arguments.length,1);for(var t=L(this).entries,r=v(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){$(arguments.length,1);for(var t=L(this).entries,r=v(e),n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){$(arguments.length,1);var t=L(this).entries,r=v(e),n=0;while(n<t.length)if(t[n++].key===r)return!0;return!1},set:function(e,t){$(arguments.length,1);for(var r,n=L(this),i=n.entries,s=!1,o=v(e),a=v(t),c=0;c<i.length;c++)r=i[c],r.key===o&&(s?i.splice(c--,1):(s=!0,r.value=a));s||i.push({key:o,value:a}),n.updateURL()},sort:function(){var e,t,r,n=L(this),i=n.entries,s=i.slice();for(i.length=0,r=0;r<s.length;r++){for(e=s[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){var t,r=L(this).entries,n=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<r.length)t=r[i++],n(t.value,t.key,this)},keys:function(){return new V(this,"keys")},values:function(){return new V(this,"values")},entries:function(){return new V(this,"entries")}},{enumerable:!0}),o(H,C,H.entries,{name:"entries"}),o(H,"toString",(function(){var e,t=L(this).entries,r=[],n=0;while(n<t.length)e=t[n++],r.push(U(e.key)+"="+U(e.value));return r.join("&")}),{enumerable:!0}),c(K,j),n({global:!0,forced:!s},{URLSearchParams:K}),!s&&l(P)){var Q=function(e){if(y(e)){var t,r=e.body;if(m(r)===j)return t=e.headers?new P(e.headers):new P,t.has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(e,{body:_(0,String(r)),headers:_(0,t)})}return e};if(l(O)&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return O(e,arguments.length>1?Q(arguments[1]):{})}}),l(x)){var J=function(e){return p(this,J,"Request"),new x(e,arguments.length>1?Q(arguments[1]):{})};k.constructor=J,J.prototype=k,n({global:!0,forced:!0},{Request:J})}}e.exports={URLSearchParams:K,getState:L}},"99af":function(e,t,r){"use strict";var n=r("23e7"),i=r("d039"),s=r("e8b5"),o=r("861d"),a=r("7b0b"),c=r("07fa"),d=r("8418"),u=r("65f0"),p=r("1dde"),l=r("b622"),f=r("2d00"),h=l("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",y=f>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=p("concat"),b=function(e){if(!o(e))return!1;var t=e[h];return void 0!==t?!!t:s(e)},_=!y||!v;n({target:"Array",proto:!0,forced:_},{concat:function(e){var t,r,n,i,s,o=a(this),p=u(o,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?o:arguments[t],b(s)){if(i=c(s),l+i>m)throw TypeError(g);for(r=0;r<i;r++,l++)r in s&&d(p,l,s[r])}else{if(l>=m)throw TypeError(g);d(p,l++,s)}return p.length=l,p}})},"9a1f":function(e,t,r){var n=r("59ed"),i=r("825a"),s=r("35a1");e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(n(r))return i(r.call(e));throw TypeError(String(e)+" is not iterable")}},"9bdd":function(e,t,r){var n=r("825a"),i=r("2a62");e.exports=function(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(o){i(e,"throw",o)}}},"9bf2":function(e,t,r){var n=r("83ab"),i=r("0cfb"),s=r("825a"),o=r("a04b"),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(s(e),t=o(t),s(r),i)try{return a(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"9c0b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidStateError=t.UnsupportedError=void 0;class n extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,n):this.stack=new Error(e).stack}}t.UnsupportedError=n;class i extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,i):this.stack=new Error(e).stack}}t.InvalidStateError=i},"9eb7":function(e,t,r){const n=r("34eb")("h264-profile-level-id");n.log=console.info.bind(console);const i=1,s=2,o=3,a=4,c=5;t.ProfileConstrainedBaseline=i,t.ProfileBaseline=s,t.ProfileMain=o,t.ProfileConstrainedHigh=a,t.ProfileHigh=c;const d=0,u=10,p=11,l=12,f=13,h=20,m=21,g=22,y=30,v=31,b=32,_=40,S=41,w=42,R=50,O=51,x=52;t.Level1_b=d,t.Level1=u,t.Level1_1=p,t.Level1_2=l,t.Level1_3=f,t.Level2=h,t.Level2_1=m,t.Level2_2=g,t.Level3=y,t.Level3_1=v,t.Level3_2=b,t.Level4=_,t.Level4_1=S,t.Level4_2=w,t.Level5=R,t.Level5_1=O,t.Level5_2=x;class k{constructor(e,t){this.profile=e,this.level=t}}t.ProfileLevelId=k;const P=new k(i,v),C=16;class j{constructor(e){this._mask=~L("x",e),this._maskedValue=L("1",e)}isMatch(e){return this._maskedValue===(e&this._mask)}}class T{constructor(e,t,r){this.profile_idc=e,this.profile_iop=t,this.profile=r}}const E=[new T(66,new j("x1xx0000"),i),new T(77,new j("1xxx0000"),i),new T(88,new j("11xx0000"),i),new T(66,new j("x0xx0000"),s),new T(88,new j("10xx0000"),s),new T(77,new j("0x0x0000"),o),new T(100,new j("00000000"),c),new T(100,new j("00001100"),a)];function L(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function D(e,t){return e===d?t!==u&&t!==d:t===d?e!==u:e<t}function I(e,t){return D(e,t)?e:t}function M(e={}){const t=e["level-asymmetry-allowed"];return 1===t||"1"===t}t.parseProfileLevelId=function(e){if("string"!==typeof e||6!==e.length)return null;const t=parseInt(e,16);if(0===t)return null;const r=255&t,i=t>>8&255,s=t>>16&255;let o;switch(r){case p:o=0!==(i&C)?d:p;break;case u:case l:case f:case h:case m:case g:case y:case v:case b:case _:case S:case w:case R:case O:case x:o=r;break;default:return n("parseProfileLevelId() | unrecognized level_idc:%s",r),null}for(const n of E)if(s===n.profile_idc&&n.profile_iop.isMatch(i))return new k(n.profile,o);return n("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){if(e.level==d)switch(e.profile){case i:return"42f00b";case s:return"42100b";case o:return"4d100b";default:return n("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}let t;switch(e.profile){case i:t="42e0";break;case s:t="4200";break;case o:t="4d00";break;case a:t="640c";break;case c:t="6400";break;default:return n("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}let r=e.level.toString(16);return 1===r.length&&(r="0"+r),`${t}${r}`},t.parseSdpProfileLevelId=function(e={}){const r=e["profile-level-id"];return r?t.parseProfileLevelId(r):P},t.isSameProfile=function(e={},r={}){const n=t.parseSdpProfileLevelId(e),i=t.parseSdpProfileLevelId(r);return Boolean(n&&i&&n.profile===i.profile)},t.generateProfileLevelIdForAnswer=function(e={},r={}){if(!e["profile-level-id"]&&!r["profile-level-id"])return n("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;const i=t.parseSdpProfileLevelId(e),s=t.parseSdpProfileLevelId(r);if(!i)throw new TypeError("invalid local_profile_level_id");if(!s)throw new TypeError("invalid remote_profile_level_id");if(i.profile!==s.profile)throw new TypeError("H264 Profile mismatch");const o=M(e)&&M(r),a=i.level,c=s.level,d=I(a,c),u=o?a:d;return n("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",i.profile,u),t.profileLevelIdToString(new k(i.profile,u))}},"9ed3":function(e,t,r){"use strict";var n=r("ae93").IteratorPrototype,i=r("7c73"),s=r("5c6c"),o=r("d44e"),a=r("3f8c"),c=function(){return this};e.exports=function(e,t,r){var d=t+" Iterator";return e.prototype=i(n,{next:s(1,r)}),o(e,d,!1,!0),a[d]=c,e}},"9f7f":function(e,t,r){var n=r("d039"),i=r("da84"),s=i.RegExp;t.UNSUPPORTED_Y=n((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"9ff4":function(e,t,r){"use strict";(function(e){function n(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?e=>!!r[e.toLowerCase()]:e=>!!r[e]}r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return R})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return Z})),r.d(t,"f",(function(){return ee})),r.d(t,"g",(function(){return ie})),r.d(t,"h",(function(){return T})),r.d(t,"i",(function(){return ae})),r.d(t,"j",(function(){return re})),r.d(t,"k",(function(){return D})),r.d(t,"l",(function(){return X})),r.d(t,"m",(function(){return c})),r.d(t,"n",(function(){return ne})),r.d(t,"o",(function(){return I})),r.d(t,"p",(function(){return F})),r.d(t,"q",(function(){return s})),r.d(t,"r",(function(){return g})),r.d(t,"s",(function(){return K})),r.d(t,"t",(function(){return M})),r.d(t,"u",(function(){return j})),r.d(t,"v",(function(){return z})),r.d(t,"w",(function(){return C})),r.d(t,"x",(function(){return V})),r.d(t,"y",(function(){return U})),r.d(t,"z",(function(){return H})),r.d(t,"A",(function(){return y})),r.d(t,"B",(function(){return A})),r.d(t,"C",(function(){return a})),r.d(t,"D",(function(){return N})),r.d(t,"E",(function(){return B})),r.d(t,"F",(function(){return b})),r.d(t,"G",(function(){return _})),r.d(t,"H",(function(){return n})),r.d(t,"I",(function(){return f})),r.d(t,"J",(function(){return d})),r.d(t,"K",(function(){return E})),r.d(t,"L",(function(){return S})),r.d(t,"M",(function(){return te})),r.d(t,"N",(function(){return se})),r.d(t,"O",(function(){return $}));const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=n(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=n(o);function c(e){return!!e||""===e}function d(e){if(I(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=N(n)?l(n):d(n);if(i)for(const e in i)t[e]=i[e]}return t}return N(e)||z(e)?e:void 0}const u=/;(?![^(]*\))/g,p=/:(.+)/;function l(e){const t={};return e.split(u).forEach(e=>{if(e){const r=e.split(p);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function f(e){let t="";if(N(e))t=e;else if(I(e))for(let r=0;r<e.length;r++){const n=f(e[r]);n&&(t+=n+" ")}else if(z(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const h="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",m="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",g=n(h),y=n(m);function v(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=b(e[n],t[n]);return r}function b(e,t){if(e===t)return!0;let r=q(e),n=q(t);if(r||n)return!(!r||!n)&&e.getTime()===t.getTime();if(r=I(e),n=I(t),r||n)return!(!r||!n)&&v(e,t);if(r=z(e),n=z(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const r in e){const n=e.hasOwnProperty(r),i=t.hasOwnProperty(r);if(n&&!i||!n&&i||!b(e[r],t[r]))return!1}}return String(e)===String(t)}function _(e,t){return e.findIndex(e=>b(e,t))}const S=e=>null==e?"":I(e)||z(e)&&(e.toString===W||!F(e.toString))?JSON.stringify(e,w,2):String(e),w=(e,t)=>t&&t.__v_isRef?w(e,t.value):M(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,r])=>(e[t+" =>"]=r,e),{})}:A(t)?{[`Set(${t.size})`]:[...t.values()]}:!z(t)||I(t)||V(t)?t:String(t),R={},O=[],x=()=>{},k=()=>!1,P=/^on[^a-z]/,C=e=>P.test(e),j=e=>e.startsWith("onUpdate:"),T=Object.assign,E=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},L=Object.prototype.hasOwnProperty,D=(e,t)=>L.call(e,t),I=Array.isArray,M=e=>"[object Map]"===G(e),A=e=>"[object Set]"===G(e),q=e=>e instanceof Date,F=e=>"function"===typeof e,N=e=>"string"===typeof e,B=e=>"symbol"===typeof e,z=e=>null!==e&&"object"===typeof e,U=e=>z(e)&&F(e.then)&&F(e.catch),W=Object.prototype.toString,G=e=>W.call(e),$=e=>G(e).slice(8,-1),V=e=>"[object Object]"===G(e),K=e=>N(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,H=n(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Q=e=>{const t=Object.create(null);return r=>{const n=t[r];return n||(t[r]=e(r))}},J=/-(\w)/g,Z=Q(e=>e.replace(J,(e,t)=>t?t.toUpperCase():"")),Y=/\B([A-Z])/g,X=Q(e=>e.replace(Y,"-$1").toLowerCase()),ee=Q(e=>e.charAt(0).toUpperCase()+e.slice(1)),te=Q(e=>e?"on"+ee(e):""),re=(e,t)=>!Object.is(e,t),ne=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},ie=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},se=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let oe;const ae=()=>oe||(oe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{})}).call(this,r("c8ba"))},a04b:function(e,t,r){var n=r("c04e"),i=r("d9b5");e.exports=function(e){var t=n(e,"string");return i(t)?t:String(t)}},a448:function(e,t,r){e.exports=r("6dd6")},a4b4:function(e,t,r){var n=r("342f");e.exports=/web0s(?!.*chrome)/i.test(n)},a4d3:function(e,t,r){"use strict";var n=r("23e7"),i=r("da84"),s=r("d066"),o=r("c430"),a=r("83ab"),c=r("4930"),d=r("d039"),u=r("1a2d"),p=r("e8b5"),l=r("1626"),f=r("861d"),h=r("d9b5"),m=r("825a"),g=r("7b0b"),y=r("fc6a"),v=r("a04b"),b=r("577e"),_=r("5c6c"),S=r("7c73"),w=r("df75"),R=r("241c"),O=r("057f"),x=r("7418"),k=r("06cf"),P=r("9bf2"),C=r("d1e7"),j=r("6eeb"),T=r("5692"),E=r("f772"),L=r("d012"),D=r("90e3"),I=r("b622"),M=r("e538"),A=r("746f"),q=r("d44e"),F=r("69f3"),N=r("b727").forEach,B=E("hidden"),z="Symbol",U="prototype",W=I("toPrimitive"),G=F.set,$=F.getterFor(z),V=Object[U],K=i.Symbol,H=s("JSON","stringify"),Q=k.f,J=P.f,Z=O.f,Y=C.f,X=T("symbols"),ee=T("op-symbols"),te=T("string-to-symbol-registry"),re=T("symbol-to-string-registry"),ne=T("wks"),ie=i.QObject,se=!ie||!ie[U]||!ie[U].findChild,oe=a&&d((function(){return 7!=S(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=Q(V,t);n&&delete V[t],J(e,t,r),n&&e!==V&&J(V,t,n)}:J,ae=function(e,t){var r=X[e]=S(K[U]);return G(r,{type:z,tag:e,description:t}),a||(r.description=t),r},ce=function(e,t,r){e===V&&ce(ee,t,r),m(e);var n=v(t);return m(r),u(X,n)?(r.enumerable?(u(e,B)&&e[B][n]&&(e[B][n]=!1),r=S(r,{enumerable:_(0,!1)})):(u(e,B)||J(e,B,_(1,{})),e[B][n]=!0),oe(e,n,r)):J(e,n,r)},de=function(e,t){m(e);var r=y(t),n=w(r).concat(he(r));return N(n,(function(t){a&&!pe.call(r,t)||ce(e,t,r[t])})),e},ue=function(e,t){return void 0===t?S(e):de(S(e),t)},pe=function(e){var t=v(e),r=Y.call(this,t);return!(this===V&&u(X,t)&&!u(ee,t))&&(!(r||!u(this,t)||!u(X,t)||u(this,B)&&this[B][t])||r)},le=function(e,t){var r=y(e),n=v(t);if(r!==V||!u(X,n)||u(ee,n)){var i=Q(r,n);return!i||!u(X,n)||u(r,B)&&r[B][n]||(i.enumerable=!0),i}},fe=function(e){var t=Z(y(e)),r=[];return N(t,(function(e){u(X,e)||u(L,e)||r.push(e)})),r},he=function(e){var t=e===V,r=Z(t?ee:y(e)),n=[];return N(r,(function(e){!u(X,e)||t&&!u(V,e)||n.push(X[e])})),n};if(c||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,t=D(e),r=function(e){this===V&&r.call(ee,e),u(this,B)&&u(this[B],t)&&(this[B][t]=!1),oe(this,t,_(1,e))};return a&&se&&oe(V,t,{configurable:!0,set:r}),ae(t,e)},j(K[U],"toString",(function(){return $(this).tag})),j(K,"withoutSetter",(function(e){return ae(D(e),e)})),C.f=pe,P.f=ce,k.f=le,R.f=O.f=fe,x.f=he,M.f=function(e){return ae(I(e),e)},a&&(J(K[U],"description",{configurable:!0,get:function(){return $(this).description}}),o||j(V,"propertyIsEnumerable",pe,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),N(w(ne),(function(e){A(e)})),n({target:z,stat:!0,forced:!c},{for:function(e){var t=b(e);if(u(te,t))return te[t];var r=K(t);return te[t]=r,re[r]=t,r},keyFor:function(e){if(!h(e))throw TypeError(e+" is not a symbol");if(u(re,e))return re[e]},useSetter:function(){se=!0},useSimple:function(){se=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!a},{create:ue,defineProperty:ce,defineProperties:de,getOwnPropertyDescriptor:le}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:fe,getOwnPropertySymbols:he}),n({target:"Object",stat:!0,forced:d((function(){x.f(1)}))},{getOwnPropertySymbols:function(e){return x.f(g(e))}}),H){var me=!c||d((function(){var e=K();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}));n({target:"JSON",stat:!0,forced:me},{stringify:function(e,t,r){var n,i=[e],s=1;while(arguments.length>s)i.push(arguments[s++]);if(n=t,(f(t)||void 0!==e)&&!h(e))return p(t)||(t=function(e,t){if(l(n)&&(t=n.call(this,e,t)),!h(t))return t}),i[1]=t,H.apply(null,i)}})}if(!K[U][W]){var ge=K[U].valueOf;j(K[U],W,(function(){return ge.apply(this,arguments)}))}q(K,z),L[B]=!0},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},a767:function(e,t,r){const n=r("f16e"),i=r("eb2e"),s=r("3a4a"),o=new n("Peer");class a extends i{constructor(e){super(o),o.debug("constructor()"),this._closed=!1,this._transport=e,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(e){throw new Error("cannot override data object")}close(){if(!this._closed){o.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const e of this._sents.values())e.close();this.safeEmit("close")}}async request(e,t){const r=s.createRequest(e,t);return this._logger.debug("request() [method:%s, id:%s]",e,r.id),await this._transport.send(r),new Promise((e,t)=>{const n=1500*(15+.1*this._sents.size),i={id:r.id,method:r.method,resolve:t=>{this._sents.delete(r.id)&&(clearTimeout(i.timer),e(t))},reject:e=>{this._sents.delete(r.id)&&(clearTimeout(i.timer),t(e))},timer:setTimeout(()=>{this._sents.delete(r.id)&&t(new Error("request timeout"))},n),close:()=>{clearTimeout(i.timer),t(new Error("peer closed"))}};this._sents.set(r.id,i)})}async notify(e,t){const r=s.createNotification(e,t);this._logger.debug("notify() [method:%s]",e),await this._transport.send(r)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(o.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(o.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",e=>{this._closed||(o.debug('emit "failed" [currentAttempt:%s]',e),this._connected=!1,this.safeEmit("failed",e))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,o.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",e=>{e.request?this._handleRequest(e):e.response?this._handleResponse(e):e.notification&&this._handleNotification(e)})}_handleRequest(e){try{this.emit("request",e,t=>{const r=s.createSuccessResponse(e,t);this._transport.send(r).catch(()=>{})},(t,r)=>{t instanceof Error?(r=t.message,t=500):"number"===typeof t&&r instanceof Error&&(r=r.message);const n=s.createErrorResponse(e,t,r);this._transport.send(n).catch(()=>{})})}catch(t){const r=s.createErrorResponse(e,500,String(t));this._transport.send(r).catch(()=>{})}}_handleResponse(e){const t=this._sents.get(e.id);if(t)if(e.ok)t.resolve(e.data);else{const r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}else o.error("received response does not match any sent request [id:%s]",e.id)}_handleNotification(e){this.safeEmit("notification",e)}}e.exports=a},a79d:function(e,t,r){"use strict";var n=r("23e7"),i=r("c430"),s=r("fea9"),o=r("d039"),a=r("d066"),c=r("1626"),d=r("4840"),u=r("cdf9"),p=r("6eeb"),l=!!s&&o((function(){s.prototype["finally"].call({then:function(){}},(function(){}))}));if(n({target:"Promise",proto:!0,real:!0,forced:l},{finally:function(e){var t=d(this,a("Promise")),r=c(e);return this.then(r?function(r){return u(t,e()).then((function(){return r}))}:e,r?function(r){return u(t,e()).then((function(){throw r}))}:e)}}),!i&&c(s)){var f=a("Promise").prototype["finally"];s.prototype["finally"]!==f&&p(s.prototype,"finally",f,{unsafe:!0})}},ac1f:function(e,t,r){"use strict";var n=r("23e7"),i=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae93:function(e,t,r){"use strict";var n,i,s,o=r("d039"),a=r("1626"),c=r("7c73"),d=r("e163"),u=r("6eeb"),p=r("b622"),l=r("c430"),f=p("iterator"),h=!1;[].keys&&(s=[].keys(),"next"in s?(i=d(d(s)),i!==Object.prototype&&(n=i)):h=!0);var m=void 0==n||o((function(){var e={};return n[f].call(e)!==e}));m?n={}:l&&(n=c(n)),a(n[f])||u(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},b041:function(e,t,r){"use strict";var n=r("00ee"),i=r("f5df");e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(e,t,r){var n=r("83ab"),i=r("5e77").EXISTS,s=r("9bf2").f,o=Function.prototype,a=o.toString,c=/^\s*function ([^ (]*)/,d="name";n&&!i&&s(o,d,{configurable:!0,get:function(){try{return a.call(this).match(c)[1]}catch(e){return""}}})},b124:function(e,t,r){"use strict";function n({offerMediaObject:e,track:t}){let r;const n=new Set;for(const o of e.ssrcs||[]){if("msid"!==o.attribute)continue;const e=o.value.split(" ")[1];if(e===t.id){const e=o.id;n.add(e),r||(r=e)}}if(0===n.size)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);const i=new Map;for(const o of e.ssrcGroups||[]){if("FID"!==o.semantics)continue;let[e,t]=o.ssrcs.split(/\s+/);e=Number(e),t=Number(t),n.has(e)&&(n.delete(e),n.delete(t),i.set(e,t))}for(const o of n)i.set(o,null);const s=[];for(const[o,a]of i){const e={ssrc:o};a&&(e.rtx={ssrc:a}),s.push(e)}return s}function i({offerMediaObject:e,track:t,numStreams:r}){if(r<=1)throw new TypeError("numStreams must be greater than 1");let n,i,s;const o=(e.ssrcs||[]).find(e=>{if("msid"!==e.attribute)return!1;const r=e.value.split(" ")[1];return r===t.id&&(n=e.id,s=e.value.split(" ")[0],!0)});if(!o)throw new Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(e.ssrcGroups||[]).some(e=>{if("FID"!==e.semantics)return!1;const t=e.ssrcs.split(/\s+/);return Number(t[0])===n&&(i=Number(t[1]),!0)});const a=e.ssrcs.find(e=>"cname"===e.attribute&&e.id===n);if(!a)throw new Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);const c=a.value,d=[],u=[];for(let p=0;p<r;++p)d.push(n+p),i&&u.push(i+p);e.ssrcGroups=e.ssrcGroups||[],e.ssrcs=e.ssrcs||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:d.join(" ")});for(let p=0;p<d.length;++p){const r=d[p];e.ssrcs.push({id:r,attribute:"cname",value:c}),e.ssrcs.push({id:r,attribute:"msid",value:`${s} ${t.id}`})}for(let p=0;p<u.length;++p){const r=d[p],n=u[p];e.ssrcs.push({id:n,attribute:"cname",value:c}),e.ssrcs.push({id:n,attribute:"msid",value:`${s} ${t.id}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${r} ${n}`})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=n,t.addLegacySimulcast=i},b19e:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;const n=r("ee1f"),i=r("1b28"),s=r("9c0b"),o=new n.Logger("Consumer");class a extends i.EnhancedEventEmitter{constructor({id:e,localId:t,producerId:r,rtpReceiver:n,track:s,rtpParameters:a,appData:c}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,o.debug("constructor()"),this._id=e,this._localId=t,this._producerId=r,this._rtpReceiver=n,this._track=s,this._rtpParameters=a,this._paused=!s.enabled,this._appData=c,this._onTrackEnded=this._onTrackEnded.bind(this),this._handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){throw new Error("cannot override appData object")}get observer(){return this._observer}close(){this._closed||(o.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return this.safeEmitAsPromise("@getstats")}pause(){o.debug("pause()"),this._closed?o.error("pause() | Consumer closed"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){o.debug("resume()"),this._closed?o.error("resume() | Consumer closed"):(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume"))}_onTrackEnded(){o.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}_handleTrack(){this._track.addEventListener("ended",this._onTrackEnded)}_destroyTrack(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(e){}}}t.Consumer=a},b575:function(e,t,r){var n,i,s,o,a,c,d,u,p=r("da84"),l=r("06cf").f,f=r("2cf4").set,h=r("1cdc"),m=r("d4c3"),g=r("a4b4"),y=r("605d"),v=p.MutationObserver||p.WebKitMutationObserver,b=p.document,_=p.process,S=p.Promise,w=l(p,"queueMicrotask"),R=w&&w.value;R||(n=function(){var e,t;y&&(e=_.domain)&&e.exit();while(i){t=i.fn,i=i.next;try{t()}catch(r){throw i?o():s=void 0,r}}s=void 0,e&&e.enter()},h||y||g||!v||!b?!m&&S&&S.resolve?(d=S.resolve(void 0),d.constructor=S,u=d.then,o=function(){u.call(d,n)}):o=y?function(){_.nextTick(n)}:function(){f.call(p,n)}:(a=!0,c=b.createTextNode(""),new v(n).observe(c,{characterData:!0}),o=function(){c.data=a=!a})),e.exports=R||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,o()),s=t}},b622:function(e,t,r){var n=r("da84"),i=r("5692"),s=r("1a2d"),o=r("90e3"),a=r("4930"),c=r("fdbf"),d=i("wks"),u=n.Symbol,p=c?u:u&&u.withoutSetter||o;e.exports=function(e){return s(d,e)&&(a||"string"==typeof d[e])||(a&&s(u,e)?d[e]=u[e]:d[e]=p("Symbol."+e)),d[e]}},b64b:function(e,t,r){var n=r("23e7"),i=r("7b0b"),s=r("df75"),o=r("d039"),a=o((function(){s(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(e){return s(i(e))}})},b727:function(e,t,r){var n=r("0366"),i=r("44ad"),s=r("7b0b"),o=r("07fa"),a=r("65f0"),c=[].push,d=function(e){var t=1==e,r=2==e,d=3==e,u=4==e,p=6==e,l=7==e,f=5==e||p;return function(h,m,g,y){for(var v,b,_=s(h),S=i(_),w=n(m,g,3),R=o(S),O=0,x=y||a,k=t?x(h,R):r||l?x(h,0):void 0;R>O;O++)if((f||O in S)&&(v=S[O],b=w(v,O,_),e))if(t)k[O]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return O;case 2:c.call(k,v)}else switch(e){case 4:return!1;case 7:c.call(k,v)}return p?-1:d||u?u:k}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},ba0c:function(e){e.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')},c04e:function(e,t,r){var n=r("861d"),i=r("d9b5"),s=r("dc4a"),o=r("485a"),a=r("b622"),c=a("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var r,a=s(e,c);if(a){if(void 0===t&&(t="default"),r=a.call(e,t),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},c6cd:function(e,t,r){var n=r("da84"),i=r("ce4e"),s="__core-js_shared__",o=n[s]||i(s,{});e.exports=o},c8ba:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}e.exports=r},ca84:function(e,t,r){var n=r("1a2d"),i=r("fc6a"),s=r("4d64").indexOf,o=r("d012");e.exports=function(e,t){var r,a=i(e),c=0,d=[];for(r in a)!n(o,r)&&n(a,r)&&d.push(r);while(t.length>c)n(a,r=t[c++])&&(~s(d,r)||d.push(r));return d}},cb9c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},cc12:function(e,t,r){var n=r("da84"),i=r("861d"),s=n.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},cca6:function(e,t,r){var n=r("23e7"),i=r("60da");n({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(e,t,r){var n=r("825a"),i=r("861d"),s=r("f069");e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=s.f(e),o=r.resolve;return o(t),r.promise}},ce4e:function(e,t,r){var n=r("da84");e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},cedd:function(e,t,r){const{version:n}=r("8871"),i=r("a767"),s=r("e20c");t.version=n,t.Peer=i,t.WebSocketTransport=s},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,r){var n=r("da84"),i=r("1626"),s=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e]):n[e]&&n[e][t]}},d0d4:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome74=void 0;const o=s(r("93be")),a=r("ee1f"),c=s(r("f31c")),d=s(r("feba")),u=s(r("6303")),p=s(r("887c")),l=r("d73d"),f=r("19f7"),h=r("8040"),m=new a.Logger("Chrome74"),g={OS:1024,MIS:1024};class y extends l.HandlerInterface{constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new y}get name(){return"Chrome74"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");const r=await e.createOffer();try{e.close()}catch(t){}const n=o.parse(r.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:u}){m.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",u),video:d.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",u),video:d.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach((e,t)=>{e.rid="r"+t});const i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=d.reduceCodecs(i.codecs,n);const s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=d.reduceCodecs(s.codecs,n);const a=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t});let f,g=await this._pc.createOffer(),y=o.parse(g.sdp);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:y});let v=!1;const b=h.parse((t||[{}])[0].scalabilityMode);t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===i.codecs[0].mimeType.toLowerCase()&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,y=o.parse(g.sdp),f=y.media[a.idx],p.addLegacySimulcast({offerMediaObject:f,numStreams:b.spatialLayers}),g={type:"offer",sdp:o.write(y)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g);const _=l.mid;if(i.mid=_,y=o.parse(this._pc.localDescription.sdp),f=y.media[a.idx],i.rtcp.cname=u.getCname({offerMediaObject:f}),t)if(1===t.length){let e=p.getRtpEncodings({offerMediaObject:f});Object.assign(e[0],t[0]),v&&(e=[e[0]]),i.encodings=e}else i.encodings=t;else i.encodings=p.getRtpEncodings({offerMediaObject:f});if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const o of i.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:f,reuseMid:a.reuseMid,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});const S={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(_,l),{localId:_,rtpParameters:i,rtpSender:l.sender}}async stopSending(e){this._assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.closeMediaSection(t.mid);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async replaceTrack(e,t){this._assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.sender.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.sender.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),m.debug("receive() [trackId:%s, kind:%s]",e,t);const n=r.mid||String(this._mapMidTransceiver.size);this._remoteSdp.receive({mid:n,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const i={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const a=o.parse(s.sdp),c=a.media.find(e=>String(e.mid)===n);u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:c}),s={type:"answer",sdp:o.write(a)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:a}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);const d=this._pc.getTransceivers().find(e=>e.mid===n);if(!d)throw new Error("new RTCRtpTransceiver not found");return this._mapMidTransceiver.set(n,d),{localId:n,track:d.receiver.track,rtpReceiver:d.receiver}}async stopReceiving(e){this._assertRecvDirection(),m.debug("stopReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(t.mid);const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n),this._mapMidTransceiver.delete(e)}async pauseReceiving(e){this._assertRecvDirection(),m.debug("pauseReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive";const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this._assertRecvDirection(),m.debug("resumeReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="recvonly";const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this._assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome74=y},d1e7:function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},d2bb:function(e,t,r){var n=r("825a"),i=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(r,[]),t=r instanceof Array}catch(s){}return function(r,s){return n(r),i(s),t?e.call(r,s):r.__proto__=s,r}}():void 0)},d3b7:function(e,t,r){var n=r("00ee"),i=r("6eeb"),s=r("b041");n||i(Object.prototype,"toString",s,{unsafe:!0})},d44e:function(e,t,r){var n=r("9bf2").f,i=r("1a2d"),s=r("b622"),o=s("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},d4c3:function(e,t,r){var n=r("342f"),i=r("da84");e.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},d73d:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerInterface=void 0;const n=r("1b28");class i extends n.EnhancedEventEmitter{constructor(){super()}}t.HandlerInterface=i},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),i=r("9263"),s=r("d039"),o=r("b622"),a=r("9112"),c=o("species"),d=RegExp.prototype;e.exports=function(e,t,r,u){var p=o(e),l=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=l&&!s((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!l||!f||r){var h=/./[p],m=t(p,""[e],(function(e,t,r,n,s){var o=t.exec;return o===i||o===d.exec?l&&!s?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,m[0]),n(d,p,m[1])}u&&a(d[p],"sham",!0)}},d859:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox60=void 0;const o=s(r("93be")),a=r("ee1f"),c=r("9c0b"),d=s(r("f31c")),u=s(r("feba")),p=s(r("6303")),l=s(r("887c")),f=r("d73d"),h=r("19f7"),m=new a.Logger("Firefox60"),g={OS:16,MIS:2048};class y extends f.HandlerInterface{constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new y}get name(){return"Firefox60"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");const r=t.captureStream(),n=r.getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});const r=e.addTransceiver(n,{direction:"sendrecv"}),s=r.sender.getParameters(),a=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];s.encodings=a,await r.sender.setParameters(s);const c=await e.createOffer();try{t.remove()}catch(i){}try{n.stop()}catch(i){}try{e.close()}catch(i){}const d=o.parse(c.sdp),u=p.extractRtpCapabilities({sdpObject:d});return u}catch(i){try{t.remove()}catch(s){}try{n.stop()}catch(s){}try{e.close()}catch(s){}throw i}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:d}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",d),video:u.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",d),video:u.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){throw new c.UnsupportedError("not supported")}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&(t=d.clone(t,[]),t.length>1&&(t.forEach((e,t)=>{e.rid="r"+t}),t.reverse()));const i=d.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=u.reduceCodecs(i.codecs,n);const s=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=u.reduceCodecs(s.codecs,n);const a=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(t){const e=a.sender.getParameters();e.encodings=t,await a.sender.setParameters(e)}const c=await this._pc.createOffer();let f=o.parse(c.sdp);this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:f}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const h=a.mid;i.mid=h,f=o.parse(this._pc.localDescription.sdp);const g=f.media[f.media.length-1];if(i.rtcp.cname=p.getCname({offerMediaObject:g}),t)if(1===t.length){const e=l.getRtpEncodings({offerMediaObject:g});Object.assign(e[0],t[0]),i.encodings=e}else i.encodings=t.reverse();else i.encodings=l.getRtpEncodings({offerMediaObject:g});if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(const o of i.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:g,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});const y={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y),this._mapMidTransceiver.set(h,a),{localId:h,rtpParameters:i,rtpSender:a.sender}}async stopSending(e){m.debug("stopSending() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated transceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.disableMediaSection(t.mid);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async replaceTrack(e,t){this._assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated transceiver not found");const n=r.sender.getParameters();t=n.encodings.length-1-t,n.encodings.forEach((e,r)=>{e.active=r>=t}),await r.sender.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapMidTransceiver.get(e);if(!r)throw new Error("associated RTCRtpTransceiver not found");const n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.sender.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),m.debug("receive() [trackId:%s, kind:%s]",e,t);const n=r.mid||String(this._mapMidTransceiver.size);this._remoteSdp.receive({mid:n,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const i={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const a=o.parse(s.sdp),c=a.media.find(e=>String(e.mid)===n);p.applyCodecParameters({offerRtpParameters:r,answerMediaObject:c}),s={type:"answer",sdp:o.write(a)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:a}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);const d=this._pc.getTransceivers().find(e=>e.mid===n);if(!d)throw new Error("new RTCRtpTransceiver not found");return this._mapMidTransceiver.set(n,d),{localId:n,track:d.receiver.track,rtpReceiver:d.receiver}}async stopReceiving(e){this._assertRecvDirection(),m.debug("stopReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(t.mid);const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n),this._mapMidTransceiver.delete(e)}async pauseReceiving(e){this._assertRecvDirection(),m.debug("pauseReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="inactive";const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async resumeReceiving(e){this._assertRecvDirection(),m.debug("resumeReceiving() [localId:%s]",e);const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");t.direction="recvonly";const r={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),await this._pc.setRemoteDescription(r);const n=await this._pc.createAnswer();m.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",n),await this._pc.setLocalDescription(n)}async getReceiverStats(e){this._assertRecvDirection();const t=this._mapMidTransceiver.get(e);if(!t)throw new Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Firefox60=y},d9b5:function(e,t,r){var n=r("1626"),i=r("d066"),s=r("fdbf");e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return n(t)&&Object(e)instanceof t}},da84:function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},dbb4:function(e,t,r){var n=r("23e7"),i=r("83ab"),s=r("56ef"),o=r("fc6a"),a=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,r,n=o(e),i=a.f,d=s(n),u={},p=0;while(d.length>p)r=i(n,t=d[p++]),void 0!==r&&c(u,t,r);return u}})},dc4a:function(e,t,r){var n=r("59ed");e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},dc90:function(e,t,r){function n(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let t,r,s,o=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),s=i-(t||i);r.diff=s,r.prev=t,r.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,i)=>{if("%%"===t)return"%";o++;const s=n.formatters[i];if("function"===typeof s){const n=e[o];t=s.call(r,n),e.splice(o,1),o--}return t}),n.formatArgs.call(r,e);const c=r.log||n.log;c.apply(r,e)}return a.namespace=e,a.useColors=n.useColors(),a.color=n.selectColor(e),a.extend=i,a.destroy=n.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==n.namespaces&&(r=n.namespaces,s=n.enabled(e)),s),set:e=>{o=e}}),"function"===typeof n.init&&n.init(a),a}function i(e,t){const r=n(this.namespace+("undefined"===typeof t?":":t)+e);return r.log=this.log,r}function s(e){let t;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&(e=r[t].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){const e=[...n.names.map(c),...n.skips.map(c).map(e=>"-"+e)].join(",");return n.enable(""),e}function a(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function d(e){return e instanceof Error?e.stack||e.message:e}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=d,n.disable=o,n.enable=s,n.enabled=a,n.humanize=r("1468"),n.destroy=u,Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}e.exports=n},ddb0:function(e,t,r){var n=r("da84"),i=r("fdbc"),s=r("785a"),o=r("e260"),a=r("9112"),c=r("b622"),d=c("iterator"),u=c("toStringTag"),p=o.values,l=function(e,t){if(e){if(e[d]!==p)try{a(e,d,p)}catch(n){e[d]=p}if(e[u]||a(e,u,t),i[t])for(var r in o)if(e[r]!==o[r])try{a(e,r,o[r])}catch(n){e[r]=o[r]}}};for(var f in i)l(n[f]&&n[f].prototype,f);l(s,"DOMTokenList")},ddfa:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.detectDevice=t.Device=t.version=t.types=void 0;const a=o(r("34eb"));t.debug=a.default;const c=r("363f");Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return c.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return c.detectDevice}});const d=s(r("032e"));t.types=d,t.version="3.6.43";var u=r("8040");Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return u.parse}})},df75:function(e,t,r){var n=r("ca84"),i=r("7839");e.exports=Object.keys||function(e){return n(e,i)}},df7c:function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e){"string"!==typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}function i(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o.charAt(0))}return t=r(i(t.split("/"),(function(e){return!!e})),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),o="/"===s(e,-1);return e=r(i(e.split("/"),(function(e){return!!e})),!n).join("/"),e||n||(e="."),e&&o&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var r=e.length-1;r>=0;r--)if(""!==e[r])break;return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),s=n(r.split("/")),o=Math.min(i.length,s.length),a=o,c=0;c<o;c++)if(i[c]!==s[c]){a=c;break}var d=[];for(c=a;c<i.length;c++)d.push("..");return d=d.concat(s.slice(a)),d.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),47===t){if(!i){n=s;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=n(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,s=0,o=e.length-1;o>=0;--o){var a=e.charCodeAt(o);if(47!==a)-1===n&&(i=!1,n=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){r=o+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r("4362"))},e04a:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor({ClosedErrorClass:e=Error,StoppedErrorClass:t=Error}={ClosedErrorClass:Error,StoppedErrorClass:Error}){this.closed=!1,this.pendingTasks=[],this.ClosedErrorClass=Error,this.StoppedErrorClass=Error,this.ClosedErrorClass=e,this.StoppedErrorClass=t}get size(){return this.pendingTasks.length}close(){if(!this.closed){this.closed=!0;for(const e of this.pendingTasks)e.stopped=!0,e.reject(new this.ClosedErrorClass("AwaitQueue closed"));this.pendingTasks.length=0}}push(e,t){return n(this,void 0,void 0,(function*(){if(this.closed)throw new this.ClosedErrorClass("AwaitQueue closed");if("function"!==typeof e)throw new TypeError("given task is not a function");if(!e.name&&t)try{Object.defineProperty(e,"name",{value:t})}catch(r){}return new Promise((r,n)=>{const i={task:e,name:t,resolve:r,reject:n,stopped:!1,enqueuedAt:new Date,executedAt:void 0};this.pendingTasks.push(i),1===this.pendingTasks.length&&this.next()})}))}stop(){if(!this.closed){for(const e of this.pendingTasks)e.stopped=!0,e.reject(new this.StoppedErrorClass("AwaitQueue stopped"));this.pendingTasks.length=0}}dump(){const e=new Date;return this.pendingTasks.map(t=>({task:t.task,name:t.name,enqueuedTime:t.executedAt?t.executedAt.getTime()-t.enqueuedAt.getTime():e.getTime()-t.enqueuedAt.getTime(),executingTime:t.executedAt?e.getTime()-t.executedAt.getTime():0}))}next(){return n(this,void 0,void 0,(function*(){const e=this.pendingTasks[0];e&&(yield this.executeTask(e),this.pendingTasks.shift(),this.next())}))}executeTask(e){return n(this,void 0,void 0,(function*(){if(!e.stopped){e.executedAt=new Date;try{const t=yield e.task();if(e.stopped)return;e.resolve(t)}catch(t){if(e.stopped)return;e.reject(t)}}}))}}t.AwaitQueue=i},e0d2:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome55=void 0;const o=s(r("93be")),a=r("ee1f"),c=r("9c0b"),d=s(r("f31c")),u=s(r("feba")),p=s(r("6303")),l=s(r("b124")),f=r("d73d"),h=r("19f7"),m=new a.Logger("Chrome55"),g={OS:1024,MIS:1024};class y extends f.HandlerInterface{constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new y}get name(){return"Chrome55"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=o.parse(r.sdp),i=p.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:d}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",d),video:u.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",d),video:u.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let i,s=await this._pc.createOffer(),a=o.parse(s.sdp);const c=d.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=u.reduceCodecs(c.codecs);const f=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(f.codecs=u.reduceCodecs(f.codecs),this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:a}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),a=o.parse(s.sdp),i=a.media.find(e=>"video"===e.type),l.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(a)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=o.parse(this._pc.localDescription.sdp),i=a.media.find(t=>t.type===e.kind),c.rtcp.cname=p.getCname({offerMediaObject:i}),c.encodings=l.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let o=0;o<c.encodings.length;++o)t[o]&&Object.assign(c.encodings[o],t[o]);if(c.encodings.length>1&&"video/vp8"===c.codecs[0].mimeType.toLowerCase())for(const o of c.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:c,answerRtpParameters:f,codecOptions:r});const h={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h);const g=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(g,e),{localId:g,rtpParameters:c}}async stopSending(e){this._assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(i){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",i.toString());throw i}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not supported")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),m.debug("receive() [trackId:%s, kind:%s]",e,t);const n=e,i=t,s=r.rtcp.cname;this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:r,streamId:s,trackId:e});const a={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let c=await this._pc.createAnswer();const d=o.parse(c.sdp),u=d.media.find(e=>String(e.mid)===i);p.applyCodecParameters({offerRtpParameters:r,answerMediaObject:u}),c={type:"answer",sdp:o.write(d)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:d}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);const l=this._pc.getRemoteStreams().find(e=>e.id===s),f=l.getTrackById(n);if(!f)throw new Error("remote track not found");return this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:r}),{localId:n,track:f}}async stopReceiving(e){this._assertRecvDirection(),m.debug("stopReceiving() [localId:%s]",e);const{mid:t,rtpParameters:r}=this._mapRecvLocalIdInfo.get(e)||{};this._mapRecvLocalIdInfo.delete(e),this._remoteSdp.planBStopReceiving({mid:t,offerRtpParameters:r});const n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const i=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:a,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Chrome55=y},e163:function(e,t,r){var n=r("1a2d"),i=r("1626"),s=r("7b0b"),o=r("f772"),a=r("e177"),c=o("IE_PROTO"),d=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){var t=s(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof Object?d:null}},e177:function(e,t,r){var n=r("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e20c:function(e,t,r){const n=r("7e3c").w3cwebsocket,i=r("a448"),s=r("f16e"),o=r("eb2e"),a=r("3a4a"),c="protoo",d={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},u=new s("WebSocketTransport");class p extends o{constructor(e,t){super(u),u.debug("constructor() [url:%s, options:%o]",e,t),this._closed=!1,this._url=e,this._options=t||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){u.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){u.error("close() | error closing the WebSocket: %o",e)}}}async send(e){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(e))}catch(t){throw u.warn("send() failed:%o",t),t}}_runWebSocket(){const e=i.operation(this._options.retry||d);let t=!1;e.attempt(r=>{this._closed?e.stop():(u.debug("_runWebSocket() [currentAttempt:%s]",r),this._ws=new n(this._url,c,this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(t=!0,this.safeEmit("open"))},this._ws.onclose=n=>{if(!this._closed){if(u.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',n.wasClean,n.code,n.reason),4e3!==n.code){if(t){if(e.stop(),this.safeEmit("disconnected"),this._closed)return;return void this._runWebSocket()}if(this.safeEmit("failed",r),this._closed)return;if(e.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||u.error('WebSocket "error" event')},this._ws.onmessage=e=>{if(this._closed)return;const t=a.parse(e.data);t&&(0!==this.listenerCount("message")?this.safeEmit("message",t):u.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}e.exports=p},e260:function(e,t,r){"use strict";var n=r("fc6a"),i=r("44d2"),s=r("3f8c"),o=r("69f3"),a=r("7dd0"),c="Array Iterator",d=o.set,u=o.getterFor(c);e.exports=a(Array,"Array",(function(e,t){d(this,{type:c,target:n(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},e2cc:function(e,t,r){var n=r("6eeb");e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},e439:function(e,t,r){var n=r("23e7"),i=r("d039"),s=r("fc6a"),o=r("06cf").f,a=r("83ab"),c=i((function(){o(1)})),d=!a||c;n({target:"Object",stat:!0,forced:d,sham:!a},{getOwnPropertyDescriptor:function(e,t){return o(s(e),t)}})},e538:function(e,t,r){var n=r("b622");t.f=n},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,r){"use strict";var n,i,s,o,a=r("23e7"),c=r("c430"),d=r("da84"),u=r("d066"),p=r("fea9"),l=r("6eeb"),f=r("e2cc"),h=r("d2bb"),m=r("d44e"),g=r("2626"),y=r("59ed"),v=r("1626"),b=r("861d"),_=r("19aa"),S=r("8925"),w=r("2266"),R=r("1c7e"),O=r("4840"),x=r("2cf4").set,k=r("b575"),P=r("cdf9"),C=r("44de"),j=r("f069"),T=r("e667"),E=r("69f3"),L=r("94ca"),D=r("b622"),I=r("6069"),M=r("605d"),A=r("2d00"),q=D("species"),F="Promise",N=E.get,B=E.set,z=E.getterFor(F),U=p&&p.prototype,W=p,G=U,$=d.TypeError,V=d.document,K=d.process,H=j.f,Q=H,J=!!(V&&V.createEvent&&d.dispatchEvent),Z=v(d.PromiseRejectionEvent),Y="unhandledrejection",X="rejectionhandled",ee=0,te=1,re=2,ne=1,ie=2,se=!1,oe=L(F,(function(){var e=S(W),t=e!==String(W);if(!t&&66===A)return!0;if(c&&!G["finally"])return!0;if(A>=51&&/native code/.test(e))return!1;var r=new W((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))},i=r.constructor={};return i[q]=n,se=r.then((function(){}))instanceof n,!se||!t&&I&&!Z})),ae=oe||!R((function(e){W.all(e)["catch"]((function(){}))})),ce=function(e){var t;return!(!b(e)||!v(t=e.then))&&t},de=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;k((function(){var n=e.value,i=e.state==te,s=0;while(r.length>s){var o,a,c,d=r[s++],u=i?d.ok:d.fail,p=d.resolve,l=d.reject,f=d.domain;try{u?(i||(e.rejection===ie&&fe(e),e.rejection=ne),!0===u?o=n:(f&&f.enter(),o=u(n),f&&(f.exit(),c=!0)),o===d.promise?l($("Promise-chain cycle")):(a=ce(o))?a.call(o,p,l):p(o)):l(n)}catch(h){f&&!c&&f.exit(),l(h)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&pe(e)}))}},ue=function(e,t,r){var n,i;J?(n=V.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),d.dispatchEvent(n)):n={promise:t,reason:r},!Z&&(i=d["on"+e])?i(n):e===Y&&C("Unhandled promise rejection",r)},pe=function(e){x.call(d,(function(){var t,r=e.facade,n=e.value,i=le(e);if(i&&(t=T((function(){M?K.emit("unhandledRejection",n,r):ue(Y,r,n)})),e.rejection=M||le(e)?ie:ne,t.error))throw t.value}))},le=function(e){return e.rejection!==ne&&!e.parent},fe=function(e){x.call(d,(function(){var t=e.facade;M?K.emit("rejectionHandled",t):ue(X,t,e.value)}))},he=function(e,t,r){return function(n){e(t,n,r)}},me=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=re,de(e,!0))},ge=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw $("Promise can't be resolved itself");var n=ce(t);n?k((function(){var r={done:!1};try{n.call(t,he(ge,r,e),he(me,r,e))}catch(i){me(r,i,e)}})):(e.value=t,e.state=te,de(e,!1))}catch(i){me({done:!1},i,e)}}};if(oe&&(W=function(e){_(this,W,F),y(e),n.call(this);var t=N(this);try{e(he(ge,t),he(me,t))}catch(r){me(t,r)}},G=W.prototype,n=function(e){B(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:ee,value:void 0})},n.prototype=f(G,{then:function(e,t){var r=z(this),n=H(O(this,W));return n.ok=!v(e)||e,n.fail=v(t)&&t,n.domain=M?K.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=ee&&de(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=N(e);this.promise=e,this.resolve=he(ge,t),this.reject=he(me,t)},j.f=H=function(e){return e===W||e===s?new i(e):Q(e)},!c&&v(p)&&U!==Object.prototype)){o=U.then,se||(l(U,"then",(function(e,t){var r=this;return new W((function(e,t){o.call(r,e,t)})).then(e,t)}),{unsafe:!0}),l(U,"catch",G["catch"],{unsafe:!0}));try{delete U.constructor}catch(ye){}h&&h(U,G)}a({global:!0,wrap:!0,forced:oe},{Promise:W}),m(W,F,!1,!0),g(F),s=u(F),a({target:F,stat:!0,forced:oe},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),a({target:F,stat:!0,forced:c||oe},{resolve:function(e){return P(c&&this===s?W:this,e)}}),a({target:F,stat:!0,forced:ae},{all:function(e){var t=this,r=H(t),n=r.resolve,i=r.reject,s=T((function(){var r=y(t.resolve),s=[],o=0,a=1;w(e,(function(e){var c=o++,d=!1;s.push(void 0),a++,r.call(t,e).then((function(e){d||(d=!0,s[c]=e,--a||n(s))}),i)})),--a||n(s)}));return s.error&&i(s.value),r.promise},race:function(e){var t=this,r=H(t),n=r.reject,i=T((function(){var i=y(t.resolve);w(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},e893:function(e,t,r){var n=r("1a2d"),i=r("56ef"),s=r("06cf"),o=r("9bf2");e.exports=function(e,t){for(var r=i(t),a=o.f,c=s.f,d=0;d<r.length;d++){var u=r[d];n(e,u)||a(e,u,c(t,u))}}},e8b5:function(e,t,r){var n=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},e95a:function(e,t,r){var n=r("b622"),i=r("3f8c"),s=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},eb2e:function(e,t,r){const{EventEmitter:n}=r("faa1"),i=r("f16e");class s extends n{constructor(e){super(),this.setMaxListeners(1/0),this._logger=e||new i("EnhancedEventEmitter")}safeEmit(e,...t){try{this.emit(e,...t)}catch(r){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,r)}}async safeEmitAsPromise(e,...t){return new Promise((r,n)=>{this.safeEmit(e,...t,r,n)})}}e.exports=s},ee1f:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const i=n(r("34eb")),s="mediasoup-client";class o{constructor(e){e?(this._debug=i.default(`${s}:${e}`),this._warn=i.default(`${s}:WARN:${e}`),this._error=i.default(`${s}:ERROR:${e}`)):(this._debug=i.default(s),this._warn=i.default(s+":WARN"),this._error=i.default(s+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}t.Logger=o},ee41:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNative=void 0;const o=s(r("93be")),a=r("ee1f"),c=r("9c0b"),d=s(r("f31c")),u=s(r("feba")),p=s(r("6303")),l=s(r("b124")),f=r("d73d"),h=r("19f7"),m=new a.Logger("ReactNative"),g={OS:1024,MIS:1024};class y extends f.HandlerInterface{constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new y}get name(){return"ReactNative"}close(){if(m.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=o.parse(r.sdp),i=p.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:d}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",d),video:u.getSendingRtpParameters("video",d)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",d),video:u.getSendingRemoteRtpParameters("video",d)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){m.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let i,s=await this._pc.createOffer(),a=o.parse(s.sdp);const c=d.clone(this._sendingRtpParametersByKind[e.kind],{});c.codecs=u.reduceCodecs(c.codecs);const f=d.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(f.codecs=u.reduceCodecs(f.codecs),this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:a}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),a=o.parse(s.sdp),i=a.media.find(e=>"video"===e.type),l.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(a)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=o.parse(this._pc.localDescription.sdp),i=a.media.find(t=>t.type===e.kind),c.rtcp.cname=p.getCname({offerMediaObject:i}),c.encodings=l.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let o=0;o<c.encodings.length;++o)t[o]&&Object.assign(c.encodings[o],t[o]);if(c.encodings.length>1&&("video/vp8"===c.codecs[0].mimeType.toLowerCase()||"video/h264"===c.codecs[0].mimeType.toLowerCase()))for(const o of c.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:c,answerRtpParameters:f,codecOptions:r});const h={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",h),await this._pc.setRemoteDescription(h);const g=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(g,e),{localId:g,rtpParameters:c}}async stopSending(e){this._assertSendDirection(),m.debug("stopSending() [localId:%s]",e);const t=this._mapSendLocalIdTrack.get(e);if(!t)throw new Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);const r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(i){if(0===this._sendStream.getTracks().length)return void m.warn("stopSending() | ignoring expected error due no sending tracks: %s",i.toString());throw i}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){throw new c.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new c.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,t){throw new c.UnsupportedError("not implemented")}async getSenderStats(e){throw new c.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),m.debug("receive() [trackId:%s, kind:%s]",e,t);const n=e,i=t;let s=r.rtcp.cname;m.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),s+="-hack-"+d.generateRandomNumber(),this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:r,streamId:s,trackId:e});const a={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),await this._pc.setRemoteDescription(a);let c=await this._pc.createAnswer();const u=o.parse(c.sdp),l=u.media.find(e=>String(e.mid)===i);p.applyCodecParameters({offerRtpParameters:r,answerMediaObject:l}),c={type:"answer",sdp:o.write(u)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:u}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);const f=this._pc.getRemoteStreams().find(e=>e.id===s),h=f.getTrackById(n);if(!h)throw new Error("remote track not found");return this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:r}),{localId:n,track:h}}async stopReceiving(e){this._assertRecvDirection(),m.debug("stopReceiving() [localId:%s]",e);const{mid:t,rtpParameters:r}=this._mapRecvLocalIdInfo.get(e)||{};this._mapRecvLocalIdInfo.delete(e),this._remoteSdp.planBStopReceiving({mid:t,offerRtpParameters:r});const n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const i=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new c.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:a,protocol:r};m.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=p.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.ReactNative=y},ee6e:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Edge11=void 0;const o=r("ee1f"),a=r("9c0b"),c=s(r("f31c")),d=s(r("feba")),u=s(r("1a1c")),p=r("d73d"),l=new o.Logger("Edge11");class f extends p.HandlerInterface{constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}static createFactory(){return()=>new f}get name(){return"Edge11"}close(){l.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}for(const t of this._rtpSenders.values())try{t.stop()}catch(e){}for(const t of this._rtpReceivers.values())try{t.stop()}catch(e){}}async getNativeRtpCapabilities(){return l.debug("getNativeRtpCapabilities()"),u.getCapabilities()}async getNativeSctpCapabilities(){return l.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:u,extendedRtpCapabilities:p}){l.debug("run()"),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",p),video:d.getSendingRtpParameters("video",p)},this._remoteIceParameters=t,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname="CNAME-"+c.generateRandomNumber(),this._setIceGatherer({iceServers:s,iceTransportPolicy:o}),this._setIceTransport(),this._setDtlsTransport()}async updateIceServers(e){throw new a.UnsupportedError("not supported")}async restartIce(e){if(l.debug("restartIce()"),this._remoteIceParameters=e,this._transportReady){l.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling");for(const e of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(e);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){l.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this._setupTransport({localDtlsRole:"server"}),l.debug("send() | calling new RTCRtpSender()");const i=new RTCRtpSender(e,this._dtlsTransport),s=c.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=d.reduceCodecs(s.codecs,n);const o=s.codecs.some(e=>/.+\/rtx$/i.test(e.mimeType));t||(t=[{}]);for(const d of t)d.ssrc=c.generateRandomNumber(),o&&(d.rtx={ssrc:c.generateRandomNumber()});s.encodings=t,s.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const a=u.mangleRtpParameters(s);l.debug("send() | calling rtpSender.send() [params:%o]",a),await i.send(a);const p=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(p,i),{localId:p,rtpParameters:s,rtpSender:i}}async stopSending(e){l.debug("stopSending() [localId:%s]",e);const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{l.debug("stopSending() | calling rtpSender.stop()"),t.stop()}catch(r){throw l.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async replaceTrack(e,t){t?l.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):l.debug("replaceTrack() [localId:%s, no track]",e);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");r.setTrack(t)}async setMaxSpatialLayer(e,t){l.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){l.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._rtpSenders.get(e);if(!r)throw new Error("RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.setParameters(n)}async getSenderStats(e){const t=this._rtpSenders.get(e);if(!t)throw new Error("RTCRtpSender not found");return t.getStats()}async sendDataChannel(e){throw new a.UnsupportedError("not implemented")}async receive({trackId:e,kind:t,rtpParameters:r}){l.debug("receive() [trackId:%s, kind:%s]",e,t),this._transportReady||await this._setupTransport({localDtlsRole:"server"}),l.debug("receive() | calling new RTCRtpReceiver()");const n=new RTCRtpReceiver(this._dtlsTransport,t);n.addEventListener("error",e=>{l.error('rtpReceiver "error" event [event:%o]',e)});const i=u.mangleRtpParameters(r);l.debug("receive() | calling rtpReceiver.receive() [params:%o]",i),await n.receive(i);const s=e;return this._rtpReceivers.set(s,n),{localId:s,track:n.track,rtpReceiver:n}}async stopReceiving(e){l.debug("stopReceiving() [localId:%s]",e);const t=this._rtpReceivers.get(e);if(!t)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(e);try{l.debug("stopReceiving() | calling rtpReceiver.stop()"),t.stop()}catch(r){l.warn("stopReceiving() | rtpReceiver.stop() failed:%o",r)}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){const t=this._rtpReceivers.get(e);if(!t)throw new Error("RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel(e){throw new a.UnsupportedError("not implemented")}_setIceGatherer({iceServers:e,iceTransportPolicy:t}){const r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:t||"all"});r.addEventListener("error",e=>{l.error('iceGatherer "error" event [event:%o]',e)});try{r.gather()}catch(n){l.debug("_setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}_setIceTransport(){const e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}}),e.addEventListener("candidatepairchange",e=>{l.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)}),this._iceTransport=e}_setDtlsTransport(){const e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{l.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{l.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),"closed"===e.state&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",e=>{l.error('dtlsTransport "error" event [event:%o]',e)}),this._dtlsTransport=e}async _setupTransport({localDtlsRole:e}){l.debug("_setupTransport()");const t=this._dtlsTransport.getLocalParameters();t.role=e,await this.safeEmitAsPromise("@connect",{dtlsParameters:t}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const r of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(e=>"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}t.Edge11=f},ef45:function(e,t){t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},f069:function(e,t,r){"use strict";var n=r("59ed"),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},f0bc:function(e,t,r){var n=r("3baa"),i=/%[sdv%]/g,s=function(e){var t=1,r=arguments,n=r.length;return e.replace(i,(function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,i=[e+"="+n];if(t.names)for(var o=0;o<t.names.length;o+=1){var a=t.names[o];t.name?i.push(r[t.name][a]):i.push(r[t.names[o]])}else i.push(r[t.name]);return s.apply(null,i)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||a,i=t.innerOrder||c,s=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?s.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){s.push(o(t,r,e))}))}))})),e.media.forEach((function(e){s.push(o("m",n.m[0],e)),i.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?s.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){s.push(o(t,r,e))}))}))}))})),s.join("\r\n")+"\r\n"}},f16e:function(e,t,r){const n=r("34eb"),i="protoo-client";class s{constructor(e){e?(this._debug=n(`${i}:${e}`),this._warn=n(`${i}:WARN:${e}`),this._error=n(`${i}:ERROR:${e}`)):(this._debug=n(i),this._warn=n(i+":WARN"),this._error=n(i+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}e.exports=s},f31c:function(e,t,r){"use strict";function n(e,t){return"undefined"===typeof e?t:JSON.parse(JSON.stringify(e))}function i(){return Math.round(1e7*Math.random())}Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumber=t.clone=void 0,t.clone=n,t.generateRandomNumber=i},f5df:function(e,t,r){var n=r("00ee"),i=r("1626"),s=r("c6b6"),o=r("b622"),a=o("toStringTag"),c="Arguments"==s(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(r){}};e.exports=n?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=d(t=Object(e),a))?r:c?s(t):"Object"==(n=s(t))&&i(t.callee)?"Arguments":n}},f772:function(e,t,r){var n=r("5692"),i=r("90e3"),s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},faa1:function(e,t,r){"use strict";var n,i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function o(e){console&&console.warn&&console.warn(e)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=_,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var d=10;function u(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,a;if(u(r),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"===typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=p(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,o(c)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function m(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?b(i):y(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function _(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}w(e,t,s,{once:!0}),"error"!==t&&S(e,i,{once:!0})}))}function S(e,t,r){"function"===typeof e.on&&w(e,"error",t,r)}function w(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");d=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return p(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var d=c.length,u=y(c,d);for(r=0;r<d;++r)s(u[r],this,t)}return!0},c.prototype.addListener=function(e,t){return l(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return l(this,e,t,!0)},c.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,i,s,o;if(u(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():v(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)i=s[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},fc6a:function(e,t,r){var n=r("44ad"),i=r("1d80");e.exports=function(e){return n(i(e))}},fce3:function(e,t,r){var n=r("d039"),i=r("da84"),s=i.RegExp;e.exports=n((function(){var e=s(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,r){var n=r("4930");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fe97:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari11=void 0;const o=s(r("93be")),a=r("ee1f"),c=s(r("f31c")),d=s(r("feba")),u=s(r("6303")),p=s(r("b124")),l=r("d73d"),f=r("19f7"),h=new a.Logger("Safari11"),m={OS:1024,MIS:1024};class g extends l.HandlerInterface{constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}static createFactory(){return()=>new g}get name(){return"Safari11"}close(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}async getNativeRtpCapabilities(){h.debug("getNativeRtpCapabilities()");const e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const r=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(t){}const n=o.parse(r.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(t){try{e.close()}catch(r){}throw t}}async getNativeSctpCapabilities(){return h.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:o,additionalSettings:a,proprietaryConstraints:c,extendedRtpCapabilities:u}){h.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:d.getSendingRtpParameters("audio",u),video:d.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:d.getSendingRemoteRtpParameters("audio",u),video:d.getSendingRemoteRtpParameters("video",u)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},a),c),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed");break}})}async updateIceServers(e){h.debug("updateIceServers()");const t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady)if("send"===this._direction){const e=await this._pc.createOffer({iceRestart:!0});h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e);const t={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setRemoteDescription(t)}else{const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",t),await this._pc.setLocalDescription(t)}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let i,s=await this._pc.createOffer(),a=o.parse(s.sdp);const l=c.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=d.reduceCodecs(l.codecs);const f=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(f.codecs=d.reduceCodecs(f.codecs),this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:a}),"video"===e.kind&&t&&t.length>1&&(h.debug("send() | enabling simulcast"),a=o.parse(s.sdp),i=a.media.find(e=>"video"===e.type),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:o.write(a)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),a=o.parse(this._pc.localDescription.sdp),i=a.media.find(t=>t.type===e.kind),l.rtcp.cname=u.getCname({offerMediaObject:i}),l.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let o=0;o<l.encodings.length;++o)t[o]&&Object.assign(l.encodings[o],t[o]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase())for(const o of l.encodings)o.scalabilityMode="S1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:l,answerRtpParameters:f,codecOptions:r});const m={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m);const g=String(this._nextSendLocalId);this._nextSendLocalId++;const y=this._pc.getSenders().find(t=>t.track===e);return this._mapSendLocalIdRtpSender.set(g,y),{localId:g,rtpParameters:l,rtpSender:y}}async stopSending(e){this._assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);const r=await this._pc.createOffer();h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(i){if(0===this._sendStream.getTracks().length)return void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",i.toString());throw i}if("stable"===this._pc.signalingState)return;const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this._assertSendDirection(),t?h.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):h.debug("replaceTrack() [localId:%s, no track]",e);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{e.active=r<=t}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);const r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw new Error("associated RTCRtpSender not found");const n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]=Object.assign(Object.assign({},e),t)}),await r.setParameters(n)}async getSenderStats(e){this._assertSendDirection();const t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw new Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this._assertSendDirection();const s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};h.debug("sendDataChannel() [options:%o]",s);const a=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){const e=await this._pc.createOffer(),t=o.parse(e.sdp),r=t.media.find(e=>"application"===e.type);this._transportReady||await this._setupTransport({localDtlsRole:"server",localSdpObject:t}),h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",e),await this._pc.setLocalDescription(e),this._remoteSdp.sendSctpAssociation({offerMediaObject:r});const n={type:"answer",sdp:this._remoteSdp.getSdp()};h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._hasDataChannelMediaSection=!0}const c={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:a,sctpStreamParameters:c}}async receive({trackId:e,kind:t,rtpParameters:r}){this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",e,t);const n=e,i=t;this._remoteSdp.receive({mid:i,kind:t,offerRtpParameters:r,streamId:r.rtcp.cname,trackId:e});const s={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let a=await this._pc.createAnswer();const c=o.parse(a.sdp),d=c.media.find(e=>String(e.mid)===i);u.applyCodecParameters({offerRtpParameters:r,answerMediaObject:d}),a={type:"answer",sdp:o.write(c)},this._transportReady||await this._setupTransport({localDtlsRole:"client",localSdpObject:c}),h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),await this._pc.setLocalDescription(a);const p=this._pc.getReceivers().find(e=>e.track&&e.track.id===n);if(!p)throw new Error("new RTCRtpReceiver not");return this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:r,rtpReceiver:p}),{localId:n,track:p.track,rtpReceiver:p}}async stopReceiving(e){this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",e);const{mid:t,rtpParameters:r}=this._mapRecvLocalIdInfo.get(e)||{};this._mapRecvLocalIdInfo.delete(e),this._remoteSdp.planBStopReceiving({mid:t,offerRtpParameters:r});const n={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);const i=await this._pc.createAnswer();h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this._assertRecvDirection();const{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw new Error("associated RTCRtpReceiver not found");return t.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this._assertRecvDirection();const{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a}=e,c={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:a,protocol:r};h.debug("receiveDataChannel() [options:%o]",c);const d=this._pc.createDataChannel(t,c);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const e={type:"offer",sdp:this._remoteSdp.getSdp()};h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",e),await this._pc.setRemoteDescription(e);const t=await this._pc.createAnswer();if(!this._transportReady){const e=o.parse(t.sdp);await this._setupTransport({localDtlsRole:"client",localSdpObject:e})}h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",t),await this._pc.setLocalDescription(t),this._hasDataChannelMediaSection=!0}return{dataChannel:d}}async _setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=o.parse(this._pc.localDescription.sdp));const r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await this.safeEmitAsPromise("@connect",{dtlsParameters:r}),this._transportReady=!0}_assertSendDirection(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}_assertRecvDirection(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}}t.Safari11=g},fea9:function(e,t,r){var n=r("da84");e.exports=n.Promise},feba:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canReceive=t.canSend=t.generateProbatorRtpParameters=t.reduceCodecs=t.getSendingRemoteRtpParameters=t.getSendingRtpParameters=t.getRecvRtpCapabilities=t.getExtendedRtpCapabilities=t.validateSctpStreamParameters=t.validateSctpParameters=t.validateNumSctpStreams=t.validateSctpCapabilities=t.validateRtcpParameters=t.validateRtpEncodingParameters=t.validateRtpHeaderExtensionParameters=t.validateRtpCodecParameters=t.validateRtpParameters=t.validateRtpHeaderExtension=t.validateRtcpFeedback=t.validateRtpCodecCapability=t.validateRtpCapabilities=void 0;const o=s(r("9eb7")),a=s(r("f31c")),c="probator",d=1234,u=127;function p(e){if("object"!==typeof e)throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);for(const t of e.codecs)l(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)h(t)}function l(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!==typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!==typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(e.kind=r[1].toLowerCase(),e.preferredPayloadType&&"number"!==typeof e.preferredPayloadType)throw new TypeError("invalid codec.preferredPayloadType");if("number"!==typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===e.kind?"number"!==typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(const n of Object.keys(e.parameters)){let t=e.parameters[n];if(void 0===t&&(e.parameters[n]="",t=""),"string"!==typeof t&&"number"!==typeof t)throw new TypeError(`invalid codec parameter [key:${n}s, value:${t}]`);if("apt"===n&&"number"!==typeof t)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const n of e.rtcpFeedback)f(n)}function f(e){if("object"!==typeof e)throw new TypeError("fb is not an object");if(!e.type||"string"!==typeof e.type)throw new TypeError("missing fb.type");e.parameter&&"string"===typeof e.parameter||(e.parameter="")}function h(e){if("object"!==typeof e)throw new TypeError("ext is not an object");if("audio"!==e.kind&&"video"!==e.kind)throw new TypeError("invalid ext.kind");if(!e.uri||"string"!==typeof e.uri)throw new TypeError("missing ext.uri");if("number"!==typeof e.preferredId)throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!==typeof e.preferredEncrypt)throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!==typeof e.direction)throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function m(e){if("object"!==typeof e)throw new TypeError("params is not an object");if(e.mid&&"string"!==typeof e.mid)throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");for(const t of e.codecs)g(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);for(const t of e.headerExtensions)y(t);if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);for(const t of e.encodings)v(t);if(e.rtcp&&"object"!==typeof e.rtcp)throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),b(e.rtcp)}function g(e){const t=new RegExp("^(audio|video)/(.+)","i");if("object"!==typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!==typeof e.mimeType)throw new TypeError("missing codec.mimeType");const r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if("number"!==typeof e.payloadType)throw new TypeError("missing codec.payloadType");if("number"!==typeof e.clockRate)throw new TypeError("missing codec.clockRate");const n=r[1].toLowerCase();"audio"===n?"number"!==typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(const i of Object.keys(e.parameters)){let t=e.parameters[i];if(void 0===t&&(e.parameters[i]="",t=""),"string"!==typeof t&&"number"!==typeof t)throw new TypeError(`invalid codec parameter [key:${i}s, value:${t}]`);if("apt"===i&&"number"!==typeof t)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);for(const i of e.rtcpFeedback)f(i)}function y(e){if("object"!==typeof e)throw new TypeError("ext is not an object");if(!e.uri||"string"!==typeof e.uri)throw new TypeError("missing ext.uri");if("number"!==typeof e.id)throw new TypeError("missing ext.id");if(e.encrypt&&"boolean"!==typeof e.encrypt)throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(const t of Object.keys(e.parameters)){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!==typeof r&&"number"!==typeof r)throw new TypeError("invalid header extension parameter")}}function v(e){if("object"!==typeof e)throw new TypeError("encoding is not an object");if(e.ssrc&&"number"!==typeof e.ssrc)throw new TypeError("invalid encoding.ssrc");if(e.rid&&"string"!==typeof e.rid)throw new TypeError("invalid encoding.rid");if(e.rtx&&"object"!==typeof e.rtx)throw new TypeError("invalid encoding.rtx");if(e.rtx&&"number"!==typeof e.rtx.ssrc)throw new TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"===typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!==typeof e.scalabilityMode)throw new TypeError("invalid encoding.scalabilityMode")}function b(e){if("object"!==typeof e)throw new TypeError("rtcp is not an object");if(e.cname&&"string"!==typeof e.cname)throw new TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"===typeof e.reducedSize||(e.reducedSize=!0)}function _(e){if("object"!==typeof e)throw new TypeError("caps is not an object");if(!e.numStreams||"object"!==typeof e.numStreams)throw new TypeError("missing caps.numStreams");S(e.numStreams)}function S(e){if("object"!==typeof e)throw new TypeError("numStreams is not an object");if("number"!==typeof e.OS)throw new TypeError("missing numStreams.OS");if("number"!==typeof e.MIS)throw new TypeError("missing numStreams.MIS")}function w(e){if("object"!==typeof e)throw new TypeError("params is not an object");if("number"!==typeof e.port)throw new TypeError("missing params.port");if("number"!==typeof e.OS)throw new TypeError("missing params.OS");if("number"!==typeof e.MIS)throw new TypeError("missing params.MIS");if("number"!==typeof e.maxMessageSize)throw new TypeError("missing params.maxMessageSize")}function R(e){if("object"!==typeof e)throw new TypeError("params is not an object");if("number"!==typeof e.streamId)throw new TypeError("missing params.streamId");let t=!1;if("boolean"===typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!==typeof e.maxPacketLifeTime)throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!==typeof e.maxRetransmits)throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(t||!e.maxPacketLifeTime&&!e.maxRetransmits||(e.ordered=!1),e.label&&"string"!==typeof e.label)throw new TypeError("invalid params.label");if(e.protocol&&"string"!==typeof e.protocol)throw new TypeError("invalid params.protocol")}function O(e,t){const r={codecs:[],headerExtensions:[]};for(const n of t.codecs||[]){if(L(n))continue;const t=(e.codecs||[]).find(e=>D(e,n,{strict:!0,modify:!0}));if(!t)continue;const i={mimeType:t.mimeType,kind:t.kind,clockRate:t.clockRate,channels:t.channels,localPayloadType:t.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:t.parameters,remoteParameters:n.parameters,rtcpFeedback:M(t,n)};r.codecs.push(i)}for(const n of r.codecs){const r=e.codecs.find(e=>L(e)&&e.parameters.apt===n.localPayloadType),i=t.codecs.find(e=>L(e)&&e.parameters.apt===n.remotePayloadType);r&&i&&(n.localRtxPayloadType=r.preferredPayloadType,n.remoteRtxPayloadType=i.preferredPayloadType)}for(const n of t.headerExtensions){const t=e.headerExtensions.find(e=>I(e,n));if(!t)continue;const i={kind:n.kind,uri:n.uri,sendId:t.preferredId,recvId:n.preferredId,encrypt:t.preferredEncrypt,direction:"sendrecv"};switch(n.direction){case"sendrecv":i.direction="sendrecv";break;case"recvonly":i.direction="sendonly";break;case"sendonly":i.direction="recvonly";break;case"inactive":i.direction="inactive";break}r.headerExtensions.push(i)}return r}function x(e){const t={codecs:[],headerExtensions:[]};for(const r of e.codecs){const e={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(t.codecs.push(e),!r.remoteRtxPayloadType)continue;const n={mimeType:r.kind+"/rtx",kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};t.codecs.push(n)}for(const r of e.headerExtensions){if("sendrecv"!==r.direction&&"recvonly"!==r.direction)continue;const e={kind:r.kind,uri:r.uri,preferredId:r.recvId,preferredEncrypt:r.encrypt,direction:r.direction};t.headerExtensions.push(e)}return t}function k(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:n.kind+"/rtx",payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}return r}function P(e,t){const r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const n of t.codecs){if(n.kind!==e)continue;const t={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(t),n.localRtxPayloadType){const e={mimeType:n.kind+"/rtx",payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(e)}}for(const n of t.headerExtensions){if(n.kind&&n.kind!==e||"sendrecv"!==n.direction&&"sendonly"!==n.direction)continue;const t={uri:n.uri,id:n.sendId,encrypt:n.encrypt,parameters:{}};r.headerExtensions.push(t)}if(r.headerExtensions.some(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(e=>"goog-remb"!==e.type);else if(r.headerExtensions.some(e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri))for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(e=>"transport-cc"!==e.type);else for(const n of r.codecs)n.rtcpFeedback=(n.rtcpFeedback||[]).filter(e=>"transport-cc"!==e.type&&"goog-remb"!==e.type);return r}function C(e,t){const r=[];if(t){for(let n=0;n<e.length;++n)if(D(e[n],t)){r.push(e[n]),L(e[n+1])&&r.push(e[n+1]);break}if(0===r.length)throw new TypeError("no matching codec found")}else r.push(e[0]),L(e[1])&&r.push(e[1]);return r}function j(e){e=a.clone(e,{}),m(e);const t={mid:c,codecs:[],headerExtensions:[],encodings:[{ssrc:d}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=u,t.headerExtensions=e.headerExtensions,t}function T(e,t){return t.codecs.some(t=>t.kind===e)}function E(e,t){if(m(e),0===e.codecs.length)return!1;const r=e.codecs[0];return t.codecs.some(e=>e.remotePayloadType===r.payloadType)}function L(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function D(e,t,{strict:r=!1,modify:n=!1}={}){const i=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(i!==s)return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;switch(i){case"video/h264":{const i=e.parameters["packetization-mode"]||0,s=t.parameters["packetization-mode"]||0;if(i!==s)return!1;if(r){if(!o.isSameProfile(e.parameters,t.parameters))return!1;let r;try{r=o.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(a){return!1}n&&(r?(e.parameters["profile-level-id"]=r,t.parameters["profile-level-id"]=r):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break}case"video/vp9":if(r){const r=e.parameters["profile-id"]||0,n=t.parameters["profile-id"]||0;if(r!==n)return!1}break}return!0}function I(e,t){return(!e.kind||!t.kind||e.kind===t.kind)&&e.uri===t.uri}function M(e,t){const r=[];for(const n of e.rtcpFeedback||[]){const e=(t.rtcpFeedback||[]).find(e=>e.type===n.type&&(e.parameter===n.parameter||!e.parameter&&!n.parameter));e&&r.push(e)}return r}t.validateRtpCapabilities=p,t.validateRtpCodecCapability=l,t.validateRtcpFeedback=f,t.validateRtpHeaderExtension=h,t.validateRtpParameters=m,t.validateRtpCodecParameters=g,t.validateRtpHeaderExtensionParameters=y,t.validateRtpEncodingParameters=v,t.validateRtcpParameters=b,t.validateSctpCapabilities=_,t.validateNumSctpStreams=S,t.validateSctpParameters=w,t.validateSctpStreamParameters=R,t.getExtendedRtpCapabilities=O,t.getRecvRtpCapabilities=x,t.getSendingRtpParameters=k,t.getSendingRemoteRtpParameters=P,t.reduceCodecs=C,t.generateProbatorRtpParameters=j,t.canSend=T,t.canReceive=E}}]);
//# sourceMappingURL=chunk-vendors.d5e01099.js.map